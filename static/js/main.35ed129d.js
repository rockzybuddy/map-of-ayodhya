/*! For license information please see main.35ed129d.js.LICENSE.txt */
(()=>{var e={973:e=>{"use strict";function t(e,t,i){i=i||2;var o,s,a,l,d,h,p,g=t&&t.length,m=g?t[0]*i:e.length,_=n(e,0,m,i,!0),v=[];if(!_||_.next===_.prev)return v;if(g&&(_=function(e,t,i,r){var o,s,a,l=[];for(o=0,s=t.length;o<s;o++)(a=n(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)i=u(l[o],i);return i}(e,t,_,i)),e.length>80*i){o=a=e[0],s=l=e[1];for(var y=i;y<m;y+=i)(d=e[y])<o&&(o=d),(h=e[y+1])<s&&(s=h),d>a&&(a=d),h>l&&(l=h);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return r(_,v,i,o,s,p,0),v}function n(e,t,n,i,r){var o,s;if(r===A(e,t,n,i)>0)for(o=t;o<n;o+=i)s=S(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=S(o,e[o],e[o+1],s);return s&&_(s,s.next)&&(T(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(T(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function r(e,t,n,c,u,d,f){if(e){!f&&d&&function(e,t,n,i){var r=e;do{0===r.z&&(r.z=h(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(e,c,u,d);for(var p,g,m=e;e.prev!==e.next;)if(p=e.prev,g=e.next,d?s(e,c,u,d):o(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(g.i/n|0),T(e),e=g.next,m=g.next;else if((e=g)===m){f?1===f?r(e=a(i(e),t,n),t,n,c,u,d,2):2===f&&l(e,t,n,c,u,d):r(i(e),t,n,c,u,d,1);break}}}function o(e){var t=e.prev,n=e,i=e.next;if(m(t,n,i)>=0)return!1;for(var r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=r>o?r>s?r:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=i.next;g!==t;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&p(r,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(e,t,n,i){var r=e.prev,o=e,s=e.next;if(m(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,d=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,_=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,y=u>d?u>f?u:f:d>f?d:f,b=h(g,_,t,n,i),w=h(v,y,t,n,i),E=e.prevZ,S=e.nextZ;E&&E.z>=b&&S&&S.z<=w;){if(E.x>=g&&E.x<=v&&E.y>=_&&E.y<=y&&E!==r&&E!==s&&p(a,u,l,d,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,S.x>=g&&S.x<=v&&S.y>=_&&S.y<=y&&S!==r&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;E&&E.z>=b;){if(E.x>=g&&E.x<=v&&E.y>=_&&E.y<=y&&E!==r&&E!==s&&p(a,u,l,d,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;S&&S.z<=w;){if(S.x>=g&&S.x<=v&&S.y>=_&&S.y<=y&&S!==r&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(e,t,n){var r=e;do{var o=r.prev,s=r.next.next;!_(o,s)&&v(o,r,r.next,s)&&w(o,s)&&w(s,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),T(r),T(r.next),r=e=s),r=r.next}while(r!==e);return i(r)}function l(e,t,n,o,s,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=E(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,t,n,o,s,a,0),void r(u,t,n,o,s,a,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,i=t,r=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==t);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&p(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),w(i,e)&&(l<f||l===f&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,f=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var r=E(n,e);return i(r,r.next),i(n,n.next)}function d(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function h(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||_(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,n,i){var r=b(m(e,t,n)),o=b(m(e,t,i)),s=b(m(n,i,e)),a=b(m(n,i,t));return r!==o&&s!==a||(!(0!==r||!y(e,n,t))||(!(0!==o||!y(e,i,t))||(!(0!==s||!y(n,e,i))||!(0!==a||!y(n,t,i)))))}function y(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function b(e){return e>0?1:e<0?-1:0}function w(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function E(e,t){var n=new x(e.i,e.x,e.y),i=new x(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function S(e,t,n,i){var r=new x(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function x(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,n,i){for(var r=0,o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,s=Math.abs(A(e,0,o,n));if(r)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,u=a<l-1?t[a+1]*n:e.length;s-=Math.abs(A(e,c,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,f=i[a+1]*n,p=i[a+2]*n;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[r][o][s]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n}},895:(e,t,n)=>{var i;!function(r,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",h=Math.round,f=Math.abs,p=Date.now;function g(e,t,n){return setTimeout(E(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(_(e,n[t],n),!0)}function _(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function v(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}l="function"!==typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var y=v((function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===a)&&(e[i[r]]=t[i[r]]),r++;return e}),"extend","Use `assign`."),b=v((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&l(i,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function S(e,t){return typeof e==d?e.apply(t&&t[0]||a,t):e}function T(e,t){return e===a?t:e}function x(e,t,n){_(P(t),(function(t){e.addEventListener(t,n,!1)}))}function A(e,t,n){_(P(t),(function(t){e.removeEventListener(t,n,!1)}))}function R(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function P(e){return e.trim().split(/\s+/g)}function L(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function M(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];L(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}function I(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((i=(n=c[o])?n+r:t)in e)return i;o++}return a}var O=1;function N(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var F="ontouchstart"in r,D=I(r,"PointerEvent")!==a,B=F&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U="touch",z="mouse",G=25,j=1,V=4,W=8,H=1,X=2,K=4,Y=8,q=16,Z=X|K,Q=Y|q,$=Z|Q,J=["x","y"],ee=["clientX","clientY"];function te(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){S(e.options.enable,[e])&&n.handler(t)},this.init()}function ne(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&j&&i-r===0,s=t&(V|W)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=ie(t));r>1&&!n.firstMultiple?n.firstMultiple=ie(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=t.center=re(i);t.timeStamp=p(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=le(l,c),t.distance=ae(l,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==j&&o.eventType!==V||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=se(t.deltaX,t.deltaY);var u=oe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,t.scale=s?(d=s.pointers,h=i,ae(h[0],h[1],ee)/ae(d[0],d[1],ee)):1,t.rotation=s?function(e,t){return le(t[1],t[0],ee)+le(e[1],e[0],ee)}(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=W&&(l>G||s.velocity===a)){var c=t.deltaX-s.deltaX,u=t.deltaY-s.deltaY,d=oe(l,c,u);i=d.x,r=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=se(c,u),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var d,h;var g=e.element;R(t.srcEvent.target,g)&&(g=t.srcEvent.target);t.target=g}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function ie(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:re(t),deltaX:e.deltaX,deltaY:e.deltaY}}function re(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:h(n/t),y:h(i/t)}}function oe(e,t,n){return{x:t/e||0,y:n/e||0}}function se(e,t){return e===t?H:f(e)>=f(t)?e<0?X:K:t<0?Y:q}function ae(e,t,n){n||(n=J);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function le(e,t,n){n||(n=J);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}te.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(N(this.element),this.evWin,this.domHandler)}};var ce={mousedown:j,mousemove:2,mouseup:V},ue="mousedown",de="mousemove mouseup";function he(){this.evEl=ue,this.evWin=de,this.pressed=!1,te.apply(this,arguments)}w(he,te,{handler:function(e){var t=ce[e.type];t&j&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:z,srcEvent:e}))}});var fe={pointerdown:j,pointermove:2,pointerup:V,pointercancel:W,pointerout:W},pe={2:U,3:"pen",4:z,5:"kinect"},ge="pointerdown",me="pointermove pointerup pointercancel";function _e(){this.evEl=ge,this.evWin=me,te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(ge="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),w(_e,te,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=fe[i],o=pe[e.pointerType]||e.pointerType,s=o==U,a=L(t,e.pointerId,"pointerId");r&j&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):r&(V|W)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var ve={touchstart:j,touchmove:2,touchend:V,touchcancel:W};function ye(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,te.apply(this,arguments)}function be(e,t){var n=M(e.touches),i=M(e.changedTouches);return t&(V|W)&&(n=k(n.concat(i),"identifier",!0)),[n,i]}w(ye,te,{handler:function(e){var t=ve[e.type];if(t===j&&(this.started=!0),this.started){var n=be.call(this,e,t);t&(V|W)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}}});var we={touchstart:j,touchmove:2,touchend:V,touchcancel:W},Ee="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=Ee,this.targetIds={},te.apply(this,arguments)}function Te(e,t){var n=M(e.touches),i=this.targetIds;if(t&(2|j)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=M(e.changedTouches),a=[],l=this.target;if(o=n.filter((function(e){return R(e.target,l)})),t===j)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),t&(V|W)&&delete i[s[r].identifier],r++;return a.length?[k(o.concat(a),"identifier",!0),a]:void 0}w(Se,te,{handler:function(e){var t=we[e.type],n=Te.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}});var xe=2500;function Ae(){te.apply(this,arguments);var e=E(this.handler,this);this.touch=new Se(this.manager,e),this.mouse=new he(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Re(e,t){e&j?(this.primaryTouch=t.changedPointers[0].identifier,Ce.call(this,t)):e&(V|W)&&Ce.call(this,t)}function Ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),xe)}}function Pe(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}w(Ae,te,{handler:function(e,t,n){var i=n.pointerType==U,r=n.pointerType==z;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Re.call(this,t,n);else if(r&&Pe.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Le=I(u.style,"touchAction"),Me=Le!==a,ke="compute",Ie="auto",Oe="manipulation",Ne="none",Fe="pan-x",De="pan-y",Be=function(){if(!Me)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||r.CSS.supports("touch-action",n)})),e}();function Ue(e,t){this.manager=e,this.set(t)}Ue.prototype={set:function(e){e==ke&&(e=this.compute()),Me&&this.manager.element.style&&Be[e]&&(this.manager.element.style[Le]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return _(this.manager.recognizers,(function(t){S(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,Ne))return Ne;var t=C(e,Fe),n=C(e,De);if(t&&n)return Ne;if(t||n)return t?Fe:De;if(C(e,Oe))return Oe;return Ie}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=C(i,Ne)&&!Be[Ne],o=C(i,De)&&!Be[De],s=C(i,Fe)&&!Be[Fe];if(r){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&n&Z||s&&n&Q?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ze=1,Ge=32;function je(e){this.options=l({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=ze,this.simultaneous={},this.requireFail=[]}function Ve(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function We(e){return e==q?"down":e==Y?"up":e==X?"left":e==K?"right":""}function He(e,t){var n=t.manager;return n?n.get(e):e}function Xe(){je.apply(this,arguments)}function Ke(){Xe.apply(this,arguments),this.pX=null,this.pY=null}function Ye(){Xe.apply(this,arguments)}function qe(){je.apply(this,arguments),this._timer=null,this._input=null}function Ze(){Xe.apply(this,arguments)}function Qe(){Xe.apply(this,arguments)}function $e(){je.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Je(e,t){return(t=t||{}).recognizers=T(t.recognizers,Je.defaults.preset),new et(e,t)}je.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=He(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=He(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===L(t,e=He(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=He(e,this);var t=L(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+Ve(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+Ve(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ge},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ge|ze)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!S(this.options.enable,[this,t]))return this.reset(),void(this.state=Ge);56&this.state&&(this.state=ze),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(Xe,je,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(n&W||!r)?16|t:i||r?n&V?8|t:2&t?4|t:2:Ge}}),w(Ke,Xe,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var e=this.options.direction,t=[];return e&Z&&t.push(De),e&Q&&t.push(Fe),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&Z?(r=0===o?H:o<0?X:K,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?H:s<0?Y:q,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return Xe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=We(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Ye,Xe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(qe,je,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ie]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(V|W)&&!r)this.reset();else if(e.eventType&j)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),t.time,this);else if(e.eventType&V)return 8;return Ge},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Ze,Xe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(Qe,Xe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|Q,pointers:1},getTouchAction:function(){return Ke.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Z|Q)?t=e.overallVelocity:n&Z?t=e.overallVelocityX:n&Q&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=We(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w($e,je,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Oe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&j&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=V)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||ae(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Ge},failTimeout:function(){return this._timer=g((function(){this.state=Ge}),this.options.interval,this),Ge},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Je.VERSION="2.0.7",Je.defaults={domEvents:!1,touchAction:ke,enable:!0,inputTarget:null,inputClass:null,preset:[[Ze,{enable:!1}],[Ye,{enable:!1},["rotate"]],[Qe,{direction:Z}],[Ke,{direction:Z},["swipe"]],[$e],[$e,{event:"doubletap",taps:2},["tap"]],[qe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function et(e,t){var n;this.options=l({},Je.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(D?_e:B?Se:F?Ae:he))(n,ne),this.touchAction=new Ue(this,this.options.touchAction),tt(this,!0),_(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function tt(e,t){var n,i=e.element;i.style&&(_(e.options.cssProps,(function(r,o){n=I(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}et.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof je)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=L(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return _(P(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==a){var n=this.handlers;return _(P(e),(function(e){t?n[e]&&n[e].splice(L(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Je,{INPUT_START:j,INPUT_MOVE:2,INPUT_END:V,INPUT_CANCEL:W,STATE_POSSIBLE:ze,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ge,DIRECTION_NONE:H,DIRECTION_LEFT:X,DIRECTION_RIGHT:K,DIRECTION_UP:Y,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:Q,DIRECTION_ALL:$,Manager:et,Input:te,TouchAction:Ue,TouchInput:Se,MouseInput:he,PointerEventInput:_e,TouchMouseInput:Ae,SingleTouchInput:ye,Recognizer:je,AttrRecognizer:Xe,Tap:$e,Pan:Ke,Swipe:Qe,Pinch:Ye,Rotate:Ze,Press:qe,on:x,off:A,each:_,merge:b,extend:y,assign:l,inherit:w,bindFn:E,prefixed:I}),("undefined"!==typeof r?r:"undefined"!==typeof self?self:{}).Hammer=Je,(i=function(){return Je}.call(t,n,t,e))===a||(e.exports=i)}(window,document)},730:(e,t,n)=>{"use strict";var i=n(43),r=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),R=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,D=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function G(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case x:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var _e=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Te=null;function xe(e){if(e=yr(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),Ee(e.stateNode,e.type,t))}}function Ae(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Re(){if(Se){var e=Se,t=Te;if(Te=Se=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Le=!1;function Me(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ce(e,t,n)}finally{Le=!1,(null!==Se||null!==Te)&&(Pe(),Re())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Ie=!1}function Ne(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,De=null,Be=!1,Ue=null,ze={onError:function(e){Fe=!0,De=e}};function Ge(e,t,n,i,r,o,s,a,l){Fe=!1,De=null,Ne.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===i)return We(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,qe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Qe=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=dt(a):0!==(o&=s)&&(i=dt(o))}else 0!==(s=n&~r)?i=dt(s):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _t(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,St,Tt,xt,At=!1,Rt=[],Ct=null,Pt=null,Lt=null,Mt=new Map,kt=new Map,It=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Ft(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&Et(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=vr(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void xt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&Et(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function zt(){At=!1,null!==Ct&&Bt(Ct)&&(Ct=null),null!==Pt&&Bt(Pt)&&(Pt=null),null!==Lt&&Bt(Lt)&&(Lt=null),Mt.forEach(Ut),kt.forEach(Ut)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Gt(t,e)}if(0<Rt.length){Gt(Rt[0],e);for(var n=1;n<Rt.length;n++){var i=Rt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&Gt(Ct,e),null!==Pt&&Gt(Pt,e),null!==Lt&&Gt(Lt,e),Mt.forEach(t),kt.forEach(t),n=0;n<It.length;n++)(i=It[n]).blockedOn===e&&(i.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Dt(n),null===n.blockedOn&&It.shift()}var Vt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=1,Kt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function Xt(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=4,Kt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function Kt(e,t,n,i){if(Wt){var r=qt(e,t,n,i);if(null===r)Wi(e,t,i,Yt,n),Nt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,i,r),!0;case"dragenter":return Pt=Ft(Pt,e,t,n,i,r),!0;case"mouseover":return Lt=Ft(Lt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Mt.set(o,Ft(Mt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,kt.set(o,Ft(kt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Nt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var o=yr(r);if(null!==o&&wt(o),null===(o=qt(e,t,n,i))&&Wi(e,t,i,Yt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Yt=null;function qt(e,t,n,i){if(Yt=null,null!==(e=vr(e=we(i))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=D({},cn,{view:0,detail:0}),hn=on(dn),fn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(D({},fn,{dataTransfer:0})),mn=on(D({},dn,{relatedTarget:0})),_n=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(vn),bn=on(D({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return Tn}var An=D({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=on(An),Cn=on(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Ln=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=D({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=on(Mn),In=[9,13,27,32],On=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Nn,Dn=u&&(!On||Nn&&8<Nn&&11>=Nn),Bn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,i){Ae(i),0<(t=Xi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Xn=null,Kn=null;function Yn(e){Bi(e,0)}function qn(e){if(K(br(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(u){var $n;if(u){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Xn&&(Xn.detachEvent("onpropertychange",ni),Kn=Xn=null)}function ni(e){if("value"===e.propertyName&&qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Me(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(Xn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Kn)}function oi(e,t){if("click"===e)return qn(t)}function si(e,t){if("input"===e||"change"===e)return qn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,_i=null,vi=null,yi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Xi(_i,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ei={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},Ti={};function xi(e){if(Si[e])return Si[e];if(!Ei[e])return e;var t,n=Ei[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ti)return Si[e]=n[t];return e}u&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);var Ai=xi("animationend"),Ri=xi("animationiteration"),Ci=xi("animationstart"),Pi=xi("transitionend"),Li=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(e,t){Li.set(e,t),l(t,[e])}for(var Ii=0;Ii<Mi.length;Ii++){var Oi=Mi[Ii];ki(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}ki(Ai,"onAnimationEnd"),ki(Ri,"onAnimationIteration"),ki(Ci,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Di(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,c){if(Ge.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var u=De;Fe=!1,De=null,Be||(Be=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function Bi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Di(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Di(r,a,c),o=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ui(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function ji(e){if(!e[Gi]){e[Gi]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gi]||(t[Gi]=!0,zi("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Zt(t)){case 1:var r=Ht;break;case 4:r=Xt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=vr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Me((function(){var i=o,r=we(n),s=[];e:{var a=Li.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Rn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ai:case Ri:case Ci:l=_n;break;case Pi:l=Ln;break;case"scroll":l=hn;break;case"wheel":l=kn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=ke(p,h))&&u.push(Hi(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(d=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:br(l),f=null==c?a:br(c),(a=new u(g,p+"leave",l,n,r)).target=d,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Ki(f))p++;for(f=0,g=h;g;g=Ki(g))f++;for(;0<p-f;)u=Ki(u),p--;for(;0<f-p;)h=Ki(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ki(u),h=Ki(h)}u=null}else u=null;null!==l&&Yi(s,a,l,u,!1),null!==c&&null!==d&&Yi(s,d,c,u,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zn;else if(Wn(a))if(Qn)m=si;else{m=ri;var _=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=oi);switch(m&&(m=m(e,i))?Hn(s,m,n,r):(_&&_(e,a,i),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&ee(a,"number",a.value)),_=i?br(i):window,e){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(mi=_,_i=i,vi=null);break;case"focusout":vi=_i=mi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(s,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(s,n,r)}var v;if(On)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else jn?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==y?"onCompositionEnd"===y&&jn&&(v=en()):($t="value"in(Qt=r)?Qt.value:Qt.textContent,jn=!0)),0<(_=Xi(i,y)).length&&(y=new bn(y,e,null,n,r),s.push({event:y,listeners:_}),v?y.data=v:null!==(v=Gn(n))&&(y.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Jt=$t=Qt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Xi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=v))}Bi(s,t)}))}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=ke(e,n))&&i.unshift(Hi(e,o,r)),null!=(o=ke(e,t))&&i.push(Hi(e,o,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=ke(n,o))&&s.unshift(Hi(n,l,a)):r||null!=(l=ke(n,o))&&s.push(Hi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var qi=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(qi,"\n").replace(Zi,"")}function $i(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(o(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void jt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);jt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,gr="__reactEvents$"+dr,mr="__reactListeners$"+dr,_r="__reactHandles$"+dr;function vr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[fr]||null}var Er=[],Sr=-1;function Tr(e){return{current:e}}function xr(e){0>Sr||(e.current=Er[Sr],Er[Sr]=null,Sr--)}function Ar(e,t){Sr++,Er[Sr]=e.current,e.current=t}var Rr={},Cr=Tr(Rr),Pr=Tr(!1),Lr=Rr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Rr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function kr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){xr(Pr),xr(Cr)}function Or(e,t,n){if(Cr.current!==Rr)throw Error(o(168));Ar(Cr,t),Ar(Pr,n)}function Nr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return D({},n,i)}function Fr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,Lr=Cr.current,Ar(Cr,e),Ar(Pr,Pr.current),!0}function Dr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Nr(e,t,Lr),i.__reactInternalMemoizedMergedChildContext=e,xr(Pr),xr(Cr),Ar(Cr,e)):xr(Pr),Ar(Pr,n)}var Br=null,Ur=!1,zr=!1;function Gr(e){null===Br?Br=[e]:Br.push(e)}function jr(){if(!zr&&null!==Br){zr=!0;var e=0,t=yt;try{var n=Br;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Br=null,Ur=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),Ke(Je,jr),r}finally{yt=t,zr=!1}}return null}var Vr=[],Wr=0,Hr=null,Xr=0,Kr=[],Yr=0,qr=null,Zr=1,Qr="";function $r(e,t){Vr[Wr++]=Xr,Vr[Wr++]=Hr,Hr=e,Xr=t}function Jr(e,t,n){Kr[Yr++]=Zr,Kr[Yr++]=Qr,Kr[Yr++]=qr,qr=e;var i=Zr;e=Qr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Zr=1<<32-st(t)+r|n<<r|i,Qr=o+e}else Zr=1<<o|n<<r|i,Qr=e}function eo(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function to(e){for(;e===Hr;)Hr=Vr[--Wr],Vr[Wr]=null,Xr=Vr[--Wr],Vr[Wr]=null;for(;e===qr;)qr=Kr[--Yr],Kr[Yr]=null,Qr=Kr[--Yr],Kr[Yr]=null,Zr=Kr[--Yr],Kr[Yr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qr?{id:Zr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=io;e;)e=cr(e.nextSibling)}function po(){io=no=null,ro=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function _o(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Dc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===S?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&yo(o)===t.type)?((i=r(t,n.props)).ref=_o(e,t,n),i.return=e,i):((i=Oc(n.type,n.key,n.props,null,e.mode,i)).ref=_o(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=_o(e,null,t),n.return=e,n;case E:return(t=Bc(t,e.mode,n)).return=e,t;case k:return h(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Nc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case E:return n.key===r?u(e,t,n,i):null;case k:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:d(e,t,n,i,null);vo(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case E:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return d(t,e=e.get(n)||null,i,r,null);vo(t,i)}return null}function g(r,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var _=f(r,d,a[g],l);if(null===_){null===d&&(d=m);break}e&&d&&null===_.alternate&&t(r,d),o=s(_,o,g),null===u?c=_:u.sibling=_,u=_,d=m}if(g===a.length)return n(r,d),ro&&$r(r,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(r,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return ro&&$r(r,g),c}for(d=i(r,d);g<a.length;g++)null!==(m=p(d,r,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(r,e)})),ro&&$r(r,g),c}function m(r,a,l,c){var u=N(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,_=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(_=g,g=null):_=g.sibling;var y=f(r,g,v.value,c);if(null===y){null===g&&(g=_);break}e&&g&&null===y.alternate&&t(r,g),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y,g=_}if(v.done)return n(r,g),ro&&$r(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(r,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return ro&&$r(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(r,e)})),ro&&$r(r,m),u}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===k&&yo(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=_o(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===S?((o=Nc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Oc(s.type,s.key,s.props,null,i.mode,l)).ref=_o(i,o,s),l.return=i,i=l)}return a(i);case E:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Bc(s,i.mode,l)).return=i,i=o}return a(i);case k:return e(i,o,(u=s._init)(s._payload),l)}if(te(s))return g(i,o,s,l);if(N(s))return m(i,o,s,l);vo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Dc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var wo=bo(!0),Eo=bo(!1),So=Tr(null),To=null,xo=null,Ao=null;function Ro(){Ao=xo=To=null}function Co(e){var t=So.current;xr(So),e._currentValue=t}function Po(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Lo(e,t){To=e,Ao=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(Ao!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===To)throw Error(o(308));xo=e,To.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var ko=null;function Io(e){null===ko?ko=[e]:ko.push(e)}function Oo(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Io(t)):(n.next=r.next,r.next=n),t.interleaved=n,No(e,i)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fo=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Cl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,No(e,n)}return null===(r=i.interleaved)?(t.next=t,Io(i)):(t.next=r.next,r.next=t),i.interleaved=t,No(e,n)}function Go(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function jo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,i){var r=e.updateQueue;Fo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=r.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Fo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=d}}function Wo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Ho={},Xo=Tr(Ho),Ko=Tr(Ho),Yo=Tr(Ho);function qo(e){if(e===Ho)throw Error(o(174));return e}function Zo(e,t){switch(Ar(Yo,t),Ar(Ko,e),Ar(Xo,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xr(Xo),Ar(Xo,t)}function Qo(){xr(Xo),xr(Ko),xr(Yo)}function $o(e){qo(Yo.current);var t=qo(Xo.current),n=le(t,e.type);t!==n&&(Ar(Ko,e),Ar(Xo,n))}function Jo(e){Ko.current===e&&(xr(Xo),xr(Ko))}var es=Tr(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function is(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var rs=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function ms(e,t,n,i,r,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Js:ea,e=n(i,r),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,rs.current=ta,e=n(i,r)}while(ds)}if(rs.current=$s,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function _s(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ys(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function bs(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=ls,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,as.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,as.lanes|=s,Fl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ya=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ss(){}function Ts(e,t){var n=as,i=ys(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ya=!0),i=i.queue,Fs(Rs.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ms(9,As.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ss)||xs(n,t,r)}return r}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function As(e,t,n,i){t.value=n,t.getSnapshot=i,Cs(t)&&Ps(e)}function Rs(e,t,n){return n((function(){Cs(t)&&Ps(e)}))}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Ps(e){var t=No(e,1);null!==t&&nc(t,e,1,-1)}function Ls(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ys.bind(null,as,e),[t.memoizedState,e]}function Ms(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ks(){return ys().memoizedState}function Is(e,t,n,i){var r=vs();as.flags|=e,r.memoizedState=Ms(1|t,n,void 0,void 0===i?null:i)}function Os(e,t,n,i){var r=ys();i=void 0===i?null:i;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==i&&gs(i,s.deps))return void(r.memoizedState=Ms(t,n,o,i))}as.flags|=e,r.memoizedState=Ms(1|t,n,o,i)}function Ns(e,t){return Is(8390656,8,e,t)}function Fs(e,t){return Os(2048,8,e,t)}function Ds(e,t){return Os(4,2,e,t)}function Bs(e,t){return Os(4,4,e,t)}function Us(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,Us.bind(null,t,e),n)}function Gs(){}function js(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&gs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Vs(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&gs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),as.lanes|=n,Fl|=n,e.baseState=!0),t)}function Hs(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=os.transition;os.transition={};try{e(!1),t()}finally{yt=n,os.transition=i}}function Xs(){return ys().memoizedState}function Ks(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qs(e))Zs(t,n);else if(null!==(n=Oo(e,t,n,i))){nc(n,e,i,ec()),Qs(n,t,i)}}function Ys(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qs(e))Zs(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=t.interleaved;return null===l?(r.next=r,Io(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Oo(e,t,r,i))&&(nc(n,e,i,r=ec()),Qs(n,t,i))}}function qs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Zs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $s={readContext:Mo,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Js={readContext:Mo,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Ns,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Is(4194308,4,Us.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=vs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ks.bind(null,as,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ls,useDebugValue:Gs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Hs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=as,r=vs();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ss)||xs(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ns(Rs.bind(null,i,s,e),[e]),i.flags|=2048,Ms(9,As.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Pl.identifierPrefix;if(ro){var n=Qr;t=":"+t+"R"+(n=(Zr&~(1<<32-st(Zr)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Mo,useCallback:js,useContext:Mo,useEffect:Fs,useImperativeHandle:zs,useInsertionEffect:Ds,useLayoutEffect:Bs,useMemo:Vs,useReducer:ws,useRef:ks,useState:function(){return ws(bs)},useDebugValue:Gs,useDeferredValue:function(e){return Ws(ys(),ls.memoizedState,e)},useTransition:function(){return[ws(bs)[0],ys().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Xs,unstable_isNewReconciler:!1},ta={readContext:Mo,useCallback:js,useContext:Mo,useEffect:Fs,useImperativeHandle:zs,useInsertionEffect:Ds,useLayoutEffect:Bs,useMemo:Vs,useReducer:Es,useRef:ks,useState:function(){return Es(bs)},useDebugValue:Gs,useDeferredValue:function(e){var t=ys();return null===ls?t.memoizedState=e:Ws(t,ls.memoizedState,e)},useTransition:function(){return[Es(bs)[0],ys().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Xs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Uo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,r))&&(nc(t,e,r,i),Go(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Uo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,r))&&(nc(t,e,r,i),Go(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Uo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zo(e,r,i))&&(nc(t,e,i,n),Go(t,e,i))}};function oa(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function sa(e,t,n){var i=!1,r=Rr,o=t.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(r=kr(t)?Lr:Cr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mr(e,r):Rr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Do(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Mo(o):(o=kr(t)?Lr:Cr.current,r.context=Mr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ia(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Vo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",i=t;do{n+=G(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=i),da(0,t)},n}function pa(e,t,n){(n=Uo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var va=b.ReactCurrentOwner,ya=!1;function ba(e,t,n,i){t.child=null===e?Eo(t,null,n,i):wo(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var o=t.ref;return Lo(t,r),i=ms(e,t,n,i,o,r),n=_s(),null===e||ya?(ro&&n&&eo(t),t.flags|=1,ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function Ea(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||kc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return Wa(e,t,r)}return t.flags|=1,(e=Ic(o,i)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Wa(e,t,r);0!==(131072&e.flags)&&(ya=!0)}}return Aa(e,t,n,i,r)}function Ta(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Il,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Il,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Ar(Il,kl),kl|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Ar(Il,kl),kl|=i;return ba(e,t,r,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,i,r){var o=kr(n)?Lr:Cr.current;return o=Mr(t,o),Lo(t,r),n=ms(e,t,n,i,o,r),i=_s(),null===e||ya?(ro&&i&&eo(t),t.flags|=1,ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function Ra(e,t,n,i,r){if(kr(n)){var o=!0;Fr(t)}else o=!1;if(Lo(t,r),null===t.stateNode)Va(e,t),sa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Mo(c):c=Mr(t,c=kr(n)?Lr:Cr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,s,i,c),Fo=!1;var h=t.memoizedState;s.state=h,Vo(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Pr.current||Fo?("function"===typeof u&&(ia(t,n,u,i),l=t.memoizedState),(a=Fo||oa(t,n,a,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Bo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Mo(l):l=Mr(t,l=kr(n)?Lr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,i,l),Fo=!1,h=t.memoizedState,s.state=h,Vo(t,i,s,r);var p=t.memoizedState;a!==d||h!==p||Pr.current||Fo?("function"===typeof f&&(ia(t,n,f,i),p=t.memoizedState),(c=Fo||oa(t,n,c,i,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ca(e,t,n,i,o,r)}function Ca(e,t,n,i,r,o){xa(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Dr(t,n,!1),Wa(e,t,o);i=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,a,o)):ba(e,t,a,o),t.memoizedState=i.state,r&&Dr(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),Zo(e,t.containerInfo)}function La(e,t,n,i,r){return po(),go(r),t.flags|=256,ba(e,t,n,i),t.child}var Ma,ka,Ia,Oa,Na={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Da(e,t,n){var i,r=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ar(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,r,0,null),e=Nc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Na,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,i=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(s=Nc(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&wo(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Na,s);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(e,t,a,i=ua(s=Error(o(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=Pl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,No(e,r),nc(i,e,r,-1))}return gc(),Ua(e,t,a,i=ua(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Kr[Yr++]=Zr,Kr[Yr++]=Qr,Kr[Yr++]=qr,Zr=e.id,Qr=e.overflow,qr=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(a){a=r.fallback,l=t.mode,i=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ic(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Ic(i,a):(a=Nc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Na,r}return e=(a=e.child).sibling,r=Ic(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ba(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,i){return null!==i&&go(i),wo(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Po(e.return,t,n)}function Ga(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function ja(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(ba(e,t,i.children,n),0!==(2&(i=es.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ar(es,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ga(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ts(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ga(t,!0,n,null,o);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return kr(t.type)&&Ir(),Xa(t),null;case 3:return i=t.stateNode,Qo(),xr(Pr),xr(Cr),is(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),ka(e,t),Xa(t),null;case 5:Jo(t);var r=qo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ia(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Xa(t),null}if(e=qo(Xo.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[fr]=s,e=0!==(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Ni.length;r++)Ui(Ni[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Z(i,s),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ui("invalid",i);break;case"textarea":re(i,s),Ui("invalid",i)}for(var l in ve(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":X(i),J(i,s,!0);break;case"textarea":X(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[fr]=i,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ni.length;r++)Ui(Ni[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":Z(e,i),r=q(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=D({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(s in ve(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ui("scroll",e):null!=u&&y(e,s,u,l))}switch(n){case"input":X(e),J(e,i,!1);break;case"textarea":X(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=qo(Yo.current),qo(Xo.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$i(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Xa(t),null;case 13:if(xr(es),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Qo(),ka(e,t),null===e&&ji(t.stateNode.containerInfo),Xa(t),null;case 10:return Co(t.type._context),Xa(t),null;case 19:if(xr(es),null===(s=t.memoizedState))return Xa(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)Ha(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ha(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>jl&&(t.flags|=128,i=!0,Ha(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ts(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Xa(t),null}else 2*Qe()-s.renderingStartTime>jl&&1073741824!==n&&(t.flags|=128,i=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Ar(es,i?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return kr(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),xr(Pr),xr(Cr),is(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(xr(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xr(es),null;case 4:return Qo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ka=function(){},Ia=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,qo(Xo.current);var o,s=null;switch(n){case"input":r=q(e,r),i=q(e,i),s=[];break;case"select":r=D({},r,{value:void 0}),i=D({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,i){n!==i&&(t.flags|=4)};var qa=!1,Za=!1,Qa="function"===typeof WeakSet?WeakSet:Set,$a=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Tc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,n,o)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[fr],delete t[gr],delete t[mr],delete t[_r])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Za||Ja(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),jt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!Za&&(Ja(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Tc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Za=(i=Za)||null!==n.memoizedState,hl(e,t,n),Za=i):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var i=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Tc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){Tc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:gl(t,e),_l(e),512&i&&null!==n&&Ja(n,n.return);break;case 5:if(gl(t,e),_l(e),512&i&&null!==n&&Ja(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Tc(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(r,s),ye(l,a);var u=ye(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,u)}switch(l){case"input":$(r,s);break;case"textarea":oe(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(r,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[fr]=s}catch(m){Tc(e,e.return,m)}}break;case 6:if(gl(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(m){Tc(e,e.return,m)}}break;case 3:if(gl(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Gl=Qe())),4&i&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,gl(t,e),Za=u):gl(t,e),_l(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($a=e,d=e.child;null!==d;){for(h=$a=d;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tc(i,n,m)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,$a=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Tc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),_l(e),4&i&&pl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$a=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==$a;){var r=$a,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||qa;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Za;a=qa;var c=Za;if(qa=s,(Za=l)&&!c)for($a=r;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?El(r):null!==l?(l.return=s,$a=l):El(r);for(;null!==o;)$a=o,yl(o,t,n),o=o.sibling;$a=r,qa=a,Za=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,$a=o):bl(e)}}function bl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Za)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wo(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(o(163))}Za||512&t.flags&&rl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function wl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Tc(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Tc(t,o,l)}break;case 5:var s=t.return;try{rl(t)}catch(l){Tc(t,s,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Tl=Math.ceil,xl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Rl=b.ReactCurrentBatchConfig,Cl=0,Pl=null,Ll=null,Ml=0,kl=0,Il=Tr(0),Ol=0,Nl=null,Fl=0,Dl=0,Bl=0,Ul=null,zl=null,Gl=0,jl=1/0,Vl=null,Wl=!1,Hl=null,Xl=null,Kl=!1,Yl=null,ql=0,Zl=0,Ql=null,$l=-1,Jl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==$l?$l:$l=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ml?Ml&-Ml:null!==mo.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,i){if(50<Zl)throw Zl=0,Ql=null,Error(o(185));_t(e,n,i),0!==(2&Cl)&&e===Pl||(e===Pl&&(0===(2&Cl)&&(Dl|=n),4===Ol&&ac(e,Ml)),ic(e,i),1===n&&0===Cl&&0===(1&t.mode)&&(jl=Qe()+500,Ur&&jr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===Pl?Ml:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ur=!0,Gr(e)}(lc.bind(null,e)):Gr(lc.bind(null,e)),sr((function(){0===(6&Cl)&&jr()})),n=null;else{switch(bt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if($l=-1,Jl=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?Ml:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=Cl;Cl|=2;var s=pc();for(Pl===e&&Ml===t||(Vl=null,jl=Qe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ro(),xl.current=s,Cl=r,null!==Ll?t=0:(Pl=null,Ml=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=oc(e,r))),1===t)throw n=Nl,hc(e,0),ac(e,i),ic(e,Qe()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&(0!==(s=pt(e))&&(i=s,t=oc(e,s))),1===t))throw n=Nl,hc(e,0),ac(e,i),ic(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,zl,Vl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Gl+500-Qe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wc.bind(null,e,zl,Vl),t);break}wc(e,zl,Vl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tl(i/1960))-i)){e.timeoutHandle=ir(wc.bind(null,e,zl,Vl),i);break}wc(e,zl,Vl);break;default:throw Error(o(329))}}}return ic(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&sc(t)),e}function sc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Bl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Cl))throw Error(o(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Nl,hc(e,0),ac(e,t),ic(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Vl),ic(e,Qe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(jl=Qe()+500,Ur&&jr())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=Rl.transition,i=yt;try{if(Rl.transition=null,yt=1,e)return e()}finally{yt=i,Rl.transition=n,0===(6&(Cl=t))&&jr()}}function dc(){kl=Il.current,xr(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ll)for(n=Ll.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ir();break;case 3:Qo(),xr(Pr),xr(Cr),is();break;case 5:Jo(i);break;case 4:Qo();break;case 13:case 19:xr(es);break;case 10:Co(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Ll=e=Ic(e.current,null),Ml=kl=t,Ol=0,Nl=null,Bl=Dl=Fl=0,zl=Ul=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(i=(n=ko[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}ko=null}return e}function fc(e,t){for(;;){var n=Ll;try{if(Ro(),rs.current=$s,us){for(var i=as.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Al.current=null,null===n||null===n.return){Ol=1,Nl=t,Ll=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var _=ma(a);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),_a(_,a,l,0,t),go(ca(c,l));break e}}s=c=ca(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,jo(s,fa(0,c,t));break e;case 1:l=c;var v=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Xl||!Xl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,jo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function pc(){var e=xl.current;return xl.current=$s,null===e?$s:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Dl)||ac(Pl,Ml)}function mc(e,t){var n=Cl;Cl|=2;var i=pc();for(Pl===e&&Ml===t||(Vl=null,hc(e,t));;)try{_c();break}catch(r){fc(e,r)}if(Ro(),Cl=n,xl.current=i,null!==Ll)throw Error(o(261));return Pl=null,Ml=0,Ol}function _c(){for(;null!==Ll;)yc(Ll)}function vc(){for(;null!==Ll&&!qe();)yc(Ll)}function yc(e){var t=Sl(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?bc(e):Ll=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,kl)))return void(Ll=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Ol=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var i=yt,r=Rl.transition;try{Rl.transition=null,yt=1,function(e,t,n,i){do{Ec()}while(null!==Yl);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Pl&&(Ll=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,(function(){return Ec(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Rl.transition,Rl.transition=null;var a=yt;yt=1;var l=Cl;Cl|=4,Al.current=null,function(e,t){if(er=Wt,fi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===s&&++d===i&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,_=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=tl,tl=!1}(e,n),ml(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,vl(n,e,r),Ze(),Cl=l,yt=a,Rl.transition=s}else e.current=n;if(Kl&&(Kl=!1,Yl=e,ql=r),s=e.pendingLanes,0===s&&(Xl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&ql)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,jr()}(e,t,n,i)}finally{Rl.transition=r,yt=i}return null}function Ec(){if(null!==Yl){var e=bt(ql),t=Rl.transition,n=yt;try{if(Rl.transition=null,yt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,ql=0,0!==(6&Cl))throw Error(o(331));var r=Cl;for(Cl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var f=(d=$a).sibling,p=d.return;if(ol(d),d===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(null!==m)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,$a=v;break e}$a=s.return}}var y=e.current;for($a=y;null!==$a;){var b=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,$a=b;else e:for(a=y;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){$a=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$a=w;break e}$a=l.return}}if(Cl=r,jr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(E){}i=!0}return i}finally{yt=n,Rl.transition=t}}return!1}function Sc(e,t,n){e=zo(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(_t(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=zo(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(_t(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Ol||3===Ol&&(130023424&Ml)===Ml&&500>Qe()-Gl?hc(e,0):Bl|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=No(e,t))&&(_t(e,t,n),ic(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Ac(e,n)}function Pc(e,t){return Ke(e,t)}function Lc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,i){return new Lc(e,t,n,i)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)kc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Nc(n.children,r,s,t);case T:a=8,r|=8;break;case x:return(e=Mc(12,n,t,2|r)).elementType=x,e.lanes=s,e;case P:return(e=Mc(13,n,t,r)).elementType=P,e.lanes=s,e;case L:return(e=Mc(19,n,t,r)).elementType=L,e.lanes=s,e;case I:return Fc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case R:a=9;break e;case C:a=11;break e;case M:a=14;break e;case k:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Nc(e,t,n,i){return(e=Mc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Mc(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,i,r,o,s,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function Gc(e){if(!e)return Rr;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(kr(n))return Nr(e,n,t)}return t}function jc(e,t,n,i,r,o,s,a,l){return(e=zc(n,i,!0,e,0,o,0,a,l)).context=Gc(null),n=e.current,(o=Uo(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,r),e.current.lanes=r,_t(e,r,i),ic(e,i),e}function Vc(e,t,n,i){var r=t.current,o=ec(),s=tc(r);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=zo(r,t,s))&&(nc(e,r,s,o),Go(e,r,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),po();break;case 5:$o(t);break;case 1:kr(t.type)&&Fr(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Ar(So,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ar(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Da(e,t,n):(Ar(es,1&es.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ar(es,1&es.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return ja(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(es,es.current),i)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,ro&&0!==(1048576&t.flags)&&Jr(t,Xr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Va(e,t),e=t.pendingProps;var r=Mr(t,Cr.current);Lo(t,n),r=ms(null,t,i,e,r,n);var s=_s();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kr(i)?(s=!0,Fr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Do(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ca(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),ba(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return kc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===M)return 14}return 2}(i),e=na(i,e),r){case 0:t=Aa(null,t,i,e,n);break e;case 1:t=Ra(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=Ea(null,t,i,na(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Aa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ra(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Pa(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Bo(e,t),Vo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=La(e,t,i,n,r=ca(Error(o(423)),t));break e}if(i!==r){t=La(e,t,i,n,r=ca(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=Eo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),i===r){t=Wa(e,t,n);break e}ba(e,t,i,n)}t=t.child}return t;case 5:return $o(t),null===e&&co(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),xa(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Da(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=wo(t,null,i,n):ba(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Ar(So,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Pr.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Uo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Po(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Po(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Lo(t,n),i=i(r=Mo(r)),t.flags|=1,ba(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),Ea(e,t,i,r=na(i.type,r),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),Va(e,t),t.tag=1,kr(i)?(e=!0,Fr(t)):e=!1,Lo(t,n),sa(t,i,r),la(t,i,r,n),Ca(null,t,i,!0,e,n);case 19:return ja(e,t,n);case 22:return Ta(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Jc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Wc(s);a.call(e)}}Vc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Wc(s);o.call(e)}}var s=jc(t,i,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[pr]=s.current,ji(8===e.nodeType?e.parentNode:e),uc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Wc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pr]=l.current,ji(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,i)})),l}(n,t,e,r,i);return Wc(s)}qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[pr]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Qe()),0===(6&Cl)&&(jl=Qe()+500,jr()))}break;case 13:uc((function(){var t=No(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Xc(e,1)}},Et=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)nc(t,e,134217728,ec());Xc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=No(e,t);if(null!==n)nc(n,e,t,ec());Xc(e,t)}},Tt=function(){return yt},xt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(o(90));K(i),$(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[yr,br,wr,Ae,Re,cc]},tu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,i="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,ji(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,r,0,s,a),e[pr]=t.current,ji(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new qc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=_.prototype;var b=y.prototype=new v;b.constructor=y,g(b,_.prototype),b.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,w(s)?(r="",null!=e&&(r=e.replace(R,"$&/")+"/"),P(s,t,r,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(R,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=P(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},I={transition:null},O={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=r,t.Profiler=s,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=N,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,b(e),!g)if(null!==i(c))g=!0,I(E);else{var t=i(u);null!==t&&O(w,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,v(A),A=-1),p=!0;var o=f;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,x=null,A=-1,R=5,C=-1;function P(){return!(t.unstable_now()-C<R)}function L(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?S():(T=!1,x=null)}}else T=!1}if("function"===typeof y)S=function(){y(L)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,k=M.port2;M.port1.onmessage=L,S=function(){k.postMessage(null)}}else S=function(){_(L,0)};function I(e){x=e,T||(T=!0,S())}function O(e,n){A=_((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,I(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(m?(v(A),A=-1):m=!0,O(w,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,I(E))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},746:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(e,t,n){return t=p(t),_(e,o()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function n(t,n){return t.get(e(t,n))}function i(t,n,i){return t.set(e(t,n),i),i}function r(e,t,n){if(o())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&g(r,n.prototype),r}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o=function(){return!!e})()}function s(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function a(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e){var t=a(e,"string");return"symbol"==typeof t?t:t+""}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function y(){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=v(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},y.apply(this,arguments)}function b(e,t){return S(e)||s(e,t)||x(e,t)||C()}function w(e){return E(e)||T(e)||x(e)||R()}function E(e){if(Array.isArray(e))return A(e)}function S(e){if(Array.isArray(e))return e}function T(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e,t){if(e){if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L(e,t,n){P(e,t),t.set(e,n)}var M=100,k={},I=function(){k.previousActiveElement instanceof HTMLElement?(k.previousActiveElement.focus(),k.previousActiveElement=null):document.body&&document.body.focus()},O=function(e){return new Promise((function(t){if(!e)return t();var n=window.scrollX,i=window.scrollY;k.restoreFocusTimeout=setTimeout((function(){I(),t()}),M),window.scrollTo(n,i)}))},N="swal2-",F=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((function(e,t){return e[t]=N+t,e}),{}),D=["success","warning","info","question","error"].reduce((function(e,t){return e[t]=N+t,e}),{}),B="SweetAlert2:",U=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},z=function(e){console.warn("".concat(B," ").concat("object"===c(e)?e.join(" "):e))},G=function(e){console.error("".concat(B," ").concat(e))},j=[],V=function(e){j.includes(e)||(j.push(e),z(e))},W=function(e,t){V('"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(t,'" instead.'))},H=function(e){return"function"===typeof e?e():e},X=function(e){return e&&"function"===typeof e.toPromise},K=function(e){return X(e)?e.toPromise():Promise.resolve(e)},Y=function(e){return e&&Promise.resolve(e)===e},q=function(){return document.body.querySelector(".".concat(F.container))},Z=function(e){var t=q();return t?t.querySelector(e):null},Q=function(e){return Z(".".concat(e))},$=function(){return Q(F.popup)},J=function(){return Q(F.icon)},ee=function(){return Q(F["icon-content"])},te=function(){return Q(F.title)},ne=function(){return Q(F["html-container"])},ie=function(){return Q(F.image)},re=function(){return Q(F["progress-steps"])},oe=function(){return Q(F["validation-message"])},se=function(){return Z(".".concat(F.actions," .").concat(F.confirm))},ae=function(){return Z(".".concat(F.actions," .").concat(F.cancel))},le=function(){return Z(".".concat(F.actions," .").concat(F.deny))},ce=function(){return Q(F["input-label"])},ue=function(){return Z(".".concat(F.loader))},de=function(){return Q(F.actions)},he=function(){return Q(F.footer)},fe=function(){return Q(F["timer-progress-bar"])},pe=function(){return Q(F.close)},ge='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',me=function(){var e=$();if(!e)return[];var t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((function(e,t){var n=parseInt(e.getAttribute("tabindex")||"0"),i=parseInt(t.getAttribute("tabindex")||"0");return n>i?1:n<i?-1:0})),i=e.querySelectorAll(ge),r=Array.from(i).filter((function(e){return"-1"!==e.getAttribute("tabindex")}));return w(new Set(n.concat(r))).filter((function(e){return Fe(e)}))},_e=function(){return we(document.body,F.shown)&&!we(document.body,F["toast-shown"])&&!we(document.body,F["no-backdrop"])},ve=function(){var e=$();return!!e&&we(e,F.toast)},ye=function(){var e=$();return!!e&&e.hasAttribute("data-loading")},be=function(e,t){if(e.textContent="",t){var n=(new DOMParser).parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach((function(t){e.appendChild(t)}));var r=n.querySelector("body");r&&Array.from(r.childNodes).forEach((function(t){t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},we=function(e,t){if(!t)return!1;for(var n=t.split(/\s+/),i=0;i<n.length;i++)if(!e.classList.contains(n[i]))return!1;return!0},Ee=function(e,t){Array.from(e.classList).forEach((function(n){Object.values(F).includes(n)||Object.values(D).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Se=function(e,t,n){if(Ee(e,t),t.customClass&&t.customClass[n]){if("string"!==typeof t.customClass[n]&&!t.customClass[n].forEach)return void z("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(c(t.customClass[n]),'"'));Re(e,t.customClass[n])}},Te=function(e,t){if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(F.popup," > .").concat(F[t]));case"checkbox":return e.querySelector(".".concat(F.popup," > .").concat(F.checkbox," input"));case"radio":return e.querySelector(".".concat(F.popup," > .").concat(F.radio," input:checked"))||e.querySelector(".".concat(F.popup," > .").concat(F.radio," input:first-child"));case"range":return e.querySelector(".".concat(F.popup," > .").concat(F.range," input"));default:return e.querySelector(".".concat(F.popup," > .").concat(F.input))}},xe=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},Ae=function(e,t,n){e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((function(t){Array.isArray(e)?e.forEach((function(e){n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},Re=function(e,t){Ae(e,t,!0)},Ce=function(e,t){Ae(e,t,!1)},Pe=function(e,t){for(var n=Array.from(e.children),i=0;i<n.length;i++){var r=n[i];if(r instanceof HTMLElement&&we(r,t))return r}},Le=function(e,t,n){n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?"".concat(n,"px"):n):e.style.removeProperty(t)},Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},ke=function(e){e&&(e.style.display="none")},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((function(){Ne(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},Oe=function(e,t,n,i){var r=e.querySelector(t);r&&r.style.setProperty(n,i)},Ne=function(e,t){t?Me(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ke(e)},Fe=function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},De=function(){return!Fe(se())&&!Fe(le())&&!Fe(ae())},Be=function(e){return!!(e.scrollHeight>e.clientHeight)},Ue=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),i=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||i>0},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=fe();n&&Fe(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((function(){n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"}),10))},Ge=function(){var e=fe();if(e){var t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";var n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width="".concat(n,"%")}},je=function(){return"undefined"===typeof window||"undefined"===typeof document},Ve='\n <div aria-labelledby="'.concat(F.title,'" aria-describedby="').concat(F["html-container"],'" class="').concat(F.popup,'" tabindex="-1">\n   <button type="button" class="').concat(F.close,'"></button>\n   <ul class="').concat(F["progress-steps"],'"></ul>\n   <div class="').concat(F.icon,'"></div>\n   <img class="').concat(F.image,'" />\n   <h2 class="').concat(F.title,'" id="').concat(F.title,'"></h2>\n   <div class="').concat(F["html-container"],'" id="').concat(F["html-container"],'"></div>\n   <input class="').concat(F.input,'" id="').concat(F.input,'" />\n   <input type="file" class="').concat(F.file,'" />\n   <div class="').concat(F.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(F.select,'" id="').concat(F.select,'"></select>\n   <div class="').concat(F.radio,'"></div>\n   <label class="').concat(F.checkbox,'">\n     <input type="checkbox" id="').concat(F.checkbox,'" />\n     <span class="').concat(F.label,'"></span>\n   </label>\n   <textarea class="').concat(F.textarea,'" id="').concat(F.textarea,'"></textarea>\n   <div class="').concat(F["validation-message"],'" id="').concat(F["validation-message"],'"></div>\n   <div class="').concat(F.actions,'">\n     <div class="').concat(F.loader,'"></div>\n     <button type="button" class="').concat(F.confirm,'"></button>\n     <button type="button" class="').concat(F.deny,'"></button>\n     <button type="button" class="').concat(F.cancel,'"></button>\n   </div>\n   <div class="').concat(F.footer,'"></div>\n   <div class="').concat(F["timer-progress-bar-container"],'">\n     <div class="').concat(F["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),We=function(){var e=q();return!!e&&(e.remove(),Ce([document.documentElement,document.body],[F["no-backdrop"],F["toast-shown"],F["has-column"]]),!0)},He=function(){k.currentInstance.resetValidationMessage()},Xe=function(){var e=$(),t=Pe(e,F.input),n=Pe(e,F.file),i=e.querySelector(".".concat(F.range," input")),r=e.querySelector(".".concat(F.range," output")),o=Pe(e,F.select),s=e.querySelector(".".concat(F.checkbox," input")),a=Pe(e,F.textarea);t.oninput=He,n.onchange=He,o.onchange=He,s.onchange=He,a.oninput=He,i.oninput=function(){He(),r.value=i.value},i.onchange=function(){He(),r.value=i.value}},Ke=function(e){return"string"===typeof e?document.querySelector(e):e},Ye=function(e){var t=$();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},qe=function(e){"rtl"===window.getComputedStyle(e).direction&&Re(q(),F.rtl)},Ze=function(e){var t=We();if(je())G("SweetAlert2 requires document to initialize");else{var n=document.createElement("div");n.className=F.container,t&&Re(n,F["no-transition"]),be(n,Ve);var i=Ke(e.target);i.appendChild(n),Ye(e),qe(i),Xe()}},Qe=function(e,t){e instanceof HTMLElement?t.appendChild(e):"object"===c(e)?$e(e,t):e&&be(t,e)},$e=function(e,t){e.jquery?Je(t,e):be(t,e.toString())},Je=function(e,t){if(e.textContent="",0 in t)for(var n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},et=function(){if(je())return!1;var e=document.createElement("div");return"undefined"!==typeof e.style.webkitAnimation?"webkitAnimationEnd":"undefined"!==typeof e.style.animation&&"animationend"}(),tt=function(e,t){var n=de(),i=ue();n&&i&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?Me(n):ke(n),Se(n,t,"actions"),nt(n,i,t),be(i,t.loaderHtml||""),Se(i,t,"loader"))};function nt(e,t,n){var i=se(),r=le(),o=ae();i&&r&&o&&(rt(i,"confirm",n),rt(r,"deny",n),rt(o,"cancel",n),it(i,r,o,n),n.reverseButtons&&(n.toast?(e.insertBefore(o,i),e.insertBefore(r,i)):(e.insertBefore(o,t),e.insertBefore(r,t),e.insertBefore(i,t))))}function it(e,t,n,i){i.buttonsStyling?(Re([e,t,n],F.styled),i.confirmButtonColor&&(e.style.backgroundColor=i.confirmButtonColor,Re(e,F["default-outline"])),i.denyButtonColor&&(t.style.backgroundColor=i.denyButtonColor,Re(t,F["default-outline"])),i.cancelButtonColor&&(n.style.backgroundColor=i.cancelButtonColor,Re(n,F["default-outline"]))):Ce([e,t,n],F.styled)}function rt(e,t,n){var i=U(t);Ne(e,n["show".concat(i,"Button")],"inline-block"),be(e,n["".concat(t,"ButtonText")]||""),e.setAttribute("aria-label",n["".concat(t,"ButtonAriaLabel")]||""),e.className=F[t],Se(e,n,"".concat(t,"Button"))}var ot=function(e,t){var n=pe();n&&(be(n,t.closeButtonHtml||""),Se(n,t,"closeButton"),Ne(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},st=function(e,t){var n=q();n&&(at(n,t.backdrop),lt(n,t.position),ct(n,t.grow),Se(n,t,"container"))};function at(e,t){"string"===typeof t?e.style.background=t:t||Re([document.documentElement,document.body],F["no-backdrop"])}function lt(e,t){t&&(t in F?Re(e,F[t]):(z('The "position" parameter is not valid, defaulting to "center"'),Re(e,F.center)))}function ct(e,t){t&&Re(e,F["grow-".concat(t)])}var ut={innerParams:new WeakMap,domCache:new WeakMap},dt=["input","file","range","select","radio","checkbox","textarea"],ht=function(e,t){var n=$();if(n){var i=ut.innerParams.get(e),r=!i||t.input!==i.input;dt.forEach((function(e){var i=Pe(n,F[e]);i&&(gt(e,t.inputAttributes),i.className=F[e],r&&ke(i))})),t.input&&(r&&ft(t),mt(t))}},ft=function(e){if(e.input)if(wt[e.input]){var t=yt(e.input),n=wt[e.input](t,e);Me(t),e.inputAutoFocus&&setTimeout((function(){xe(n)}))}else G("Unexpected type of input! Expected ".concat(Object.keys(wt).join(" | "),', got "').concat(e.input,'"'))},pt=function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},gt=function(e,t){var n=Te($(),e);if(n)for(var i in pt(n),t)n.setAttribute(i,t[i])},mt=function(e){var t=yt(e.input);"object"===c(e.customClass)&&Re(t,e.customClass.input)},_t=function(e,t){e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},vt=function(e,t,n){if(n.inputLabel){var i=document.createElement("label"),r=F["input-label"];i.setAttribute("for",e.id),i.className=r,"object"===c(n.customClass)&&Re(i,n.customClass.inputLabel),i.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",i)}},yt=function(e){return Pe($(),F[e]||F.input)},bt=function(e,t){["string","number"].includes(c(t))?e.value="".concat(t):Y(t)||z('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(c(t),'"'))},wt={};wt.text=wt.email=wt.password=wt.number=wt.tel=wt.url=wt.search=wt.date=wt["datetime-local"]=wt.time=wt.week=wt.month=function(e,t){return bt(e,t.inputValue),vt(e,e,t),_t(e,t),e.type=t.input,e},wt.file=function(e,t){return vt(e,e,t),_t(e,t),e},wt.range=function(e,t){var n=e.querySelector("input"),i=e.querySelector("output");return bt(n,t.inputValue),n.type=t.input,bt(i,t.inputValue),vt(n,e,t),e},wt.select=function(e,t){if(e.textContent="",t.inputPlaceholder){var n=document.createElement("option");be(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return vt(e,e,t),e},wt.radio=function(e){return e.textContent="",e},wt.checkbox=function(e,t){var n=Te($(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);var i=e.querySelector("span");return be(i,t.inputPlaceholder),n},wt.textarea=function(e,t){bt(e,t.inputValue),_t(e,t),vt(e,e,t);var n=function(e){return parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight)};return setTimeout((function(){if("MutationObserver"in window){var i=parseInt(window.getComputedStyle($()).width);new MutationObserver((function(){if(document.body.contains(e)){var r=e.offsetWidth+n(e);r>i?$().style.width="".concat(r,"px"):Le($(),"width",t.width)}})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};var Et=function(e,t){var n=ne();n&&(Ie(n),Se(n,t,"htmlContainer"),t.html?(Qe(t.html,n),Me(n,"block")):t.text?(n.textContent=t.text,Me(n,"block")):ke(n),ht(e,t))},St=function(e,t){var n=he();n&&(Ie(n),Ne(n,t.footer,"block"),t.footer&&Qe(t.footer,n),Se(n,t,"footer"))},Tt=function(e,t){var n=ut.innerParams.get(e),i=J();if(i){if(n&&t.icon===n.icon)return Pt(i,t),void xt(i,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(D).indexOf(t.icon))return G('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),void ke(i);Me(i),Pt(i,t),xt(i,t),Re(i,t.showClass&&t.showClass.icon)}else ke(i)}},xt=function(e,t){for(var n=0,i=Object.entries(D);n<i.length;n++){var r=b(i[n],2),o=r[0],s=r[1];t.icon!==o&&Ce(e,s)}Re(e,t.icon&&D[t.icon]),Lt(e,t),At(),Se(e,t,"icon")},At=function(){var e=$();if(e)for(var t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),i=0;i<n.length;i++)n[i].style.backgroundColor=t},Rt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Ct='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',Pt=function(e,t){if(t.icon||t.iconHtml){var n=e.innerHTML,i="";t.iconHtml?i=Mt(t.iconHtml):"success"===t.icon?(i=Rt,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?i=Ct:t.icon&&(i=Mt({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==i.trim()&&be(e,i)}},Lt=function(e,t){if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(var n=0,i=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];n<i.length;n++){var r=i[n];Oe(e,r,"background-color",t.iconColor)}Oe(e,".swal2-success-ring","border-color",t.iconColor)}},Mt=function(e){return'<div class="'.concat(F["icon-content"],'">').concat(e,"</div>")},kt=function(e,t){var n=ie();n&&(t.imageUrl?(Me(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),Le(n,"width",t.imageWidth),Le(n,"height",t.imageHeight),n.className=F.image,Se(n,t,"image")):ke(n))},It=function(e,t){var n=q(),i=$();if(n&&i){if(t.toast){Le(n,"width",t.width),i.style.width="100%";var r=ue();r&&i.insertBefore(r,J())}else Le(i,"width",t.width);Le(i,"padding",t.padding),t.color&&(i.style.color=t.color),t.background&&(i.style.background=t.background),ke(oe()),Ot(i,t)}},Ot=function(e,t){var n=t.showClass||{};e.className="".concat(F.popup," ").concat(Fe(e)?n.popup:""),t.toast?(Re([document.documentElement,document.body],F["toast-shown"]),Re(e,F.toast)):Re(e,F.modal),Se(e,t,"popup"),"string"===typeof t.customClass&&Re(e,t.customClass),t.icon&&Re(e,F["icon-".concat(t.icon)])},Nt=function(e,t){var n=re();if(n){var i=t.progressSteps,r=t.currentProgressStep;i&&0!==i.length&&void 0!==r?(Me(n),n.textContent="",r>=i.length&&z("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((function(e,o){var s=Ft(e);if(n.appendChild(s),o===r&&Re(s,F["active-progress-step"]),o!==i.length-1){var a=Dt(t);n.appendChild(a)}}))):ke(n)}},Ft=function(e){var t=document.createElement("li");return Re(t,F["progress-step"]),be(t,e),t},Dt=function(e){var t=document.createElement("li");return Re(t,F["progress-step-line"]),e.progressStepsDistance&&Le(t,"width",e.progressStepsDistance),t},Bt=function(e,t){var n=te();n&&(Ie(n),Ne(n,t.title||t.titleText,"block"),t.title&&Qe(t.title,n),t.titleText&&(n.innerText=t.titleText),Se(n,t,"title"))},Ut=function(e,t){It(e,t),st(e,t),Nt(e,t),Tt(e,t),kt(e,t),Bt(e,t),ot(e,t),Et(e,t),tt(e,t),St(e,t);var n=$();"function"===typeof t.didRender&&n&&t.didRender(n)},zt=function(){return Fe($())},Gt=function(){var e;return null===(e=se())||void 0===e?void 0:e.click()},jt=function(){var e;return null===(e=le())||void 0===e?void 0:e.click()},Vt=function(){var e;return null===(e=ae())||void 0===e?void 0:e.click()},Wt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ht=function(e){e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Xt=function(e,t,n){Ht(e),t.toast||(e.keydownHandler=function(e){return Zt(t,e,n)},e.keydownTarget=t.keydownListenerCapture?window:$(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Kt=function(e,t){var n,i=me();if(i.length)return(e+=t)===i.length?e=0:-1===e&&(e=i.length-1),void i[e].focus();null===(n=$())||void 0===n||n.focus()},Yt=["ArrowRight","ArrowDown"],qt=["ArrowLeft","ArrowUp"],Zt=function(e,t,n){e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Qt(t,e):"Tab"===t.key?$t(t):[].concat(Yt,qt).includes(t.key)?Jt(t.key):"Escape"===t.key&&en(t,e,n)))},Qt=function(e,t){if(H(t.allowEnterKey)){var n=Te($(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Gt(),e.preventDefault()}}},$t=function(e){for(var t=e.target,n=me(),i=-1,r=0;r<n.length;r++)if(t===n[r]){i=r;break}e.shiftKey?Kt(i,-1):Kt(i,1),e.stopPropagation(),e.preventDefault()},Jt=function(e){var t=de(),n=se(),i=le(),r=ae();if(t&&n&&i&&r){var o=[n,i,r];if(!(document.activeElement instanceof HTMLElement)||o.includes(document.activeElement)){var s=Yt.includes(e)?"nextElementSibling":"previousElementSibling",a=document.activeElement;if(a){for(var l=0;l<t.children.length;l++){if(!(a=a[s]))return;if(a instanceof HTMLButtonElement&&Fe(a))break}a instanceof HTMLButtonElement&&a.focus()}}}},en=function(e,t,n){H(t.allowEscapeKey)&&(e.preventDefault(),n(Wt.esc))},tn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},nn=function(){var e=q();Array.from(document.body.children).forEach((function(t){t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))},rn=function(){Array.from(document.body.children).forEach((function(e){e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},on="undefined"!==typeof window&&!!window.GestureEvent,sn=function(){if(on&&!we(document.body,F.iosfix)){var e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),Re(document.body,F.iosfix),an()}},an=function(){var e,t=q();t&&(t.ontouchstart=function(t){e=ln(t)},t.ontouchmove=function(t){e&&(t.preventDefault(),t.stopPropagation())})},ln=function(e){var t=e.target,n=q(),i=ne();return!(!n||!i)&&!cn(e)&&!un(e)&&(t===n||!Be(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!Be(i)||!i.contains(t)))},cn=function(e){return e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType},un=function(e){return e.touches&&e.touches.length>1},dn=function(){if(we(document.body,F.iosfix)){var e=parseInt(document.body.style.top,10);Ce(document.body,F.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},hn=function(){var e=document.createElement("div");e.className=F["scrollbar-measure"],document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},fn=null,pn=function(e){null===fn&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(fn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(fn+hn(),"px"))},gn=function(){null!==fn&&(document.body.style.paddingRight="".concat(fn,"px"),fn=null)};function mn(e,t,n,i){ve()?xn(e,i):(O(n).then((function(){return xn(e,i)})),Ht(k)),on?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),_e()&&(gn(),dn(),rn()),_n()}function _n(){Ce([document.documentElement,document.body],[F.shown,F["height-auto"],F["no-backdrop"],F["toast-shown"]])}function vn(e){e=En(e);var t=tn.swalPromiseResolve.get(this),n=yn(this);this.isAwaitingPromise?e.isDismissed||(wn(this),t(e)):n&&t(e)}var yn=function(e){var t=$();if(!t)return!1;var n=ut.innerParams.get(e);if(!n||we(t,n.hideClass.popup))return!1;Ce(t,n.showClass.popup),Re(t,n.hideClass.popup);var i=q();return Ce(i,n.showClass.backdrop),Re(i,n.hideClass.backdrop),Sn(e,t,n),!0};function bn(e){var t=tn.swalPromiseReject.get(this);wn(this),t&&t(e)}var wn=function(e){e.isAwaitingPromise&&(delete e.isAwaitingPromise,ut.innerParams.get(e)||e._destroy())},En=function(e){return"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e)},Sn=function(e,t,n){var i=q(),r=et&&Ue(t);"function"===typeof n.willClose&&n.willClose(t),r?Tn(e,t,i,n.returnFocus,n.didClose):mn(e,i,n.returnFocus,n.didClose)},Tn=function(e,t,n,i,r){et&&(k.swalCloseEventFinishedCallback=mn.bind(null,e,n,i,r),t.addEventListener(et,(function(e){e.target===t&&(k.swalCloseEventFinishedCallback(),delete k.swalCloseEventFinishedCallback)})))},xn=function(e,t){setTimeout((function(){"function"===typeof t&&t.bind(e.params)(),e._destroy&&e._destroy()}))},An=function(e){var t=$();if(t||new Rr,t=$()){var n=ue();ve()?ke(J()):Rn(t,e),Me(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()}},Rn=function(e,t){var n=de(),i=ue();n&&i&&(!t&&Fe(se())&&(t=se()),Me(n),t&&(ke(t),i.setAttribute("data-button-to-replace",t.className),n.insertBefore(i,t)),Re([e,n],F.loading))},Cn=function(e,t){"select"===t.input||"radio"===t.input?In(e,t):["text","email","number","tel","textarea"].some((function(e){return e===t.input}))&&(X(t.inputValue)||Y(t.inputValue))&&(An(se()),On(e,t))},Pn=function(e,t){var n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return Ln(n);case"radio":return Mn(n);case"file":return kn(n);default:return t.inputAutoTrim?n.value.trim():n.value}},Ln=function(e){return e.checked?1:0},Mn=function(e){return e.checked?e.value:null},kn=function(e){return e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null},In=function(e,t){var n=$();if(n){var i=function(e){"select"===t.input?Nn(n,Dn(e),t):"radio"===t.input&&Fn(n,Dn(e),t)};X(t.inputOptions)||Y(t.inputOptions)?(An(se()),K(t.inputOptions).then((function(t){e.hideLoading(),i(t)}))):"object"===c(t.inputOptions)?i(t.inputOptions):G("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(c(t.inputOptions)))}},On=function(e,t){var n=e.getInput();n&&(ke(n),K(t.inputValue).then((function(i){n.value="number"===t.input?"".concat(parseFloat(i)||0):"".concat(i),Me(n),n.focus(),e.hideLoading()})).catch((function(t){G("Error in inputValue promise: ".concat(t)),n.value="",Me(n),n.focus(),e.hideLoading()})))};function Nn(e,t,n){var i=Pe(e,F.select);if(i){var r=function(e,t,i){var r=document.createElement("option");r.value=i,be(r,t),r.selected=Bn(i,n.inputValue),e.appendChild(r)};t.forEach((function(e){var t=e[0],n=e[1];if(Array.isArray(n)){var o=document.createElement("optgroup");o.label=t,o.disabled=!1,i.appendChild(o),n.forEach((function(e){return r(o,e[1],e[0])}))}else r(i,n,t)})),i.focus()}}function Fn(e,t,n){var i=Pe(e,F.radio);if(i){t.forEach((function(e){var t=e[0],r=e[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=F.radio,o.value=t,Bn(t,n.inputValue)&&(o.checked=!0);var a=document.createElement("span");be(a,r),a.className=F.label,s.appendChild(o),s.appendChild(a),i.appendChild(s)}));var r=i.querySelectorAll("input");r.length&&r[0].focus()}}var Dn=function e(t){var n=[];return t instanceof Map?t.forEach((function(t,i){var r=t;"object"===c(r)&&(r=e(r)),n.push([i,r])})):Object.keys(t).forEach((function(i){var r=t[i];"object"===c(r)&&(r=e(r)),n.push([i,r])})),n},Bn=function(e,t){return!!t&&t.toString()===e.toString()},Un=void 0,zn=function(e){var t=ut.innerParams.get(e);e.disableButtons(),t.input?Vn(e,"confirm"):Yn(e,!0)},Gn=function(e){var t=ut.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Vn(e,"deny"):Hn(e,!1)},jn=function(e,t){e.disableButtons(),t(Wt.cancel)},Vn=function(e,t){var n=ut.innerParams.get(e);if(n.input){var i=e.getInput(),r=Pn(e,n);n.inputValidator?Wn(e,r,t):i&&!i.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||i.validationMessage)):"deny"===t?Hn(e,r):Yn(e,r)}else G('The "input" parameter is needed to be set when using returnInputValueOn'.concat(U(t)))},Wn=function(e,t,n){var i=ut.innerParams.get(e);e.disableInput(),Promise.resolve().then((function(){return K(i.inputValidator(t,i.validationMessage))})).then((function(i){e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):"deny"===n?Hn(e,t):Yn(e,t)}))},Hn=function(e,t){var n=ut.innerParams.get(e||Un);n.showLoaderOnDeny&&An(le()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((function(){return K(n.preDeny(t,n.validationMessage))})).then((function(n){!1===n?(e.hideLoading(),wn(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((function(t){return Kn(e||Un,t)}))):e.close({isDenied:!0,value:t})},Xn=function(e,t){e.close({isConfirmed:!0,value:t})},Kn=function(e,t){e.rejectPromise(t)},Yn=function(e,t){var n=ut.innerParams.get(e||Un);n.showLoaderOnConfirm&&An(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((function(){return K(n.preConfirm(t,n.validationMessage))})).then((function(n){Fe(oe())||!1===n?(e.hideLoading(),wn(e)):Xn(e,"undefined"===typeof n?t:n)})).catch((function(t){return Kn(e||Un,t)}))):Xn(e,t)};function qn(){var e=ut.innerParams.get(this);if(e){var t=ut.domCache.get(this);ke(t.loader),ve()?e.icon&&Me(J()):Zn(t),Ce([t.popup,t.actions],F.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}}var Zn=function(e){var t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Me(t[0],"inline-block"):De()&&ke(e.actions)};function Qn(){var e=ut.innerParams.get(this),t=ut.domCache.get(this);return t?Te(t.popup,e.input):null}function $n(e,t,n){var i=ut.domCache.get(e);t.forEach((function(e){i[e].disabled=n}))}function Jn(e,t){var n=$();if(n&&e)if("radio"===e.type)for(var i=n.querySelectorAll('[name="'.concat(F.radio,'"]')),r=0;r<i.length;r++)i[r].disabled=t;else e.disabled=t}function ei(){$n(this,["confirmButton","denyButton","cancelButton"],!1)}function ti(){$n(this,["confirmButton","denyButton","cancelButton"],!0)}function ni(){Jn(this.getInput(),!1)}function ii(){Jn(this.getInput(),!0)}function ri(e){var t=ut.domCache.get(this),n=ut.innerParams.get(this);be(t.validationMessage,e),t.validationMessage.className=F["validation-message"],n.customClass&&n.customClass.validationMessage&&Re(t.validationMessage,n.customClass.validationMessage),Me(t.validationMessage);var i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",F["validation-message"]),xe(i),Re(i,F.inputerror))}function oi(){var e=ut.domCache.get(this);e.validationMessage&&ke(e.validationMessage);var t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ce(t,F.inputerror))}var si={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ai=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],li={},ci=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ui=function(e){return Object.prototype.hasOwnProperty.call(si,e)},di=function(e){return-1!==ai.indexOf(e)},hi=function(e){return li[e]},fi=function(e){ui(e)||z('Unknown parameter "'.concat(e,'"'))},pi=function(e){ci.includes(e)&&z('The parameter "'.concat(e,'" is incompatible with toasts'))},gi=function(e){var t=hi(e);t&&W(e,t)},mi=function(e){for(var t in!1===e.backdrop&&e.allowOutsideClick&&z('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e)fi(t),e.toast&&pi(t),gi(t)};function _i(e){var t=$(),n=ut.innerParams.get(this);if(t&&!we(t,n.hideClass.popup)){var i=vi(e),r=Object.assign({},n,i);Ut(this,r),ut.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}else z("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var vi=function(e){var t={};return Object.keys(e).forEach((function(n){di(n)?t[n]=e[n]:z("Invalid parameter to update: ".concat(n))})),t};function yi(){var e=ut.domCache.get(this),t=ut.innerParams.get(this);t?(e.popup&&k.swalCloseEventFinishedCallback&&(k.swalCloseEventFinishedCallback(),delete k.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),bi(this)):wi(this)}var bi=function(e){wi(e),delete e.params,delete k.keydownHandler,delete k.keydownTarget,delete k.currentInstance},wi=function(e){e.isAwaitingPromise?(Ei(ut,e),e.isAwaitingPromise=!0):(Ei(tn,e),Ei(ut,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Ei=function(e,t){for(var n in e)e[n].delete(t)},Si=Object.freeze({__proto__:null,_destroy:yi,close:vn,closeModal:vn,closePopup:vn,closeToast:vn,disableButtons:ti,disableInput:ii,disableLoading:qn,enableButtons:ei,enableInput:ni,getInput:Qn,handleAwaitingPromise:wn,hideLoading:qn,rejectPromise:bn,resetValidationMessage:oi,showValidationMessage:ri,update:_i}),Ti=function(e,t,n){e.toast?xi(e,t,n):(Ci(t),Pi(t),Li(e,t,n))},xi=function(e,t,n){t.popup.onclick=function(){e&&(Ai(e)||e.timer||e.input)||n(Wt.close)}},Ai=function(e){return!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton)},Ri=!1,Ci=function(e){e.popup.onmousedown=function(){e.container.onmouseup=function(t){e.container.onmouseup=function(){},t.target===e.container&&(Ri=!0)}}},Pi=function(e){e.container.onmousedown=function(t){t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=function(){},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(Ri=!0)}}},Li=function(e,t,n){t.container.onclick=function(i){Ri?Ri=!1:i.target===t.container&&H(e.allowOutsideClick)&&n(Wt.backdrop)}},Mi=function(e){return"object"===c(e)&&e.jquery},ki=function(e){return e instanceof Element||Mi(e)},Ii=function(e){var t={};return"object"!==c(e[0])||ki(e[0])?["title","html","icon"].forEach((function(n,i){var r=e[i];"string"===typeof r||ki(r)?t[n]=r:void 0!==r&&G("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(c(r)))})):Object.assign(t,e[0]),t};function Oi(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(e,n)}function Ni(e){var n=function(n){function i(){return u(this,i),t(this,i,arguments)}return f(i,n),h(i,[{key:"_main",value:function(t,n){return y(p(i.prototype),"_main",this).call(this,t,Object.assign({},e,n))}}])}(this);return n}var Fi=function(){return k.timeout&&k.timeout.getTimerLeft()},Di=function(){if(k.timeout)return Ge(),k.timeout.stop()},Bi=function(){if(k.timeout){var e=k.timeout.start();return ze(e),e}},Ui=function(){var e=k.timeout;return e&&(e.running?Di():Bi())},zi=function(e){if(k.timeout){var t=k.timeout.increase(e);return ze(t,!0),t}},Gi=function(){return!(!k.timeout||!k.timeout.isRunning())},ji=!1,Vi={};function Wi(){Vi[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,ji||(document.body.addEventListener("click",Xi),ji=!0)}var Hi,Xi=function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)for(var n in Vi){var i=t.getAttribute(n);if(i)return void Vi[n].fire({template:i})}},Ki=Object.freeze({__proto__:null,argsToParams:Ii,bindClickHandler:Wi,clickCancel:Vt,clickConfirm:Gt,clickDeny:jt,enableLoading:An,fire:Oi,getActions:de,getCancelButton:ae,getCloseButton:pe,getConfirmButton:se,getContainer:q,getDenyButton:le,getFocusableElements:me,getFooter:he,getHtmlContainer:ne,getIcon:J,getIconContent:ee,getImage:ie,getInputLabel:ce,getLoader:ue,getPopup:$,getProgressSteps:re,getTimerLeft:Fi,getTimerProgressBar:fe,getTitle:te,getValidationMessage:oe,increaseTimer:zi,isDeprecatedParameter:hi,isLoading:ye,isTimerRunning:Gi,isUpdatableParameter:di,isValidParameter:ui,isVisible:zt,mixin:Ni,resumeTimer:Bi,showLoading:An,stopTimer:Di,toggleTimer:Ui}),Yi=function(){function e(t,n){u(this,e),this.callback=t,this.remaining=n,this.running=!1,this.start()}return h(e,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(e){var t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),qi=["swal-title","swal-html","swal-footer"],Zi=function(e){var t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};var n=t.content;return rr(n),Object.assign(Qi(n),$i(n),Ji(n),er(n),tr(n),nr(n),ir(n,qi))},Qi=function(e){var t={};return Array.from(e.querySelectorAll("swal-param")).forEach((function(e){or(e,["name","value"]);var n=e.getAttribute("name"),i=e.getAttribute("value");"boolean"===typeof si[n]?t[n]="false"!==i:"object"===c(si[n])?t[n]=JSON.parse(i):t[n]=i})),t},$i=function(e){var t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((function(e){var n=e.getAttribute("name"),i=e.getAttribute("value");t[n]=new Function("return ".concat(i))()})),t},Ji=function(e){var t={};return Array.from(e.querySelectorAll("swal-button")).forEach((function(e){or(e,["type","color","aria-label"]);var n=e.getAttribute("type");t["".concat(n,"ButtonText")]=e.innerHTML,t["show".concat(U(n),"Button")]=!0,e.hasAttribute("color")&&(t["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label"))})),t},er=function(e){var t={},n=e.querySelector("swal-image");return n&&(or(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t},tr=function(e){var t={},n=e.querySelector("swal-icon");return n&&(or(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},nr=function(e){var t={},n=e.querySelector("swal-input");n&&(or(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));var i=Array.from(e.querySelectorAll("swal-input-option"));return i.length&&(t.inputOptions={},i.forEach((function(e){or(e,["value"]);var n=e.getAttribute("value"),i=e.innerHTML;t.inputOptions[n]=i}))),t},ir=function(e,t){var n={};for(var i in t){var r=t[i],o=e.querySelector(r);o&&(or(o,[]),n[r.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},rr=function(e){var t=qi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((function(e){var n=e.tagName.toLowerCase();t.includes(n)||z("Unrecognized element <".concat(n,">"))}))},or=function(e,t){Array.from(e.attributes).forEach((function(n){-1===t.indexOf(n.name)&&z(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])}))},sr=10,ar=function(e){var t=q(),n=$();"function"===typeof e.willOpen&&e.willOpen(n);var i=window.getComputedStyle(document.body).overflowY;dr(t,n,e),setTimeout((function(){cr(t,n)}),sr),_e()&&(ur(t,e.scrollbarPadding,i),nn()),ve()||k.previousActiveElement||(k.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((function(){return e.didOpen(n)})),Ce(t,F["no-transition"])},lr=function e(t){var n=$();if(t.target===n&&et){var i=q();n.removeEventListener(et,e),i.style.overflowY="auto"}},cr=function(e,t){et&&Ue(t)?(e.style.overflowY="hidden",t.addEventListener(et,lr)):e.style.overflowY="auto"},ur=function(e,t,n){sn(),t&&"hidden"!==n&&pn(n),setTimeout((function(){e.scrollTop=0}))},dr=function(e,t,n){Re(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),Me(t,"grid"),setTimeout((function(){Re(t,n.showClass.popup),t.style.removeProperty("opacity")}),sr)):Me(t,"grid"),Re([document.documentElement,document.body],F.shown),n.heightAuto&&n.backdrop&&!n.toast&&Re([document.documentElement,document.body],F["height-auto"])},hr={email:function(e,t){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address")},url:function(e,t){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")}};function fr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=hr.email),"url"===e.input&&(e.inputValidator=hr.url))}function pr(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(z('Target parameter is not valid, defaulting to "body"'),e.target="body")}function gr(e){fr(e),e.showLoaderOnConfirm&&!e.preConfirm&&z("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),pr(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ze(e)}var mr=new WeakMap,_r=function(){function e(){if(u(this,e),L(this,mr,void 0),"undefined"!==typeof window){Hi=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=Object.freeze(this.constructor.argsToParams(n));this.params=o,this.isAwaitingPromise=!1,i(mr,this,this._main(Hi.params))}}return h(e,[{key:"_main",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(mi(Object.assign({},t,e)),k.currentInstance){var n=tn.swalPromiseResolve.get(k.currentInstance),i=k.currentInstance.isAwaitingPromise;k.currentInstance._destroy(),i||n({isDismissed:!0}),_e()&&rn()}k.currentInstance=Hi;var r=yr(e,t);gr(r),Object.freeze(r),k.timeout&&(k.timeout.stop(),delete k.timeout),clearTimeout(k.restoreFocusTimeout);var o=br(Hi);return Ut(Hi,r),ut.innerParams.set(Hi,r),vr(Hi,o,r)}},{key:"then",value:function(e){return n(mr,this).then(e)}},{key:"finally",value:function(e){return n(mr,this).finally(e)}}])}(),vr=function(e,t,n){return new Promise((function(i,r){var o=function(t){e.close({isDismissed:!0,dismiss:t})};tn.swalPromiseResolve.set(e,i),tn.swalPromiseReject.set(e,r),t.confirmButton.onclick=function(){zn(e)},t.denyButton.onclick=function(){Gn(e)},t.cancelButton.onclick=function(){jn(e,o)},t.closeButton.onclick=function(){o(Wt.close)},Ti(n,t,o),Xt(k,n,o),Cn(e,n),ar(n),wr(k,n,o),Er(t,n),setTimeout((function(){t.container.scrollTop=0}))}))},yr=function(e,t){var n=Zi(e),i=Object.assign({},si,t,n,e);return i.showClass=Object.assign({},si.showClass,i.showClass),i.hideClass=Object.assign({},si.hideClass,i.hideClass),!1===i.animation&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},br=function(e){var t={popup:$(),container:q(),actions:de(),confirmButton:se(),denyButton:le(),cancelButton:ae(),loader:ue(),closeButton:pe(),validationMessage:oe(),progressSteps:re()};return ut.domCache.set(e,t),t},wr=function(e,t,n){var i=fe();ke(i),t.timer&&(e.timeout=new Yi((function(){n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(Me(i),Se(i,t,"timerProgressBar"),setTimeout((function(){e.timeout&&e.timeout.running&&ze(t.timer)}))))},Er=function(e,t){t.toast||(H(t.allowEnterKey)?Sr(e,t)||Kt(-1,1):Tr())},Sr=function(e,t){return t.focusDeny&&Fe(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Fe(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!Fe(e.confirmButton))&&(e.confirmButton.focus(),!0)},Tr=function(){document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var xr=new Date,Ar=localStorage.getItem("swal-initiation");Ar?(xr.getTime()-Date.parse(Ar))/864e5>3&&setTimeout((function(){document.body.style.pointerEvents="none";var e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((function(){e.play().catch((function(){}))}),2500)}),500):localStorage.setItem("swal-initiation","".concat(xr))}_r.prototype.disableButtons=ti,_r.prototype.enableButtons=ei,_r.prototype.getInput=Qn,_r.prototype.disableInput=ii,_r.prototype.enableInput=ni,_r.prototype.hideLoading=qn,_r.prototype.disableLoading=qn,_r.prototype.showValidationMessage=ri,_r.prototype.resetValidationMessage=oi,_r.prototype.close=vn,_r.prototype.closePopup=vn,_r.prototype.closeModal=vn,_r.prototype.closeToast=vn,_r.prototype.rejectPromise=bn,_r.prototype.update=_i,_r.prototype._destroy=yi,Object.assign(_r,Ki),Object.keys(Si).forEach((function(e){_r[e]=function(){var t;return Hi&&Hi[e]?(t=Hi)[e].apply(t,arguments):null}})),_r.DismissReason=Wt,_r.version="11.11.0";var Rr=_r;return Rr.default=Rr,Rr}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{453:"d4daf3b9",879:"bce05ad4"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="localmap:";n.l=(i,r,o,s)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/map-of-ayodhya/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,o,s=i[0],a=i[1],l=i[2],c=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunklocalmap=self.webpackChunklocalmap||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=n(43),t=n(391);n.p;const i=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","id":0,"properties":{"Code":"Janam Bhumi","Name":"Location: Shree Ram Janmabhoomi Mandir","Description":"Description: The Ram Janmabhoomi is believed to have been the birthplace of the Hindu deity, Lord Ram. According to the Indian epic Ramayan, Ram, Lord Vishnu\'s seventh manifestation, is said to have grown up along Ayodhya\'s river Sarayu. Located in the ancient city of Ayodhya, he Ram Janmabhoomi is a highly revered site for Hindu devotees"},"geometry":{"type":"Point","coordinates":[82.19440082879849,26.79576016145209]}},{"type":"Feature","id":1,"properties":{"Code":"Hanuman Garhi","Name":"Location: Shri Hanuman Garhi Mandir","Description":"Description: Hanuman Garhi is a 10th-century temple dedicated to the Hindu God, Hanuman. It is one of the most important temples in Ayodhya as it is customary to visit Hanuman Garhi before visiting the Ram Temple in Ayodhya. It is believed that Lord Hanuman lived at the temple site guarding Ayodhya."},"geometry":{"type":"Point","coordinates":[82.20178121736627,26.795406354477034]}},{"type":"Feature","id":2,"properties":{"Code":"Nageshwar Mandir","Name":"Location: Shri Nageshwar Nath Mandir","Description":"Description: Established in the name of the local deity, Lord Nageshwarnath, the Nageshwarnath Temple is located adjacent to the Theri Bazaar in Ayodhya. It is believed to have been set up by Kush or Kusha, Lord Rama\'s son. Although this sacred site continued to be in good maintenance since 750 AD, the current temple is said to have been reconstructed in 1750 by Safar Jung\'s minister, Naval Rai. Legend has it that Kush came across a Shiva devotee called Naga Kanya when he happened to lose his arm ring in the local bath."},"geometry":{"type":"Point","coordinates":[82.20324336947785,26.808099316144325]}},{"type":"Feature","id":3,"properties":{"Code":"Kanak Bhawan","Name":"Location: Kanak Bhawan","Description":"Description: The Kanak Bhawan is established towards the northeastern corner of the Ram Janmabhoomi in Tulsi Nagar. Constructed in 1891, this temple is also known as Sone-ka-Ghar. It is a holy site dedicated to the Hindu deity Lord Rama and his wife, Goddess Sita. Kanak Bhawan, also meaning Golden Palace, cites three golden-crowned idols of the two gods under a silver roof in the sanctum santorum (Garbagriha). It is believed that this shrine was gifted to Rama and Sita by the former\'s stepmother, Kaikeyi."},"geometry":{"type":"Point","coordinates":[82.1991840333147,26.798074835096653]}},{"type":"Feature","id":4,"properties":{"Code":"Ram Bharat Milap Mandir","Name":"Location: Ram Bharat Milap Mandir","Description":"Description: It is believed that the temple represents the place where Lord Shri Ram reunited with his brothers during the exile period mentioned in the Ramayana. It is also said that Lord Shri Ram\'s brother Bharat stayed here for some time with the army and the royal family."},"geometry":{"type":"Point","coordinates":[82.20096368680306,26.796254490599384]}},{"type":"Feature","id":5,"properties":{"Code":"Dashrath Mahal","Name":"Location: Dashrath Mahal","Description":"Description: This historical site, believed to be the palace of King Dashrath, father of Lord Rama, is steeped in mythological significance. It represents the royal lineage and valorous narratives of the Ramayana, offering a glimpse into the epic\'s grandeur"},"geometry":{"type":"Point","coordinates":[82.19988185771284,26.796701247107304]}},{"type":"Feature","id":6,"properties":{"Code":"Shri Jagannath Mandir","Name":"Location: Shri Jagannath Mandir","Description":"Description: Shri Jagannath Mandir in Ayodhya is a revered Hindu temple dedicated to Lord Jagannath, a form of Lord Vishnu. Known for its spiritual significance and vibrant rituals, the temple attracts devotees from all over India. The architecture is traditional and ornate, featuring intricate carvings and colorful decorations. The temple is a hub of cultural and religious activities, especially during festivals like Rath Yatra, which involves a grand procession of the deities. Situated in the holy city of Ayodhya, the temple enhances the city\'s rich tapestry of religious heritage and offers a serene place for worship and reflection."},"geometry":{"type":"Point","coordinates":[82.19648398054451,26.795489844603754]}},{"type":"Feature","id":7,"properties":{"Code":"Shri Rang Mahal","Name":"Location: Shri Rang Mahal","Description":"Description: Shri Rang Mahal is a revered Hindu temple located in Ayodhya, India. This magnificent structure is dedicated to Lord Ranganatha, a form of the Hindu god Vishnu. Constructed in traditional North Indian architectural style, the temple boasts intricate carvings, vibrant frescoes, and ornate domes, reflecting the rich cultural heritage of the region. Devotees flock to Shri Rang Mahal to seek blessings, immerse themselves in prayer, and experience the spiritual ambiance that permeates its sacred halls. This temple stands as a testament to the enduring faith and devotion of millions of worshippers who continue to cherish its sanctity."},"geometry":{"type":"Point","coordinates":[82.19634583527117,26.795911022212703]}},{"type":"Feature","id":8,"properties":{"Code":"Chhoti Devkali Mandir","Name":"Location: Chhoti Devkali Mandir","Description":"Description: The Chotti Devakali Mandir is said to have been built by King Dashrath for Sita Devi\'s worship of Goddess Devkali. The Ram Charit Manas, a historic poem written by Tulsidas, is regularly recited here in the evenings. Festivals like Ram Navmi, Ram Vivah and Janaki Navami are celebrated by the locals and the pilgrims. On important days such as Ashada Navrada and Ashwin Navratotsav (around June - July), a grand Aarti of 1051 lights is organized where several tourists, pilgrims and locals come to worship and pray to the Goddess."},"geometry":{"type":"Point","coordinates":[82.20535209956053,26.801459134547926]}},{"type":"Feature","id":9,"properties":{"Code":"Shri Kale Ram Temple","Name":"Location: Shri Kale Ram Temple","Description":"Description: Shri Kale Ram Temple is said to be the most important temple in Ayodhya. The temple is widely known in and outside of India as it is the only temple that depicts the idol of Lord Rama along with his brothers Bharata, Lakshmana and Shatrughna. This temple also has idols of Lord Hanuman and Goddess Sita. Visitors can also choose to stay at the guesthouse in the temple premises."},"geometry":{"type":"Point","coordinates":[82.20558721660746,26.80855539032482]}},{"type":"Feature","id":10,"properties":{"Code":" Raj Dwar Mandir","Name":"Location: Raj Dwar Mandir","Description":"Description: The Raj Dwar Hanuman Garhi Temple is situated in Tulsi Nagar, Ayodhya, Uttar Pradesh. The Shikara of this magnificent temple originally was made of pure gold, however, after independence, the Gold was replaced by the government. Although the temple is not as famous as the others situated in the city, there is an annual fair organised by the Temple authorities that sees crowds of over thousands coming to visit the religious place. "},"geometry":{"type":"Point","coordinates":[82.20181683342948,26.79617678728443]}},{"type":"Feature","id":11,"properties":{"Code":" Shree Swaminarayan Mandir","Name":"Location: Shree Swaminarayan Mandir","Description":"Description: Located at the Patrapur Road in Ayodhya, the famous Swaminarayan temple was originally home to Shri Swaminarayan who shifted to Ayodhya from Chhapaiya. The magnificent temple has beautifully carved idols of Radha Krishna Deva and Harikrishna Maharaj. The temple also has two umbrellas commemorating the houses that were removed to make inns. The famous yogi Ghanshyam Maharaj, also known as Shri Swaminarayan, performed various holy rituals in the temple. Even today, many saints and priests perform these rites with the aim to gain infinite power."},"geometry":{"type":"Point","coordinates":[82.20409147487224,26.789099756291513]}},{"type":"Feature","id":12,"properties":{"Code":" Ammaji Mandir","Name":"Location: Ammaji Mandir","Description":"Description: The famous and elegant Ammaji Mandir is one of the 108 Divya Desams of Lord Vishnu. Maintained mainly by Tamils, the temple is famous for hosting the Hevilambi Varusha Pavithrotsavam. This temple along the banks of river Sarayu is over 100 years old. Founded by Sri Yogi Parthasarathy Iyengar, the temple contains scriptures in Hindi, Sanskrit as well as Tamil. After the passing of Sri Yogi, his wife took responsibility for the upkeep of the temple. Owing to her selfless devotion to maintaining the temple and the people, the temple popularly came to be known as Ammaji Temple. "},"geometry":{"type":"Point","coordinates":[82.19955989842563,26.805142177019924]}}]}'),r=e.createContext(null);function o(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const r of n){if(!t.hasOwnProperty(r))return!1;if(!o(e[r],t[r]))return!1}return!0}return!1}function s(e,t){if(!e.getProjection)return;const n=e.getProjection();o(n,t.getProjection())||t.setProjection(n)}function a(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function l(e,t){const n=t.viewState||t;let i=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),i=i||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,i=i||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,i=i||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,i=i||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),i}const c=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function u(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const i of e.layers)t[i.id]=i;const n=e.layers.map((e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);const i=t[e.ref];if(i){n=n||Object.assign({},e),delete n.ref;for(const e of c)e in i&&(n[e]=i[e])}return n||e}));return{...e,layers:n}}const d={version:8,sources:{},layers:[]},h={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},f={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},p={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},g=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],m=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class _{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[p[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[h[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[f[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const i=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||i||r&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=_.savedMaps.pop();if(!n)return null;const i=n.map,r=i.getContainer();for(t.className=r.className;r.childNodes.length>0;)t.appendChild(r.childNodes[0]);i._container=t;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(t)),n.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):n._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(()=>i.fire("load"))),i._update(),n}_initialize(e){const{props:t}=this,{mapStyle:n=d}=t,i={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||v()||null,container:e,style:u(n)},r=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const o=new this._MapClass(i);r.padding&&o.setPadding(r.padding),t.cursor&&(o.getCanvas().style.cursor=t.cursor),this._createShadowTransform(o);const a=o._render;o._render=e=>{this._inRender=!0,a.call(o,e),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=e=>{l.call(o._renderTaskQueue,e),this._onBeforeRepaint()},o.on("render",(()=>this._onAfterRepaint()));const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",(()=>{this._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),s(o.transform,this._renderTransform)})),o.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const s in h)o.on(s,this._onPointerEvent);for(const s in f)o.on(s,this._onCameraEvent);for(const s in p)o.on(s,this._onEvent);this._map=o}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),_.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:r,pitch:o,bearing:s}=i,c=n.isMoving();c&&(i.cameraElevationReference="sea");const u=l(i,{...a(n.transform),...e});if(c&&(i.cameraElevationReference="ground"),u&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=r!==i.zoom),e.rotate||(e.rotate=s!==i.bearing),e.pitch||(e.pitch=o!==i.pitch)}return c||l(n.transform,e),u}_updateSettings(e,t){const n=this._map;let i=!1;for(const r of g)if(r in e&&!o(e[r],t[r])){i=!0;const t=n["set".concat(r[0].toUpperCase()).concat(r.slice(1))];null===t||void 0===t||t.call(n,e[r])}return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=d,styleDiffing:n=!0}=e,i={diff:n};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(u(t),i),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!o(e.light,t.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!o(e.fog,t.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!o(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(i=!0,n.setTerrain(e.terrain)))),i}_updateHandlers(e,t){var n,i;const r=this._map;let s=!1;for(const a of m){const l=null===(n=e[a])||void 0===n||n;o(l,null===(i=t[a])||void 0===i||i)||(s=!0,l?r[a].enable(l):r[a].disable())}return s}_queryRenderedFeatures(e){const t=this._map,n=t.transform,{interactiveLayerIds:i=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:i.filter(t.getLayer.bind(t))})}catch(hn){return[]}finally{t.transform=n}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,r=this._queryRenderedFeatures(e.point),o=r.length>0;!o&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=r,o&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const i=this._map,r=i.transform,o="string"===typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in f&&("object"===typeof t&&(t.viewState=a(r)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,n),i.transform=r,i):(e.call(i,t,n),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{s(this._renderTransform,t),e.transform=t}}}function v(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/map-of-ayodhya",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(hn){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/map-of-ayodhya",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(t){}return e}_.savedMaps=[];const y=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function b(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const i=t.transform;t.transform=e.transform;const r=t.project(n);return t.transform=i,r},unproject:n=>{const i=t.transform;t.transform=e.transform;const r=t.unproject(n);return t.transform=i,r},queryTerrainElevation:(n,i)=>{const r=t.transform;t.transform=e.transform;const o=t.queryTerrainElevation(n,i);return t.transform=r,o},queryRenderedFeatures:(n,i)=>{const r=t.transform;t.transform=e.transform;const o=t.queryRenderedFeatures(n,i);return t.transform=r,o}};for(const i of function(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))"_"!==i[0]&&"function"===typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}(t))i in n||y.includes(i)||(n[i]=t[i].bind(t));return n}const w="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,E=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const S=e.createContext(null);function T(t,n,i){const o=(0,e.useContext)(r),[s,a]=(0,e.useState)(null),l=(0,e.useRef)(),{current:c}=(0,e.useRef)({mapLib:null,map:null});(0,e.useEffect)((()=>{const e=t.mapLib;let n,r=!0;return Promise.resolve(e||i).then((e=>{if(!r)return;if(!e)throw new Error("Invalid mapLib");const i="Map"in e?e:e.default;if(!i.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const i of E)i in t&&(e[i]=t[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,(e=>{e&&console.error(e)}),!0)}(i,t),i.supported&&!i.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(n=_.reuse(t,l.current)),n||(n=new _(i.Map,t,l.current)),c.map=b(n),c.mapLib=i,a(n),null===o||void 0===o||o.onMapMount(c.map,t.id)})).catch((e=>{const{onError:n}=t;n?n({type:"error",target:null,originalEvent:null,error:e}):console.error(e)})),()=>{r=!1,n&&(null===o||void 0===o||o.onMapUnmount(t.id),t.reuseMaps?n.recycle():n.destroy())}}),[]),w((()=>{s&&s.setProps(t)})),(0,e.useImperativeHandle)(n,(()=>c.map),[s]);const u=(0,e.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:l,style:u},s&&e.createElement(S.Provider,{value:c},e.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}var x=n(950);const A=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function R(e,t){if(!e||!t)return;const n=e.style;for(const i in t){const e=t[i];Number.isFinite(e)&&!A.test(i)?n[i]="".concat(e,"px"):n[i]=e}}(0,e.memo)((0,e.forwardRef)((function(t,n){const{map:i,mapLib:r}=(0,e.useContext)(S),o=(0,e.useRef)({props:t});o.current.props=t;const s=(0,e.useMemo)((()=>{let n=!1;e.Children.forEach(t.children,(e=>{e&&(n=!0)}));const i={...t,element:n?document.createElement("div"):null},a=new r.Marker(i);return a.setLngLat([t.longitude,t.latitude]),a.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=o.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:a,originalEvent:e})})),a.on("dragstart",(e=>{var t,n;const i=e;i.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragStart)||void 0===n||n.call(t,i)})),a.on("drag",(e=>{var t,n;const i=e;i.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDrag)||void 0===n||n.call(t,i)})),a.on("dragend",(e=>{var t,n;const i=e;i.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragEnd)||void 0===n||n.call(t,i)})),a}),[]);(0,e.useEffect)((()=>(s.addTo(i.getMap()),()=>{s.remove()})),[]);const{longitude:a,latitude:l,offset:c,style:u,draggable:d=!1,popup:h=null,rotation:f=0,rotationAlignment:p="auto",pitchAlignment:g="auto"}=t;return(0,e.useEffect)((()=>{R(s.getElement(),u)}),[u]),(0,e.useImperativeHandle)(n,(()=>s),[]),s.getLngLat().lng===a&&s.getLngLat().lat===l||s.setLngLat([a,l]),c&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===r&&i===o}(s.getOffset(),c)&&s.setOffset(c),s.isDraggable()!==d&&s.setDraggable(d),s.getRotation()!==f&&s.setRotation(f),s.getRotationAlignment()!==p&&s.setRotationAlignment(p),s.getPitchAlignment()!==g&&s.setPitchAlignment(g),s.getPopup()!==h&&s.setPopup(h),(0,x.createPortal)(t.children,s.getElement())})));function C(e){return new Set(e?e.trim().split(/\s+/):[])}(0,e.memo)((0,e.forwardRef)((function(t,n){const{map:i,mapLib:r}=(0,e.useContext)(S),s=(0,e.useMemo)((()=>document.createElement("div")),[]),a=(0,e.useRef)({props:t});a.current.props=t;const l=(0,e.useMemo)((()=>{const e={...t},n=new r.Popup(e);return n.setLngLat([t.longitude,t.latitude]),n.once("open",(e=>{var t,n;null===(n=(t=a.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=a.current.props).onClose)||void 0===n||n.call(t,e)};return l.on("close",e),l.setDOMContent(s).addTo(i.getMap()),()=>{l.off("close",e),l.isOpen()&&l.remove()}}),[]),(0,e.useEffect)((()=>{R(l.getElement(),t.style)}),[t.style]),(0,e.useImperativeHandle)(n,(()=>l),[]),l.isOpen()&&(l.getLngLat().lng===t.longitude&&l.getLngLat().lat===t.latitude||l.setLngLat([t.longitude,t.latitude]),t.offset&&!o(l.options.offset,t.offset)&&l.setOffset(t.offset),l.options.anchor===t.anchor&&l.options.maxWidth===t.maxWidth||(l.options.anchor=t.anchor,l.setMaxWidth(t.maxWidth)),l.options.className!==t.className)){const e=C(l.options.className),n=C(t.className);for(const t of e)n.has(t)||l.removeClassName(t);for(const t of n)e.has(t)||l.addClassName(t);l.options.className=t.className}return(0,x.createPortal)(t.children,s)})));const P=function(t,n,i,r){const o=(0,e.useContext)(S),s=(0,e.useMemo)((()=>t(o)),[]);return(0,e.useEffect)((()=>{const e=r||i||n,t="function"===typeof n&&"function"===typeof i?n:null,a="function"===typeof i?i:"function"===typeof n?n:null,{map:l}=o;return l.hasControl(s)||(l.addControl(s,null===e||void 0===e?void 0:e.position),t&&t(o)),()=>{a&&a(o),l.hasControl(s)&&l.removeControl(s)}}),[]),s};(0,e.memo)((function(t){const n=P((e=>{let{mapLib:n}=e;return new n.AttributionControl(t)}),{position:t.position});return(0,e.useEffect)((()=>{R(n._container,t.style)}),[t.style]),null}));(0,e.memo)((function(t){const n=P((e=>{let{mapLib:n}=e;return new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,e.useEffect)((()=>{R(n._controlContainer,t.style)}),[t.style]),null}));const L=(0,e.memo)((0,e.forwardRef)((function(t,n){const i=(0,e.useRef)({props:t}),r=P((e=>{let{mapLib:n}=e;const r=new n.GeolocateControl(t),o=r._setupUI;return r._setupUI=e=>{r._container.hasChildNodes()||o(e)},r.on("geolocate",(e=>{var t,n;null===(n=(t=i.current.props).onGeolocate)||void 0===n||n.call(t,e)})),r.on("error",(e=>{var t,n;null===(n=(t=i.current.props).onError)||void 0===n||n.call(t,e)})),r.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=i.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),r.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=i.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),r.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=i.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),r}),{position:t.position});return i.current.props=t,(0,e.useImperativeHandle)(n,(()=>r),[]),(0,e.useEffect)((()=>{R(r._container,t.style)}),[t.style]),null})));const M=(0,e.memo)((function(t){const n=P((e=>{let{mapLib:n}=e;return new n.NavigationControl(t)}),{position:t.position});return(0,e.useEffect)((()=>{R(n._container,t.style)}),[t.style]),null}));(0,e.memo)((function(t){const n=P((e=>{let{mapLib:n}=e;return new n.ScaleControl(t)}),{position:t.position}),i=(0,e.useRef)(t),r=i.current;i.current=t;const{style:o}=t;return void 0!==t.maxWidth&&t.maxWidth!==r.maxWidth&&(n.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==r.unit&&n.setUnit(t.unit),(0,e.useEffect)((()=>{R(n._container,o)}),[o]),null}));function k(e,t){if(!e)throw new Error(t)}let I=0;const O=function(t){const n=(0,e.useContext)(S).map.getMap(),i=(0,e.useRef)(t),[,r]=(0,e.useState)(0),s=(0,e.useMemo)((()=>t.id||"jsx-layer-".concat(I++)),[]);if((0,e.useEffect)((()=>{if(n){const e=()=>r((e=>e+1));return n.on("styledata",e),e(),()=>{n.off("styledata",e),n.style&&n.style._loaded&&n.getLayer(s)&&n.removeLayer(s)}}}),[n]),n&&n.style&&n.getLayer(s))try{!function(e,t,n,i){if(k(n.id===i.id,"layer id changed"),k(n.type===i.type,"layer type changed"),"custom"===n.type||"custom"===i.type)return;const{layout:r={},paint:s={},filter:a,minzoom:l,maxzoom:c,beforeId:u}=n;if(u!==i.beforeId&&e.moveLayer(t,u),r!==i.layout){const n=i.layout||{};for(const i in r)o(r[i],n[i])||e.setLayoutProperty(t,i,r[i]);for(const i in n)r.hasOwnProperty(i)||e.setLayoutProperty(t,i,void 0)}if(s!==i.paint){const n=i.paint||{};for(const i in s)o(s[i],n[i])||e.setPaintProperty(t,i,s[i]);for(const i in n)s.hasOwnProperty(i)||e.setPaintProperty(t,i,void 0)}o(a,i.filter)||e.setFilter(t,a),l===i.minzoom&&c===i.maxzoom||e.setLayerZoomRange(t,l,c)}(n,s,t,i.current)}catch(a){console.warn(a)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const i={...n,id:t};delete i.beforeId,e.addLayer(i,n.beforeId)}}(n,s,t);return i.current=t,null};let N=0;const F=function(t){const n=(0,e.useContext)(S).map.getMap(),i=(0,e.useRef)(t),[,r]=(0,e.useState)(0),s=(0,e.useMemo)((()=>t.id||"jsx-source-".concat(N++)),[]);(0,e.useEffect)((()=>{if(n){const e=()=>setTimeout((()=>r((e=>e+1))),0);return n.on("styledata",e),e(),()=>{var t;if(n.off("styledata",e),n.style&&n.style._loaded&&n.getSource(s)){const e=null===(t=n.getStyle())||void 0===t?void 0:t.layers;if(e)for(const t of e)t.source===s&&n.removeLayer(t.id);n.removeSource(s)}}}}),[n]);let a=n&&n.style&&n.getSource(s);return a?function(e,t,n){k(t.id===n.id,"source id changed"),k(t.type===n.type,"source type changed");let i="",r=0;for(const a in t)"children"===a||"id"===a||o(n[a],t[a])||(i=a,r++);if(!r)return;const s=t.type;if("geojson"===s)e.setData(t.data);else if("image"===s)e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&1===r&&"coordinates"===i)e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(i){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles)}else console.warn("Unable to update <Source> prop: ".concat(i))}(a,t,i.current):a=function(e,t,n){if(e.style&&e.style._loaded){const i={...n};return delete i.id,delete i.children,e.addSource(t,i),e.getSource(t)}return null}(n,s,t),i.current=t,a&&e.Children.map(t.children,(t=>t&&(0,e.cloneElement)(t,{source:s})))||null};const D=n.e(879).then(n.t.bind(n,879,23)),B=e.forwardRef((function(e,t){return T(e,t,D)})),U=M,z=L,G=O,j=F;function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=V(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}function H(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X={};function K(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";X[e]=X[e]||1;const t=X[e]++;return"".concat(e,"-").concat(t)}function Y(e){let t=!0;for(const n in e){t=!1;break}return t}class q{constructor(e,t,n){if(H(this,"id",void 0),H(this,"props",void 0),H(this,"userData",{}),H(this,"_device",void 0),H(this,"destroyed",!1),H(this,"allocatedBytes",0),H(this,"_attachedResources",new Set),!e)throw new Error("no device");this._device=e,this.props=function(e,t){const n={...t};for(const i in e)void 0!==e[i]&&(n[i]=e[i]);return n}(t,n);const i="undefined"!==this.props.id?this.props.id:K(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("".concat(t,"s Active")).decrementCount()}trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const t=this._device.statsManager.getStats("Resource Counts");t.get("GPU Memory").subtractCount(this.allocatedBytes),t.get("".concat(e," Memory")).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}}H(q,"defaultProps",{id:"undefined",handle:void 0,userData:void 0});class Z extends q{get[Symbol.toStringTag](){return"Buffer"}constructor(e,t){const n={...t};(t.usage||0)&Z.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?n.indexType="uint32":t.data instanceof Uint16Array&&(n.indexType="uint16")),super(e,n,Z.defaultProps),H(this,"usage",void 0),H(this,"indexType",void 0),H(this,"updateTimestamp",void 0),H(this,"debugData",new ArrayBuffer(0)),this.usage=t.usage||0,this.indexType=n.indexType,this.updateTimestamp=e.incrementTimestamp()}readSyncWebGL(e,t){throw new Error("not implemented")}_setDebugData(e,t,n){const i=ArrayBuffer.isView(e)?e.buffer:e,r=Math.min(e?e.byteLength:n,Z.DEBUG_DATA_MAX_LENGTH);null===e?this.debugData=new ArrayBuffer(r):0===t&&n===e.byteLength?this.debugData=i.slice(0,r):this.debugData=i.slice(t,t+r)}}function Q(e){var t,n;if("undefined"!==typeof window&&"renderer"===(null===(t=window.process)||void 0===t?void 0:t.type))return!0;if("undefined"!==typeof process&&Boolean(null===(n=process.versions)||void 0===n?void 0:n.electron))return!0;const i="undefined"!==typeof navigator&&navigator.userAgent,r=e||i;return Boolean(r&&r.indexOf("Electron")>=0)}function $(){var e;return!("object"===typeof process&&"[object process]"===String(process)&&!(null!==(e=process)&&void 0!==e&&e.browser))||Q()}H(Z,"defaultProps",{...q.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),H(Z,"MAP_READ",1),H(Z,"MAP_WRITE",2),H(Z,"COPY_SRC",4),H(Z,"COPY_DST",8),H(Z,"INDEX",16),H(Z,"VERTEX",32),H(Z,"UNIFORM",64),H(Z,"STORAGE",128),H(Z,"INDIRECT",256),H(Z,"QUERY_RESOLVE",512),H(Z,"DEBUG_DATA_MAX_LENGTH",32);const J="4.0.7";class ee{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(t){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}var te;!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(te||(te={}));const ne=10;function ie(e){return"string"!==typeof e?e:(e=e.toUpperCase(),te[e]||te.WHITE)}function re(e,t){if(!e)throw new Error(t||"Assertion failed")}const oe=globalThis,se=(globalThis.document,globalThis.process||{}),ae=(globalThis.console,globalThis.navigator||{});function le(){let e;var t,n;if($()&&oe.performance)e=null===oe||void 0===oe||null===(t=oe.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in se){var i;const t=null===se||void 0===se||null===(i=se.hrtime)||void 0===i?void 0:i.call(se);e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const ce={debug:$()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ue={enabled:!0,level:0};function de(){}const he={},fe={once:!0};class pe{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.VERSION=J,this._startTs=le(),this._deltaTs=le(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new ee("__probe-".concat(this.id,"__"),ue),this.timeStamp("".concat(this.id," started")),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n),r=e;for(const o of i){const n=r[o];"function"===typeof n&&(t.find((e=>o===e))||(r[o]=n.bind(e)))}}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((le()-this._startTs).toPrecision(10))}getDelta(){return Number((le()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){if(!e)throw new Error(t||"Assertion failed")}warn(e){return this._getLogFunction(0,e,ce.warn,arguments,fe)}error(e){return this._getLogFunction(0,e,ce.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,ce.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,ce.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,ce.debug||ce.info,arguments,fe)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||de,n&&[n],{tag:_e(t)}):de}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||de)}group(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const i=me({logLevel:e,message:t,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||de)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=ge(e)}_getLogFunction(e,t,n,i,r){if(this._shouldLog(e)){r=me({logLevel:e,message:t,args:i,opts:r}),re(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=le();const o=r.tag||r.message;if(r.once&&o){if(he[o])return de;he[o]=le()}return t=function(e,t,n){if("string"===typeof t){const i=n.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=function(e,t,n){if(!$&&"string"===typeof e){if(t){const n=ie(t);e="\x1b[".concat(n,"m").concat(e,"\x1b[39m")}if(n){const t=ie(n);e="\x1b[".concat(t+ne,"m").concat(e,"\x1b[49m")}}return e}(t=n.time?"".concat(e,": ").concat(i,"  ").concat(t):"".concat(e,": ").concat(t),n.color,n.background)}return t}(this.id,r.message,r),n.bind(console,t,...r.args)}return de}}function ge(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return re(Number.isFinite(t)&&t>=0),t}function me(e){const{logLevel:t,message:n}=e;e.logLevel=ge(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&i.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"===typeof e.message&&(e.message=e.message());const r=typeof e.message;return re("string"===r||"object"===r),Object.assign(e,{args:i},e.opts)}function _e(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}pe.VERSION=J;const ve=new pe({id:"deck"}),ye={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ye,"IDENTITY",{get:()=>(ve.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const be={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},we={common:0,meters:1,pixels:2},Ee={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function Se(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function Te(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function xe(e,t,n){if(!t||t>4)throw new Error("size ".concat(t));const i=t;let r=Se(e);if("uint8"===r||"sint8"===r){if(1===i||3===i)throw new Error("size: ".concat(t));return n&&(r=r.replace("int","norm")),"".concat(r,"x").concat(i)}if("uint16"===r||"sint16"===r){if(1===i||3===i)throw new Error("size: ".concat(t));return n&&(r=r.replace("int","norm")),"".concat(r,"x").concat(i)}return 1===i?r:"".concat(r,"x").concat(i)}const Ae=Se;function Re(e,t){return{attribute:e,format:t.size>1?"".concat(t.type,"x").concat(t.size):t.type,byteOffset:t.offset||0}}function Ce(e){return e.stride||e.size*e.bytesPerElement}const Pe=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,n){let{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=r||e&&e.constructor||Float32Array,u=t*i+o;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let d=1/0;l&&(d=l*i+o);const h=this._allocate(c,u,a,d);return e&&s?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,t,n,i){let r=Math.max(Math.ceil(t*this.opts.overAlloc),1);r>i&&(r=i);const o=this._pool,s=e.BYTES_PER_ELEMENT*r,a=o.findIndex((e=>e.byteLength>=s));if(a>=0){const t=new e(o.splice(a,1)[0],0,r);return n&&t.fill(0),t}return new e(r)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:i}=n,r=t.findIndex((e=>e.byteLength>=i));r<0?t.push(n):(r>0||t.length<this.opts.poolSize)&&t.splice(r,0,n),t.length>this.opts.poolSize&&t.shift()}};Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const Le=globalThis.mathgl.config;function Me(e){let{precision:t=Le.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=function(e){return Math.round(e/Le.EPSILON)*Le.EPSILON}(e),"".concat(parseFloat(e.toPrecision(t)))}function ke(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ie(e,t,n){return Fe(e,(e=>Math.max(t,Math.min(n,e))))}function Oe(e,t,n){return ke(e)?e.map(((e,i)=>Oe(e,t[i],n))):n*t+(1-n)*e}function Ne(e,t,n){const i=Le.EPSILON;n&&(Le.EPSILON=n);try{if(e===t)return!0;if(ke(e)&&ke(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ne(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"===typeof e&&"number"===typeof t&&Math.abs(e-t)<=Le.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{Le.EPSILON=i}}function Fe(e,t,n){if(ke(e)){const i=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(i);for(let r=0;r<n.length&&r<i.length;++r){const i="number"===typeof e?e:e[r];n[r]=t(i,r,n)}return n}return t(e)}class De extends Array{clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ke(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Le)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Me(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Ne(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let i=0;i<this.ELEMENTS;++i){const r=e[i],o="number"===typeof t?t:t[i];this[i]=r+n*(o-r)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)for(let e=0;e<this.ELEMENTS;++e)this[e]+=i[e];return this.check()}subtract(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)for(let e=0;e<this.ELEMENTS;++e)this[e]-=i[e];return this.check()}scale(e){if("number"===typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(Le.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}function Be(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(JSON.stringify(e)));return e}function Ue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Le.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}function ze(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}class Ge extends De{get x(){return this[0]}set x(e){this[0]=Be(e)}get y(){return this[1]}set y(e){this[1]=Be(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-e[n];t+=i*i}return Be(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Be(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=i[e];return this.check()}divide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=i[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ze(e>=0&&e<this.ELEMENTS,"index is out of range"),Be(this[e])}setComponent(e,t){return ze(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const je=1e-6;let Ve="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function We(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function He(e,t,n){const i=t[0],r=t[1],o=t[2];let s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,e[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,e[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,e}const Xe=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};!function(){const e=function(){const e=new Ve(3);return Ve!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}()}();function Ke(e,t,n){const i=t[0],r=t[1],o=t[2],s=n[3]*i+n[7]*r+n[11]*o||1;return e[0]=(n[0]*i+n[4]*r+n[8]*o)/s,e[1]=(n[1]*i+n[5]*r+n[9]*o)/s,e[2]=(n[2]*i+n[6]*r+n[10]*o)/s,e}const Ye=[0,0,0];let qe;class Ze extends Ge{static get ZERO(){return qe||(qe=new Ze(0,0,0),Object.freeze(qe)),qe}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&ke(e)?this.copy(e):(Le.debug&&(Be(e),Be(t),Be(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Le.debug&&(Be(e.x),Be(e.y),Be(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Be(e)}angle(e){return function(e,t){const n=e[0],i=e[1],r=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt((n*n+i*i+r*r)*(o*o+s*s+a*a)),c=l&&We(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,e)}cross(e){return function(e,t,n){const i=t[0],r=t[1],o=t[2],s=n[0],a=n[1],l=n[2];e[0]=r*l-o*a,e[1]=o*s-i*l,e[2]=i*a-r*s}(this,this,e),this.check()}rotateX(e){let{radians:t,origin:n=Ye}=e;return function(e,t,n,i){const r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateY(e){let{radians:t,origin:n=Ye}=e;return function(e,t,n,i){const r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateZ(e){let{radians:t,origin:n=Ye}=e;return function(e,t,n,i){const r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return He(this,this,e),this.check()}transformAsVector(e){return Ke(this,this,e),this.check()}transformByMatrix3(e){return function(e,t,n){const i=t[0],r=t[1],o=t[2];e[0]=i*n[0]+r*n[3]+o*n[6],e[1]=i*n[1]+r*n[4]+o*n[7],e[2]=i*n[2]+r*n[5]+o*n[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const i=t[0],r=t[1];e[0]=n[0]*i+n[2]*r,e[1]=n[1]*i+n[3]*r,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(e,t,n){const i=n[0],r=n[1],o=n[2],s=n[3],a=t[0],l=t[1],c=t[2];let u=r*c-o*l,d=o*a-i*c,h=i*l-r*a,f=r*h-o*d,p=o*u-i*h,g=i*d-r*u;const m=2*s;u*=m,d*=m,h*=m,f*=2,p*=2,g*=2,e[0]=a+u+f,e[1]=l+d+p,e[2]=c+h+g}(this,this,e),this.check()}}const Qe=new Ze;function $e(e,t,n,i){Qe.set(e,t,n);const r=Qe.len();return{distance:i/r,normal:new Ze(-e/r,-t/r,-n/r)}}let Je;function et(e,t){const{size:n=1,startIndex:i=0}=t,r=void 0!==t.endIndex?t.endIndex:e.length,o=(r-i)/n;Je=Pe.allocate(Je,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let t=0;t<n;t++){const i=e[s++];Je[a+t]=i,Je[a+t+n]=(l=i)-Math.fround(l)}a+=2*n}var l;return Je.subarray(0,o*n*2)}function tt(e){let t=null,n=!1;for(const i of e)i&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],i[0][0]),t[0][1]=Math.min(t[0][1],i[0][1]),t[1][0]=Math.max(t[1][0],i[1][0]),t[1][1]=Math.max(t[1][1],i[1][1])):t=i);return t}function nt(e,t){t.offset&&ve.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Ce(e),i=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:i,stride:n}}class it{constructor(e,t,n){this._buffer=null,this.device=e,this.id=t.id||"",this.size=t.size||1;const i=t.logicalType||t.type,r="float64"===i;let o,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=r?"float32":!i&&t.isIndexed?"uint32":i||"float32";let a=function(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return Te(e)}}(i||o);this.doublePrecision=r,r&&!1===t.fp64&&(a=Float32Array),this.value=null,this.settings={...t,defaultType:a,defaultValue:s,logicalType:i,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ce(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Pe.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={};if(this.state.constant){const i=this.value;if(t){const r=nt(this.getAccessor(),t),o=r.offset/i.BYTES_PER_ELEMENT,s=r.size||this.size;n[e]=i.subarray(o,o+s)}else n[e]=i}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n["".concat(e,"64Low")]=n[e]:n["".concat(e,"64Low")]=new Float32Array(this.size)),n}_getBufferLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getAccessor(),i=[],r={name:this.id,byteStride:Ce(n),attributes:i};if(this.doublePrecision){const r=function(e,t){const n=nt(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(n,t||{});i.push(Re(e,{...n,...r.high}),Re("".concat(e,"64Low"),{...n,...r.low}))}else if(t){const r=nt(n,t);i.push(Re(e,{...n,...r}))}else i.push(Re(e,n));return r}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:i}=this,r=n*i;if(t&&r&&t.length>=r){const n=new Array(i).fill(1/0),o=new Array(i).fill(-1/0);for(let e=0;e<r;)for(let r=0;r<i;r++){const i=t[e++];i<n[r]&&(n[r]=i),i>o[r]&&(o[r]=i)}e=[n,o]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof Z?{buffer:e}:e;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type){if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const e=Ae(n.value);i.type=i.normalized?e.replace("int","norm"):e}}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=Ce(i)}if(t.bounds=null,n.constant){let e=n.value;e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e));if(!(!t.constant||!this._areValuesEqual(e,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=ArrayBuffer.isView(e)?e:new Float32Array(e)}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e;let{buffer:r}=this;const o=Ce(i),s=(i.vertexOffset||0)*o;if(this.doublePrecision&&e instanceof Float64Array&&(e=et(e,i)),this.settings.isIndexed){const t=this.settings.defaultType;e.constructor!==t&&(e=new t(e))}const a=e.byteLength+s+2*o;(!r||r.byteLength<a)&&(r=this._createBuffer(a)),r.write(e,s)}return this.setAccessor(i),!0}updateSubBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&t instanceof Float64Array?et(t,{size:this.size,startIndex:n,endIndex:i}):t.subarray(n,i),n*t.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,i=n.allocatedValue,r=Pe.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=r;const{byteOffset:o}=this;let{buffer:s}=this;return(!s||s.byteLength<r.byteLength+o)&&(s=this._createBuffer(r.byteLength+o),t&&i&&s.write(i instanceof Float64Array?et(i,this):i,o)),n.allocatedValue=r,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=t.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||ve.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map((e=>(e+128)/255*2-1));case"snorm16":return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case"unorm8":return new Float32Array(e).map((e=>e/255));case"unorm16":return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:i,size:r}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e){let e=r;for(;--e>=0;)t[n+e]=i[e];return t}switch(r){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=r;for(;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}_createBuffer(e){var t;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:i}=this.settings;return this._buffer=this.device.createBuffer({...null===(t=this._buffer)||void 0===t?void 0:t.props,id:this.id,usage:n?Z.INDEX:Z.VERTEX,indexType:n?i:void 0,byteLength:e}),this._buffer}}function rt(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}const ot=[],st=[];function at(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=ot;const r={index:-1,data:e,target:[]};return e?"function"===typeof e[Symbol.iterator]?i=e:e.length>0&&(st.length=e.length,i=st):i=ot,(t>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(t,n),r.index=t-1),{iterable:i,objectInfo:r}}function lt(e){return e&&e[Symbol.asyncIterator]}function ct(e,t){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=i?i/a:n,c=r?r/a:0,u=Math.floor((e.length-c)/l);return(t,i)=>{let{index:r,target:a}=i;if(!o){const t=r*l+c;for(let i=0;i<n;i++)a[i]=e[t+i];return a}const d=o[r],h=o[r+1]||u;let f;if(s){f=new Array(h-d);for(let t=d;t<h;t++){const i=t*l+c;a=new Array(n);for(let t=0;t<n;t++)a[t]=e[i+t];f[t-d]=a}}else if(l===n)f=e.subarray(d*n+c,h*n+c);else{f=new e.constructor((h-d)*n);let t=0;for(let i=d;i<h;i++){const r=i*l+c;for(let i=0;i<n;i++)f[t++]=e[r+i]}}return f}}function ut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(e)?dt(e,t,[]):t(e)?[e]:[]}function dt(e,t,n){let i=-1;for(;++i<e.length;){const r=e[i];Array.isArray(r)?dt(r,t,n):t(r)&&n.push(r)}return n}function ht(e){let{target:t,source:n,start:i=0,count:r=1}=e;const o=n.length,s=r*o;let a=0;for(let l=i;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(i+a,i,i+a),a*=2):(t.copyWithin(i+a,i,i+s-a),a=s);return t}const ft=[],pt=[[0,1/0]];const gt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function mt(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...gt[n],...t,...e,type:n}}class _t extends it{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:pt}),this.constant=!1,this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var t,n,i;(t=this.state).layoutChanged||(t.layoutChanged=(n=e,i=this.getAccessor(),!(n.type===i.type&&n.size===i.size&&Ce(n)===Ce(i)&&(n.offset||0)===(i.offset||0)))),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!==typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition;return mt(Array.isArray(t)?e[t.find((t=>e[t]))]:e[t],n)}setNeedsUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===pt)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],i=e.length;let r=0;for(let o=0;o<i;o++){const i=e[o];i[1]<t[0]?(n.push(i),r=o+1):i[0]>t[1]?n.push(i):t=[Math.min(i[0],t[0]),Math.max(i[1],t[1])]}return n.splice(r,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=pt}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=ft}setNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(e,t.updateRanges!==pt),!0))}updateBuffer(e){let{numInstances:t,data:n,props:i,context:r}=e;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[e,a]of o)s.call(r,this,{data:n,startRow:e,endRow:a,props:i,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of o){const i=Number.isFinite(e)?this.getVertexOffset(e):0,r=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:i,endOffset:r})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){if(void 0===e||"function"===typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw();if(i.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const r=e;rt(ArrayBuffer.isView(r.value),"invalid ".concat(i.accessor));const o=Boolean(r.size)&&r.size!==this.size;return n.binaryAccessor=ct(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,t=super.getValue();if(!e)return t;for(const n in e)Object.assign(t,super.getValue(n,e[n]));return t}getBufferLayout(e){this.state.layoutChanged=!1;const t=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(n.stepMode="dynamic"===i?e?e.isInstanced?"instance":"vertex":"instance":null!==i&&void 0!==i?i:"vertex",!t)return n;for(const r in t){const e=super._getBufferLayout(r,t[r]);n.attributes.push(...e.attributes)}return n}_autoUpdater(e,t){let{data:n,startRow:i,endRow:r,props:o,numInstances:s}=t;if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=e,{accessor:h,transform:f}=a,p=l.binaryAccessor||("function"===typeof h?h:o[h]);rt("function"===typeof p,'accessor "'.concat(h,'" is not a function'));let g=e.getVertexOffset(i);const{iterable:m,objectInfo:_}=at(n,i,r);for(const v of m){_.index++;let t=p(v,_);if(f&&(t=f.call(this,t)),d){const n=(_.index<d.length-1?d[_.index+1]:s)-d[_.index];if(t&&Array.isArray(t[0])){let n=g;for(const i of t)e._normalizeValue(i,c,n),n+=u}else t&&t.length>u?c.set(t,g):(e._normalizeValue(t,_.target,0),ht({target:c,source:_.target,start:g,count:n}));g+=n*u}else e._normalizeValue(t,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"===typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function vt(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return!1}function yt(e){let t,n={};return i=>{for(const r in i)if(!vt(i[r],n[r])){t=e(i),n=i;break}return t}}let bt={};function wt(e){bt=e}function Et(e,t,n,i){ve.level>0&&bt[e]&&bt[e].call(null,t,n,i)}function St(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Tt="#version 300 es\n".concat("out vec4 transform_output;\nvoid main() {\ntransform_output = vec4(0);\n}");function xt(e){const{input:t,inputChannels:n,output:i}=e||{};if(!t)return Tt;if(!n)throw new Error("inputChannels");const r=function(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("invalid channels: ".concat(e))}}(n),o=function(e,t){switch(t){case 1:return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case 2:return"vec4(".concat(e,", 0.0, 1.0)");case 3:return"vec4(".concat(e,", 1.0)");case 4:return e;default:throw new Error("invalid channels: ".concat(t))}}(t,n);return"#version 300 es\nin ".concat(r," ").concat(t,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}")}class At extends q{get[Symbol.toStringTag](){return"TextureView"}constructor(e,t){super(e,t,At.defaultProps)}}H(At,"defaultProps",{...q.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});class Rt extends q{get[Symbol.toStringTag](){return"Texture"}constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt.defaultProps),H(this,"dimension",void 0),H(this,"format",void 0),H(this,"width",void 0),H(this,"height",void 0),H(this,"depth",void 0),H(this,"updateTimestamp",void 0),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=e.incrementTimestamp()}}H(Rt,"defaultProps",{...q.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),H(Rt,"COPY_SRC",1),H(Rt,"COPY_DST",2),H(Rt,"TEXTURE_BINDING",4),H(Rt,"STORAGE_BINDING",8),H(Rt,"RENDER_ATTACHMENT",16);class Ct extends q{get[Symbol.toStringTag](){return"Sampler"}constructor(e,t){super(e,t,Ct.defaultProps)}}function Pt(e){return Array.isArray(e)?0===e.length||"number"===typeof e[0]?e:null:function(e){return!ArrayBuffer.isView(e)||e instanceof DataView?null:e}(e)}H(Ct,"defaultProps",{...q.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});class Lt{constructor(e){if(H(this,"name",void 0),H(this,"uniforms",{}),H(this,"modifiedUniforms",{}),H(this,"modified",!0),H(this,"bindingLayout",{}),H(this,"needsRedraw","initialized"),this.name=null===e||void 0===e?void 0:e.name,null!==e&&void 0!==e&&e.name&&null!==e&&void 0!==e&&e.shaderLayout){var t;const n=null===e||void 0===e||null===(t=e.shaderLayout.bindings)||void 0===t?void 0:t.find((t=>"uniform"===t.type&&t.name===(null===e||void 0===e?void 0:e.name)));if(!n)throw new Error(null===e||void 0===e?void 0:e.name);const i=n;for(const e of i.uniforms||[])this.bindingLayout[e.name]=e}}setUniforms(e){for(const[t,n]of Object.entries(e))this._setUniform(t,n),this.needsRedraw||this.setNeedsRedraw("".concat(this.name,".").concat(t,"=").concat(n))}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,t){(function(e,t){if(e!==t)return!1;const n=Pt(e);if(!n)return!1;const i=Pt(t);if(i&&n.length===i.length)for(let r=0;r<n.length;++r)if(i[r]!==n[r])return!1;return!0})(this.uniforms[e],t)||(this.uniforms[e]=function(e){const t=Pt(e);return t?t.slice():e}(t),this.modifiedUniforms[e]=!0,this.modified=!0)}}const Mt={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function kt(e){const t=Mt[e];return St(e),t}function It(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}let Ot;function Nt(e){return(!Ot||Ot.byteLength<e)&&(Ot=new ArrayBuffer(e)),Ot}const Ft=new pe({id:"luma.gl"});class Dt{constructor(e){H(this,"layout",{}),H(this,"byteLength",void 0);let t=0;for(const[i,r]of Object.entries(e)){const e=kt(r),{type:n,components:o}=e;t=It(t,o);const s=t;t+=o,this.layout[i]={type:n,size:o,offset:s}}t+=(4-t%4)%4;const n=4*t;this.byteLength=Math.max(n,1024)}getData(e){const t=Nt(Math.max(this.byteLength,1024)),n={i32:new Int32Array(t),u32:new Uint32Array(t),f32:new Float32Array(t),f16:new Uint16Array(t)};for(const[i,r]of Object.entries(e)){const e=this.layout[i];if(!e){Ft.warn("Supplied uniform value ".concat(i," not present in uniform block layout"))();continue}const{type:t,size:o,offset:s}=e,a=n[t];if(1===o){if("number"!==typeof r&&"boolean"!==typeof r){Ft.warn("Supplied value for single component uniform ".concat(i," is not a number: ").concat(r))();continue}a[s]=Number(r)}else{const e=Pt(r);if(!e){Ft.warn("Supplied value for multi component / array uniform ".concat(i," is not a numeric array: ").concat(r))();continue}a.set(e,s)}}return new Uint8Array(t)}has(e){return Boolean(this.layout[e])}get(e){return this.layout[e]}}class Bt{constructor(e){H(this,"uniformBlocks",new Map),H(this,"uniformBufferLayouts",new Map),H(this,"uniformBuffers",new Map);for(const[t,n]of Object.entries(e)){const e=t,i=new Dt(n.uniformTypes||{});this.uniformBufferLayouts.set(e,i);const r=new Lt({name:t});r.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(e,r)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[t,n]of Object.entries(e))this.uniformBlocks.get(t).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e).byteLength}getUniformBufferData(e){const t=this.uniformBlocks.get(e).getAllUniforms();return this.uniformBufferLayouts.get(e).getData(t)}createUniformBuffer(e,t,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(t),r=e.createBuffer({usage:Z.UNIFORM|Z.COPY_DST,byteLength:i}),o=this.getUniformBufferData(t);return r.write(o),r}getManagedUniformBuffer(e,t){if(!this.uniformBuffers.get(t)){const n=this.getUniformBufferByteLength(t),i=e.createBuffer({usage:Z.UNIFORM|Z.COPY_DST,byteLength:n});this.uniformBuffers.set(t,i)}return this.uniformBuffers.get(t)}updateUniformBuffers(){let e=!1;for(const t of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(t);e||(e=n)}return e&&Ft.log(3,"UniformStore.updateUniformBuffers(): ".concat(e))(),e}updateUniformBuffer(e){const t=this.uniformBlocks.get(e);let n=!1;if(this.uniformBuffers.get(e)&&t.needsRedraw){n||(n=t.needsRedraw);const i=this.getUniformBufferData(e);this.uniformBuffers.get(e).write(i);const r=this.uniformBlocks.get(e).getAllUniforms();Ft.log(4,"Writing to uniform buffer ".concat(String(e)),i,r)()}return n}}class Ut extends q{get[Symbol.toStringTag](){return"RenderPipeline"}constructor(e,t){super(e,t,Ut.defaultProps),H(this,"shaderLayout",void 0),H(this,"bufferLayout",void 0),H(this,"linkStatus","pending"),H(this,"hash",""),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(e){throw new Error("Use uniform blocks")}}function zt(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!zt(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const o of i){if(!t.hasOwnProperty(o))return!1;if(!zt(e[o],t[o],n-1))return!1}return!0}return!1}function Gt(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach((n=>{const i=e[n];var r;null!==Pt(r=i)||"number"===typeof r||"boolean"===typeof r?t.uniforms[n]=i:t.bindings[n]=i})),t}H(Ut,"defaultProps",{...q.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});const jt={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},Vt={f32:4,f16:2,i32:4,u32:4};function Wt(e){const t=function(e){const t=Xt[e];return t}(Ht[e]),n=e.includes("norm"),i=!n&&!e.startsWith("float"),r=e.startsWith("s");return{dataType:Ht[e],byteLength:t,integer:i,signed:r,normalized:n}}const Ht={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},Xt={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4};function Kt(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,i]=e.split("x"),r=n,o=i?parseInt(i):1,s=Wt(r),a={type:r,components:o,byteLength:s.byteLength*o,integer:s.integer,signed:s.signed,normalized:s.normalized};return t&&(a.webglOnly=!0),a}function Yt(e,t){const n={};for(const i of e.attributes)n[i.name]=qt(e,t,i.name);return n}function qt(e,t,n){const i=function(e,t){const n=e.attributes.find((e=>e.name===t));n||Ft.warn('shader layout attribute "'.concat(t,'" not present in shader'));return n||null}(e,n),r=function(e,t){Zt(e);let n=function(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(e,t);if(n)return n;if(n=function(e,t){for(const i of e){var n;let e=i.byteStride;if("number"!==typeof i.byteStride)for(const t of i.attributes||[]){e+=Kt(t.format).byteLength}const r=null===(n=i.attributes)||void 0===n?void 0:n.find((e=>e.attribute===t));if(r)return{attributeName:r.attribute,bufferName:i.name,stepMode:i.stepMode,vertexFormat:r.format,byteOffset:r.byteOffset,byteStride:e}}return null}(e,t),n)return n;return Ft.warn('layout for attribute "'.concat(t,'" not present in buffer layout')),null}(t,n);if(!i)return null;const o=function(e){const[t,n]=jt[e],i="i32"===t||"u32"===t,r="u32"!==t,o=Vt[t]*n,s=function(e,t){let n;switch(e){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return 1===t?n:"".concat(n,"x").concat(t)}(t,n);return{dataType:t,components:n,defaultVertexFormat:s,byteLength:o,integer:i,signed:r}}(i.type),s=(null===r||void 0===r?void 0:r.vertexFormat)||o.defaultVertexFormat,a=Kt(s);return{attributeName:(null===r||void 0===r?void 0:r.attributeName)||i.name,bufferName:(null===r||void 0===r?void 0:r.bufferName)||i.name,location:i.location,shaderType:i.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:s,bufferDataType:a.type,bufferComponents:a.components,normalized:a.normalized,integer:o.integer,stepMode:(null===r||void 0===r?void 0:r.stepMode)||i.stepMode,byteOffset:(null===r||void 0===r?void 0:r.byteOffset)||0,byteStride:(null===r||void 0===r?void 0:r.byteStride)||0}}function Zt(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&Ft.warn("BufferLayout ".concat(name," must have either 'attributes' or 'format' field"))}class Qt{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class $t{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}}class Jt extends $t{constructor(){super()}}class en extends Jt{constructor(e,t,n,i){super(),this.name=e,this.args=t,this.returnType=n,this.body=i}get astNodeType(){return"function"}}class tn extends Jt{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}}class nn extends Jt{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"while"}}class rn extends Jt{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}}class on extends Jt{constructor(e,t,n,i){super(),this.init=e,this.condition=t,this.increment=n,this.body=i}get astNodeType(){return"for"}}class sn extends Jt{constructor(e,t,n,i,r){super(),this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"var"}}class an extends Jt{constructor(e,t,n){super(),this.name=e,this.type=t,this.value=n}get astNodeType(){return"override"}}class ln extends Jt{constructor(e,t,n,i,r){super(),this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"let"}}class cn extends Jt{constructor(e,t,n,i,r){super(),this.name=e,this.type=t,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}}var un,dn,hn,fn,pn;!function(e){e.increment="++",e.decrement="--"}(un||(un={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return e[n]}}(un||(un={}));class gn extends Jt{constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return"increment"}}!function(e){e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="}(dn||(dn={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for AssignOperator");return e[n]}}(dn||(dn={}));class mn extends Jt{constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return"assign"}}class _n extends Jt{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"call"}}class vn extends Jt{constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return"loop"}}class yn extends Jt{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"body"}}class bn extends Jt{constructor(e,t,n,i){super(),this.condition=e,this.body=t,this.elseif=n,this.else=i}get astNodeType(){return"if"}}class wn extends Jt{constructor(e){super(),this.value=e}get astNodeType(){return"return"}}class En extends Jt{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Sn extends Jt{constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return"alias"}}class Tn extends Jt{constructor(){super()}get astNodeType(){return"discard"}}class xn extends Jt{constructor(){super()}get astNodeType(){return"break"}}class An extends Jt{constructor(){super()}get astNodeType(){return"continue"}}class Rn extends Jt{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class Cn extends Rn{constructor(e,t){super(e),this.members=t}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}}class Pn extends Rn{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"template"}}class Ln extends Rn{constructor(e,t,n,i){super(e),this.storage=t,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class Mn extends Rn{constructor(e,t,n,i){super(e),this.attributes=t,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class kn extends Rn{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"sampler"}}class In extends $t{constructor(){super()}}class On extends In{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Nn extends In{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"createExpr"}}class Fn extends In{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return 180*this.args[0].evaluate(e)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}}class Dn extends In{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}}class Bn extends In{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return"constExpr"}evaluate(e){var t,n;if(this.initializer instanceof Nn){const i=null===(t=this.postfix)||void 0===t?void 0:t.evaluateString(e),r=null===(n=this.initializer.type)||void 0===n?void 0:n.name,o=e.structs.get(r),s=null===o||void 0===o?void 0:o.getMemberIndex(i);if(-1!=s){return this.initializer.args[s].evaluate(e)}console.log(s)}return this.initializer.evaluate(e)}}class Un extends In{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class zn extends In{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return"bitcastExpr"}}class Gn extends In{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}}class jn extends In{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}}class Vn extends In{constructor(){super()}}class Wn extends Vn{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}}class Hn extends Vn{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error("Unknown operator ".concat(this.operator))}}}class Xn extends $t{constructor(){super()}}class Kn extends Xn{constructor(e,t){super(),this.selector=e,this.body=t}get astNodeType(){return"case"}}class Yn extends Xn{constructor(e){super(),this.body=e}get astNodeType(){return"default"}}class qn extends $t{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"argument"}}class Zn extends $t{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"elseif"}}class Qn extends $t{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"member"}}class $n extends $t{constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return"attribute"}}!function(e){e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"}(fn||(fn={}));class Jn{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}}class ei{}hn=ei,ei.none=new Jn("",fn.reserved,""),ei.eof=new Jn("EOF",fn.token,""),ei.reserved={asm:new Jn("asm",fn.reserved,"asm"),bf16:new Jn("bf16",fn.reserved,"bf16"),do:new Jn("do",fn.reserved,"do"),enum:new Jn("enum",fn.reserved,"enum"),f16:new Jn("f16",fn.reserved,"f16"),f64:new Jn("f64",fn.reserved,"f64"),handle:new Jn("handle",fn.reserved,"handle"),i8:new Jn("i8",fn.reserved,"i8"),i16:new Jn("i16",fn.reserved,"i16"),i64:new Jn("i64",fn.reserved,"i64"),mat:new Jn("mat",fn.reserved,"mat"),premerge:new Jn("premerge",fn.reserved,"premerge"),regardless:new Jn("regardless",fn.reserved,"regardless"),typedef:new Jn("typedef",fn.reserved,"typedef"),u8:new Jn("u8",fn.reserved,"u8"),u16:new Jn("u16",fn.reserved,"u16"),u64:new Jn("u64",fn.reserved,"u64"),unless:new Jn("unless",fn.reserved,"unless"),using:new Jn("using",fn.reserved,"using"),vec:new Jn("vec",fn.reserved,"vec"),void:new Jn("void",fn.reserved,"void")},ei.keywords={array:new Jn("array",fn.keyword,"array"),atomic:new Jn("atomic",fn.keyword,"atomic"),bool:new Jn("bool",fn.keyword,"bool"),f32:new Jn("f32",fn.keyword,"f32"),i32:new Jn("i32",fn.keyword,"i32"),mat2x2:new Jn("mat2x2",fn.keyword,"mat2x2"),mat2x3:new Jn("mat2x3",fn.keyword,"mat2x3"),mat2x4:new Jn("mat2x4",fn.keyword,"mat2x4"),mat3x2:new Jn("mat3x2",fn.keyword,"mat3x2"),mat3x3:new Jn("mat3x3",fn.keyword,"mat3x3"),mat3x4:new Jn("mat3x4",fn.keyword,"mat3x4"),mat4x2:new Jn("mat4x2",fn.keyword,"mat4x2"),mat4x3:new Jn("mat4x3",fn.keyword,"mat4x3"),mat4x4:new Jn("mat4x4",fn.keyword,"mat4x4"),ptr:new Jn("ptr",fn.keyword,"ptr"),sampler:new Jn("sampler",fn.keyword,"sampler"),sampler_comparison:new Jn("sampler_comparison",fn.keyword,"sampler_comparison"),struct:new Jn("struct",fn.keyword,"struct"),texture_1d:new Jn("texture_1d",fn.keyword,"texture_1d"),texture_2d:new Jn("texture_2d",fn.keyword,"texture_2d"),texture_2d_array:new Jn("texture_2d_array",fn.keyword,"texture_2d_array"),texture_3d:new Jn("texture_3d",fn.keyword,"texture_3d"),texture_cube:new Jn("texture_cube",fn.keyword,"texture_cube"),texture_cube_array:new Jn("texture_cube_array",fn.keyword,"texture_cube_array"),texture_multisampled_2d:new Jn("texture_multisampled_2d",fn.keyword,"texture_multisampled_2d"),texture_storage_1d:new Jn("texture_storage_1d",fn.keyword,"texture_storage_1d"),texture_storage_2d:new Jn("texture_storage_2d",fn.keyword,"texture_storage_2d"),texture_storage_2d_array:new Jn("texture_storage_2d_array",fn.keyword,"texture_storage_2d_array"),texture_storage_3d:new Jn("texture_storage_3d",fn.keyword,"texture_storage_3d"),texture_depth_2d:new Jn("texture_depth_2d",fn.keyword,"texture_depth_2d"),texture_depth_2d_array:new Jn("texture_depth_2d_array",fn.keyword,"texture_depth_2d_array"),texture_depth_cube:new Jn("texture_depth_cube",fn.keyword,"texture_depth_cube"),texture_depth_cube_array:new Jn("texture_depth_cube_array",fn.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new Jn("texture_depth_multisampled_2d",fn.keyword,"texture_depth_multisampled_2d"),texture_external:new Jn("texture_external",fn.keyword,"texture_external"),u32:new Jn("u32",fn.keyword,"u32"),vec2:new Jn("vec2",fn.keyword,"vec2"),vec3:new Jn("vec3",fn.keyword,"vec3"),vec4:new Jn("vec4",fn.keyword,"vec4"),bitcast:new Jn("bitcast",fn.keyword,"bitcast"),block:new Jn("block",fn.keyword,"block"),break:new Jn("break",fn.keyword,"break"),case:new Jn("case",fn.keyword,"case"),continue:new Jn("continue",fn.keyword,"continue"),continuing:new Jn("continuing",fn.keyword,"continuing"),default:new Jn("default",fn.keyword,"default"),discard:new Jn("discard",fn.keyword,"discard"),else:new Jn("else",fn.keyword,"else"),enable:new Jn("enable",fn.keyword,"enable"),fallthrough:new Jn("fallthrough",fn.keyword,"fallthrough"),false:new Jn("false",fn.keyword,"false"),fn:new Jn("fn",fn.keyword,"fn"),for:new Jn("for",fn.keyword,"for"),function:new Jn("function",fn.keyword,"function"),if:new Jn("if",fn.keyword,"if"),let:new Jn("let",fn.keyword,"let"),const:new Jn("const",fn.keyword,"const"),loop:new Jn("loop",fn.keyword,"loop"),while:new Jn("while",fn.keyword,"while"),private:new Jn("private",fn.keyword,"private"),read:new Jn("read",fn.keyword,"read"),read_write:new Jn("read_write",fn.keyword,"read_write"),return:new Jn("return",fn.keyword,"return"),storage:new Jn("storage",fn.keyword,"storage"),switch:new Jn("switch",fn.keyword,"switch"),true:new Jn("true",fn.keyword,"true"),alias:new Jn("alias",fn.keyword,"alias"),type:new Jn("type",fn.keyword,"type"),uniform:new Jn("uniform",fn.keyword,"uniform"),var:new Jn("var",fn.keyword,"var"),override:new Jn("override",fn.keyword,"override"),workgroup:new Jn("workgroup",fn.keyword,"workgroup"),write:new Jn("write",fn.keyword,"write"),r8unorm:new Jn("r8unorm",fn.keyword,"r8unorm"),r8snorm:new Jn("r8snorm",fn.keyword,"r8snorm"),r8uint:new Jn("r8uint",fn.keyword,"r8uint"),r8sint:new Jn("r8sint",fn.keyword,"r8sint"),r16uint:new Jn("r16uint",fn.keyword,"r16uint"),r16sint:new Jn("r16sint",fn.keyword,"r16sint"),r16float:new Jn("r16float",fn.keyword,"r16float"),rg8unorm:new Jn("rg8unorm",fn.keyword,"rg8unorm"),rg8snorm:new Jn("rg8snorm",fn.keyword,"rg8snorm"),rg8uint:new Jn("rg8uint",fn.keyword,"rg8uint"),rg8sint:new Jn("rg8sint",fn.keyword,"rg8sint"),r32uint:new Jn("r32uint",fn.keyword,"r32uint"),r32sint:new Jn("r32sint",fn.keyword,"r32sint"),r32float:new Jn("r32float",fn.keyword,"r32float"),rg16uint:new Jn("rg16uint",fn.keyword,"rg16uint"),rg16sint:new Jn("rg16sint",fn.keyword,"rg16sint"),rg16float:new Jn("rg16float",fn.keyword,"rg16float"),rgba8unorm:new Jn("rgba8unorm",fn.keyword,"rgba8unorm"),rgba8unorm_srgb:new Jn("rgba8unorm_srgb",fn.keyword,"rgba8unorm_srgb"),rgba8snorm:new Jn("rgba8snorm",fn.keyword,"rgba8snorm"),rgba8uint:new Jn("rgba8uint",fn.keyword,"rgba8uint"),rgba8sint:new Jn("rgba8sint",fn.keyword,"rgba8sint"),bgra8unorm:new Jn("bgra8unorm",fn.keyword,"bgra8unorm"),bgra8unorm_srgb:new Jn("bgra8unorm_srgb",fn.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new Jn("rgb10a2unorm",fn.keyword,"rgb10a2unorm"),rg11b10float:new Jn("rg11b10float",fn.keyword,"rg11b10float"),rg32uint:new Jn("rg32uint",fn.keyword,"rg32uint"),rg32sint:new Jn("rg32sint",fn.keyword,"rg32sint"),rg32float:new Jn("rg32float",fn.keyword,"rg32float"),rgba16uint:new Jn("rgba16uint",fn.keyword,"rgba16uint"),rgba16sint:new Jn("rgba16sint",fn.keyword,"rgba16sint"),rgba16float:new Jn("rgba16float",fn.keyword,"rgba16float"),rgba32uint:new Jn("rgba32uint",fn.keyword,"rgba32uint"),rgba32sint:new Jn("rgba32sint",fn.keyword,"rgba32sint"),rgba32float:new Jn("rgba32float",fn.keyword,"rgba32float"),static_assert:new Jn("static_assert",fn.keyword,"static_assert")},ei.tokens={decimal_float_literal:new Jn("decimal_float_literal",fn.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new Jn("hex_float_literal",fn.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new Jn("int_literal",fn.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new Jn("uint_literal",fn.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new Jn("ident",fn.token,/[a-zA-Z][0-9a-zA-Z_]*/),and:new Jn("and",fn.token,"&"),and_and:new Jn("and_and",fn.token,"&&"),arrow:new Jn("arrow ",fn.token,"->"),attr:new Jn("attr",fn.token,"@"),attr_left:new Jn("attr_left",fn.token,"[["),attr_right:new Jn("attr_right",fn.token,"]]"),forward_slash:new Jn("forward_slash",fn.token,"/"),bang:new Jn("bang",fn.token,"!"),bracket_left:new Jn("bracket_left",fn.token,"["),bracket_right:new Jn("bracket_right",fn.token,"]"),brace_left:new Jn("brace_left",fn.token,"{"),brace_right:new Jn("brace_right",fn.token,"}"),colon:new Jn("colon",fn.token,":"),comma:new Jn("comma",fn.token,","),equal:new Jn("equal",fn.token,"="),equal_equal:new Jn("equal_equal",fn.token,"=="),not_equal:new Jn("not_equal",fn.token,"!="),greater_than:new Jn("greater_than",fn.token,">"),greater_than_equal:new Jn("greater_than_equal",fn.token,">="),shift_right:new Jn("shift_right",fn.token,">>"),less_than:new Jn("less_than",fn.token,"<"),less_than_equal:new Jn("less_than_equal",fn.token,"<="),shift_left:new Jn("shift_left",fn.token,"<<"),modulo:new Jn("modulo",fn.token,"%"),minus:new Jn("minus",fn.token,"-"),minus_minus:new Jn("minus_minus",fn.token,"--"),period:new Jn("period",fn.token,"."),plus:new Jn("plus",fn.token,"+"),plus_plus:new Jn("plus_plus",fn.token,"++"),or:new Jn("or",fn.token,"|"),or_or:new Jn("or_or",fn.token,"||"),paren_left:new Jn("paren_left",fn.token,"("),paren_right:new Jn("paren_right",fn.token,")"),semicolon:new Jn("semicolon",fn.token,";"),star:new Jn("star",fn.token,"*"),tilde:new Jn("tilde",fn.token,"~"),underscore:new Jn("underscore",fn.token,"_"),xor:new Jn("xor",fn.token,"^"),plus_equal:new Jn("plus_equal",fn.token,"+="),minus_equal:new Jn("minus_equal",fn.token,"-="),times_equal:new Jn("times_equal",fn.token,"*="),division_equal:new Jn("division_equal",fn.token,"/="),modulo_equal:new Jn("modulo_equal",fn.token,"%="),and_equal:new Jn("and_equal",fn.token,"&="),or_equal:new Jn("or_equal",fn.token,"|="),xor_equal:new Jn("xor_equal",fn.token,"^="),shift_right_equal:new Jn("shift_right_equal",fn.token,">>="),shift_left_equal:new Jn("shift_left_equal",fn.token,"<<=")},ei.storage_class=[hn.keywords.function,hn.keywords.private,hn.keywords.workgroup,hn.keywords.uniform,hn.keywords.storage],ei.access_mode=[hn.keywords.read,hn.keywords.write,hn.keywords.read_write],ei.sampler_type=[hn.keywords.sampler,hn.keywords.sampler_comparison],ei.sampled_texture_type=[hn.keywords.texture_1d,hn.keywords.texture_2d,hn.keywords.texture_2d_array,hn.keywords.texture_3d,hn.keywords.texture_cube,hn.keywords.texture_cube_array],ei.multisampled_texture_type=[hn.keywords.texture_multisampled_2d],ei.storage_texture_type=[hn.keywords.texture_storage_1d,hn.keywords.texture_storage_2d,hn.keywords.texture_storage_2d_array,hn.keywords.texture_storage_3d],ei.depth_texture_type=[hn.keywords.texture_depth_2d,hn.keywords.texture_depth_2d_array,hn.keywords.texture_depth_cube,hn.keywords.texture_depth_cube_array,hn.keywords.texture_depth_multisampled_2d],ei.texture_external_type=[hn.keywords.texture_external],ei.any_texture_type=[...hn.sampled_texture_type,...hn.multisampled_texture_type,...hn.storage_texture_type,...hn.depth_texture_type,...hn.texture_external_type],ei.texel_format=[hn.keywords.r8unorm,hn.keywords.r8snorm,hn.keywords.r8uint,hn.keywords.r8sint,hn.keywords.r16uint,hn.keywords.r16sint,hn.keywords.r16float,hn.keywords.rg8unorm,hn.keywords.rg8snorm,hn.keywords.rg8uint,hn.keywords.rg8sint,hn.keywords.r32uint,hn.keywords.r32sint,hn.keywords.r32float,hn.keywords.rg16uint,hn.keywords.rg16sint,hn.keywords.rg16float,hn.keywords.rgba8unorm,hn.keywords.rgba8unorm_srgb,hn.keywords.rgba8snorm,hn.keywords.rgba8uint,hn.keywords.rgba8sint,hn.keywords.bgra8unorm,hn.keywords.bgra8unorm_srgb,hn.keywords.rgb10a2unorm,hn.keywords.rg11b10float,hn.keywords.rg32uint,hn.keywords.rg32sint,hn.keywords.rg32float,hn.keywords.rgba16uint,hn.keywords.rgba16sint,hn.keywords.rgba16float,hn.keywords.rgba32uint,hn.keywords.rgba32sint,hn.keywords.rgba32float],ei.const_literal=[hn.tokens.int_literal,hn.tokens.uint_literal,hn.tokens.decimal_float_literal,hn.tokens.hex_float_literal,hn.keywords.true,hn.keywords.false],ei.literal_or_ident=[hn.tokens.ident,hn.tokens.int_literal,hn.tokens.uint_literal,hn.tokens.decimal_float_literal,hn.tokens.hex_float_literal],ei.element_count_expression=[hn.tokens.int_literal,hn.tokens.uint_literal,hn.tokens.ident],ei.template_types=[hn.keywords.vec2,hn.keywords.vec3,hn.keywords.vec4,hn.keywords.mat2x2,hn.keywords.mat2x3,hn.keywords.mat2x4,hn.keywords.mat3x2,hn.keywords.mat3x3,hn.keywords.mat3x4,hn.keywords.mat4x2,hn.keywords.mat4x3,hn.keywords.mat4x4,hn.keywords.atomic,hn.keywords.bitcast,...hn.any_texture_type],ei.attribute_name=[hn.tokens.ident,hn.keywords.block],ei.assignment_operators=[hn.tokens.equal,hn.tokens.plus_equal,hn.tokens.minus_equal,hn.tokens.times_equal,hn.tokens.division_equal,hn.tokens.modulo_equal,hn.tokens.and_equal,hn.tokens.or_equal,hn.tokens.xor_equal,hn.tokens.shift_right_equal,hn.tokens.shift_left_equal],ei.increment_operators=[hn.tokens.plus_plus,hn.tokens.minus_minus];class ti{constructor(e,t,n){this.type=e,this.lexeme=t,this.line=n}toString(){return this.lexeme}isTemplateType(){return-1!=ei.template_types.indexOf(this.type)}isArrayType(){return this.type==ei.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class ni{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!==e&&void 0!==e?e:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw"Invalid syntax at line ".concat(this._line);return this._tokens.push(new ti(ei.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if("\n"==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if("/"==e){if("/"==this._peekAhead()){for(;"\n"!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),"\n"==e)this._line++;else if("*"==e){if("/"==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else"/"==e&&"*"==this._peekAhead()&&(this._advance(),t++)}return!0}}let t=ei.none;for(;;){let n=this._findType(e);const i=this._peekAhead();if(">"==e&&(">"==i||"="==i)){let e=!1,t=this._tokens.length-1;for(let n=0;n<5&&t>=0;++n,--t)if(this._tokens[t].type===ei.tokens.less_than){t>0&&this._tokens[t-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(n),!0}if(n===ei.none){let i=e,r=0;const o=2;for(let e=0;e<o;++e)if(i+=this._peekAhead(e),n=this._findType(i),n!==ei.none){r=e;break}if(n===ei.none)return t!==ei.none&&(this._current--,this._addToken(t),!0);e=i,this._current+=r+1}if(t=n,this._isAtEnd())break;e+=this._advance()}return t!==ei.none&&(this._addToken(t),!0)}_findType(e){for(const t in ei.keywords){const n=ei.keywords[t];if(this._match(e,n.rule))return n}for(const t in ei.tokens){const n=ei.tokens[t];if(this._match(e,n.rule))return n}return ei.none}_match(e,t){if("string"===typeof t){if(t==e)return!0}else{const n=t.exec(e);if(n&&0==n.index&&n[0]==e)return!0}return!1}_isAtEnd(){return this._current>=this._source.length}_isWhitespace(e){return" "==e||"\t"==e||"\r"==e}_advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new ti(e,t,this._line))}}class ii{constructor(){this._tokens=[],this._current=0,this._context=new Qt}parse(e){this._initialize(e);let t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}return t}_initialize(e){if(e)if("string"==typeof e){const t=new ni(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,t){return console.error(e,t),{token:e,message:t,toString:function(){return"".concat(t)}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==ei.eof}_match(e){if(e instanceof Jn)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),t)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){let n=t.type;return-1!=e.indexOf(n)}return t.type==e}_advance(){return this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(ei.tokens.semicolon)&&!this._isAtEnd(););if(this._match(ei.keywords.alias)){const e=this._type_alias();return this._consume(ei.tokens.semicolon,"Expected ';'"),e}if(this._match(ei.keywords.enable)){const e=this._enable_directive();return this._consume(ei.tokens.semicolon,"Expected ';'"),e}const e=this._attribute();if(this._check(ei.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(ei.tokens.semicolon,"Expected ';'."),t}if(this._check(ei.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(ei.tokens.semicolon,"Expected ';'."),t}if(this._check(ei.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(ei.tokens.semicolon,"Expected ';'."),t}if(this._check(ei.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(ei.tokens.semicolon,"Expected ';'."),t}if(this._check(ei.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),t}if(this._check(ei.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),t}return null}_function_decl(){if(!this._match(ei.keywords.fn))return null;const e=this._consume(ei.tokens.ident,"Expected function name.").toString();this._consume(ei.tokens.paren_left,"Expected '(' for function arguments.");const t=[];if(!this._check(ei.tokens.paren_right))do{if(this._check(ei.tokens.paren_right))break;const e=this._attribute(),n=this._consume(ei.tokens.ident,"Expected argument name.").toString();this._consume(ei.tokens.colon,"Expected ':' for argument type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i,t.push(new qn(n,r,e)))}while(this._match(ei.tokens.comma));this._consume(ei.tokens.paren_right,"Expected ')' after function arguments.");let n=null;if(this._match(ei.tokens.arrow)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}const i=this._compound_statement();return new en(e,t,n,i)}_compound_statement(){const e=[];for(this._consume(ei.tokens.brace_left,"Expected '{' for block.");!this._check(ei.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(ei.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(ei.tokens.semicolon)&&!this._isAtEnd(););if(this._check(ei.keywords.if))return this._if_statement();if(this._check(ei.keywords.switch))return this._switch_statement();if(this._check(ei.keywords.loop))return this._loop_statement();if(this._check(ei.keywords.for))return this._for_statement();if(this._check(ei.keywords.while))return this._while_statement();if(this._check(ei.keywords.continuing))return this._continuing_statement();if(this._check(ei.keywords.static_assert))return this._static_assert_statement();if(this._check(ei.tokens.brace_left))return this._compound_statement();let e=null;return e=this._check(ei.keywords.return)?this._return_statement():this._check([ei.keywords.var,ei.keywords.let,ei.keywords.const])?this._variable_statement():this._match(ei.keywords.discard)?new Tn:this._match(ei.keywords.break)?new xn:this._match(ei.keywords.continue)?new An:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=e&&this._consume(ei.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(ei.keywords.static_assert))return null;let e=this._optional_paren_expression();return new tn(e)}_while_statement(){if(!this._match(ei.keywords.while))return null;let e=this._optional_paren_expression();const t=this._compound_statement();return new nn(e,t)}_continuing_statement(){if(!this._match(ei.keywords.continuing))return null;const e=this._compound_statement();return new rn(e)}_for_statement(){if(!this._match(ei.keywords.for))return null;this._consume(ei.tokens.paren_left,"Expected '('.");const e=this._check(ei.tokens.semicolon)?null:this._for_init();this._consume(ei.tokens.semicolon,"Expected ';'.");const t=this._check(ei.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(ei.tokens.semicolon,"Expected ';'.");const n=this._check(ei.tokens.paren_right)?null:this._for_increment();this._consume(ei.tokens.paren_right,"Expected ')'.");const i=this._compound_statement();return new on(e,t,n,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(ei.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),"Variable declaration expected.");let t=null;return this._match(ei.tokens.equal)&&(t=this._short_circuit_or_expression()),new sn(e.name,e.type,e.storage,e.access,t)}if(this._match(ei.keywords.let)){const e=this._consume(ei.tokens.ident,"Expected name for let.").toString();let t=null;if(this._match(ei.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(ei.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new ln(e,t,null,null,n)}if(this._match(ei.keywords.const)){const e=this._consume(ei.tokens.ident,"Expected name for const.").toString();let t=null;if(this._match(ei.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(ei.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new cn(e,t,null,null,n)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(ei.increment_operators))return this._current=e,null;const n=this._consume(ei.increment_operators,"Expected increment operator");return new gn(n.type===ei.tokens.plus_plus?un.increment:un.decrement,t)}_assignment_statement(){let e=null;if(this._check(ei.tokens.brace_right))return null;let t=this._match(ei.tokens.underscore);if(t||(e=this._unary_expression()),!t&&null==e)return null;const n=this._consume(ei.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new mn(dn.parse(n.lexeme),e,i)}_func_call_statement(){if(!this._check(ei.tokens.ident))return null;const e=this._current,t=this._consume(ei.tokens.ident,"Expected function name."),n=this._argument_expression_list();return null===n?(this._current=e,null):new _n(t.lexeme,n)}_loop_statement(){if(!this._match(ei.keywords.loop))return null;this._consume(ei.tokens.brace_left,"Expected '{' for loop.");const e=[];let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.push(n);else e.push(t);t=this._statement()}let n=null;return this._match(ei.keywords.continuing)&&(n=this._compound_statement()),this._consume(ei.tokens.brace_right,"Expected '}' for loop."),new vn(e,n)}_switch_statement(){if(!this._match(ei.keywords.switch))return null;const e=this._optional_paren_expression();this._consume(ei.tokens.brace_left,"Expected '{' for switch.");const t=this._switch_body();if(null==t||0==t.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(ei.tokens.brace_right,"Expected '}' for switch."),new yn(e,t)}_switch_body(){const e=[];if(this._match(ei.keywords.case)){const t=this._case_selectors();this._match(ei.tokens.colon),this._consume(ei.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(ei.tokens.brace_right,"Exected '}' for switch case."),e.push(new Kn(t,n))}if(this._match(ei.keywords.default)){this._match(ei.tokens.colon),this._consume(ei.tokens.brace_left,"Exected '{' for switch default.");const t=this._case_body();this._consume(ei.tokens.brace_right,"Exected '}' for switch default."),e.push(new Yn(t))}if(this._check([ei.keywords.default,ei.keywords.case])){const t=this._switch_body();e.push(t[0])}return e}_case_selectors(){var e,t,n,i;const r=[null!==(t=null===(e=this._shift_expression())||void 0===e?void 0:e.evaluate(this._context).toString())&&void 0!==t?t:""];for(;this._match(ei.tokens.comma);)r.push(null!==(i=null===(n=this._shift_expression())||void 0===n?void 0:n.evaluate(this._context).toString())&&void 0!==i?i:"");return r}_case_body(){if(this._match(ei.keywords.fallthrough))return this._consume(ei.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(ei.keywords.if))return null;const e=this._optional_paren_expression(),t=this._compound_statement();let n=[];this._match_elseif()&&(n=this._elseif_statement(n));let i=null;return this._match(ei.keywords.else)&&(i=this._compound_statement()),new bn(e,t,n,i)}_match_elseif(){return this._tokens[this._current].type===ei.keywords.else&&this._tokens[this._current+1].type===ei.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(new Zn(t,n)),this._match_elseif()&&this._elseif_statement(e),e}_return_statement(){if(!this._match(ei.keywords.return))return null;const e=this._short_circuit_or_expression();return new wn(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(ei.tokens.or_or);)e=new Hn(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(ei.tokens.and_and);)e=new Hn(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(ei.tokens.or);)e=new Hn(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(ei.tokens.xor);)e=new Hn(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(ei.tokens.and);)e=new Hn(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([ei.tokens.equal_equal,ei.tokens.not_equal])?new Hn(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([ei.tokens.less_than,ei.tokens.greater_than,ei.tokens.less_than_equal,ei.tokens.greater_than_equal]);)e=new Hn(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([ei.tokens.shift_left,ei.tokens.shift_right]);)e=new Hn(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([ei.tokens.plus,ei.tokens.minus]);)e=new Hn(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([ei.tokens.star,ei.tokens.forward_slash,ei.tokens.modulo]);)e=new Hn(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([ei.tokens.minus,ei.tokens.bang,ei.tokens.tilde,ei.tokens.star,ei.tokens.and])?new Wn(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(ei.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(ei.tokens.bracket_right,"Expected ']'.");const t=this._postfix_expression();return t&&(e.postfix=t),e}if(this._match(ei.tokens.period)){const e=this._consume(ei.tokens.ident,"Expected member name."),t=this._postfix_expression(),n=new On(e.lexeme);return t&&(n.postfix=t),n}return null}_getStruct(e){if(this._context.aliases.has(e)){return this._context.aliases.get(e).type}if(this._context.structs.has(e)){return this._context.structs.get(e)}return null}_primary_expression(){if(this._match(ei.tokens.ident)){const e=this._previous().toString();if(this._check(ei.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getStruct(e);return null!=n?new Nn(n,t):new Fn(e,t)}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return new Bn(e,t.value)}return new Dn(e)}if(this._match(ei.const_literal))return new Un(parseFloat(this._previous().toString()));if(this._check(ei.tokens.paren_left))return this._paren_expression();if(this._match(ei.keywords.bitcast)){this._consume(ei.tokens.less_than,"Expected '<'.");const e=this._type_decl();this._consume(ei.tokens.greater_than,"Expected '>'.");const t=this._paren_expression();return new zn(e,t)}const e=this._type_decl(),t=this._argument_expression_list();return new Gn(e,t)}_argument_expression_list(){if(!this._match(ei.tokens.paren_left))return null;const e=[];do{if(this._check(ei.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(ei.tokens.comma));return this._consume(ei.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(ei.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(ei.tokens.paren_right),new jn([e])}_paren_expression(){this._consume(ei.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(ei.tokens.paren_right,"Expected ')'."),new jn([e])}_struct_decl(){if(!this._match(ei.keywords.struct))return null;const e=this._consume(ei.tokens.ident,"Expected name for struct.").toString();this._consume(ei.tokens.brace_left,"Expected '{' for struct body.");const t=[];for(;!this._check(ei.tokens.brace_right);){const e=this._attribute(),n=this._consume(ei.tokens.ident,"Expected variable name.").toString();this._consume(ei.tokens.colon,"Expected ':' for struct member type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i),this._check(ei.tokens.brace_right)?this._match(ei.tokens.comma):this._consume(ei.tokens.comma,"Expected ',' for struct member."),t.push(new Qn(n,r,e))}this._consume(ei.tokens.brace_right,"Expected '}' after struct body.");const n=new Cn(e,t);return this._context.structs.set(e,n),n}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(ei.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(ei.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(ei.keywords.const))return null;const e=this._consume(ei.tokens.ident,"Expected variable name");let t=null;if(this._match(ei.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;if(this._match(ei.tokens.equal)){const e=this._short_circuit_or_expression();if(e instanceof Nn)n=e;else if(e instanceof Bn&&e.initializer instanceof Nn)n=e.initializer;else try{const t=e.evaluate(this._context);n=new Un(t)}catch(hn){n=e}}const i=new cn(e.toString(),t,"","",n);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(ei.keywords.let))return null;const e=this._consume(ei.tokens.ident,"Expected variable name");let t=null;if(this._match(ei.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;return this._match(ei.tokens.equal)&&(n=this._const_expression()),new ln(e.toString(),t,"","",n)}_const_expression(){if(this._match(ei.const_literal))return new On(this._previous().toString());const e=this._type_decl();this._consume(ei.tokens.paren_left,"Expected '('.");let t=[];for(;!this._check(ei.tokens.paren_right)&&(t.push(this._const_expression()),this._check(ei.tokens.comma));)this._advance();return this._consume(ei.tokens.paren_right,"Expected ')'."),new Nn(e,t)}_variable_decl(){if(!this._match(ei.keywords.var))return null;let e="",t="";this._match(ei.tokens.less_than)&&(e=this._consume(ei.storage_class,"Expected storage_class.").toString(),this._match(ei.tokens.comma)&&(t=this._consume(ei.access_mode,"Expected access_mode.").toString()),this._consume(ei.tokens.greater_than,"Expected '>'."));const n=this._consume(ei.tokens.ident,"Expected variable name");let i=null;if(this._match(ei.tokens.colon)){const e=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=e)}return new sn(n.toString(),i,e,t,null)}_override_decl(){if(!this._match(ei.keywords.override))return null;const e=this._consume(ei.tokens.ident,"Expected variable name");let t=null;if(this._match(ei.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return new an(e.toString(),t,null)}_enable_directive(){const e=this._consume(ei.tokens.ident,"identity expected.");return new En(e.toString())}_type_alias(){const e=this._consume(ei.tokens.ident,"identity expected.");this._consume(ei.tokens.equal,"Expected '=' for type alias.");let t=this._type_decl();if(null===t)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=new Sn(e.toString(),t);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([ei.tokens.ident,...ei.texel_format,ei.keywords.bool,ei.keywords.f32,ei.keywords.i32,ei.keywords.u32])){const e=this._advance(),t=e.toString();return this._context.structs.has(t)?this._context.structs.get(t):this._context.aliases.has(t)?this._context.aliases.get(t).type:new Rn(e.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(ei.template_types)){let e=this._advance().toString(),t=null,n=null;return this._match(ei.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(ei.tokens.comma)&&(n=this._consume(ei.access_mode,"Expected access_mode for pointer").toString()),this._consume(ei.tokens.greater_than,"Expected '>' for type.")),new Pn(e,t,n)}if(this._match(ei.keywords.ptr)){let e=this._previous().toString();this._consume(ei.tokens.less_than,"Expected '<' for pointer.");const t=this._consume(ei.storage_class,"Expected storage_class for pointer");this._consume(ei.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let i=null;return this._match(ei.tokens.comma)&&(i=this._consume(ei.access_mode,"Expected access_mode for pointer").toString()),this._consume(ei.tokens.greater_than,"Expected '>' for pointer."),new Ln(e,t.toString(),n,i)}const t=this._attribute();if(this._match(ei.keywords.array)){let e=null,n=-1;const i=this._previous();if(this._match(ei.tokens.less_than)){e=this._type_decl(),this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);let t="";if(this._match(ei.tokens.comma)){t=this._shift_expression().evaluate(this._context).toString()}this._consume(ei.tokens.greater_than,"Expected '>' for array."),n=t?parseInt(t):0}return new Mn(i.toString(),t,e,n)}return null}_texture_sampler_types(){if(this._match(ei.sampler_type))return new kn(this._previous().toString(),null,null);if(this._match(ei.depth_texture_type))return new kn(this._previous().toString(),null,null);if(this._match(ei.sampled_texture_type)||this._match(ei.multisampled_texture_type)){const e=this._previous();this._consume(ei.tokens.less_than,"Expected '<' for sampler type.");const t=this._type_decl();return this._consume(ei.tokens.greater_than,"Expected '>' for sampler type."),new kn(e.toString(),t,null)}if(this._match(ei.storage_texture_type)){const e=this._previous();this._consume(ei.tokens.less_than,"Expected '<' for sampler type.");const t=this._consume(ei.texel_format,"Invalid texel format.").toString();this._consume(ei.tokens.comma,"Expected ',' after texel format.");const n=this._consume(ei.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(ei.tokens.greater_than,"Expected '>' for sampler type."),new kn(e.toString(),t,n)}return null}_attribute(){let e=[];for(;this._match(ei.tokens.attr);){const t=this._consume(ei.attribute_name,"Expected attribute name"),n=new $n(t.toString(),null);if(this._match(ei.tokens.paren_left)){if(n.value=this._consume(ei.literal_or_ident,"Expected attribute value").toString(),this._check(ei.tokens.comma)){this._advance();do{const e=this._consume(ei.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(ei.tokens.comma))}this._consume(ei.tokens.paren_right,"Expected ')'")}e.push(n)}for(;this._match(ei.tokens.attr_left);){if(!this._check(ei.tokens.attr_right))do{const t=this._consume(ei.attribute_name,"Expected attribute name"),n=new $n(t.toString(),null);if(this._match(ei.tokens.paren_left)){if(n.value=[this._consume(ei.literal_or_ident,"Expected attribute value").toString()],this._check(ei.tokens.comma)){this._advance();do{const e=this._consume(ei.literal_or_ident,"Expected attribute value").toString();n.value.push(e)}while(this._match(ei.tokens.comma))}this._consume(ei.tokens.paren_right,"Expected ')'")}e.push(n)}while(this._match(ei.tokens.comma));this._consume(ei.tokens.attr_right,"Expected ']]' after attribute declarations")}return 0==e.length?null:e}}class ri{constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class oi{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class si extends ri{constructor(e,t){super(e,t),this.members=[],this.align=0}get isStruct(){return!0}}class ai extends ri{constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}}class li extends ri{constructor(e,t,n,i){super(e,n),this.format=t,this.access=i}get isTemplate(){return!0}}!function(e){e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"}(pn||(pn={}));class ci{constructor(e,t,n,i,r,o,s){this.name=e,this.type=t,this.group=n,this.binding=i,this.attributes=r,this.resourceType=o,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class ui{constructor(e,t){this.name=e,this.type=t}}class di{constructor(e,t){this.align=e,this.size=t}}class hi{constructor(e,t,n,i){this.name=e,this.type=t,this.locationType=n,this.location=i,this.interpolation=null}}class fi{constructor(e,t,n,i){this.name=e,this.type=t,this.locationType=n,this.location=i}}class pi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.stage=null,this.inputs=[],this.outputs=[],this.name=e,this.stage=t}}class gi{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class mi{constructor(e,t,n,i){this.name=e,this.type=t,this.attributes=n,this.id=i}}class _i{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new gi,this._types=new Map,e&&this.update(e)}_isStorageTexture(e){return"texture_storage_1d"==e.name||"texture_storage_2d"==e.name||"texture_storage_2d_array"==e.name||"texture_storage_3d"==e.name}update(e){const t=(new ii).parse(e);for(const n of t)if(n instanceof Cn){const e=this._getTypeInfo(n,null);e instanceof si&&this.structs.push(e)}else if(n instanceof Sn)this.aliases.push(this._getAliasInfo(n));else if(n instanceof an){const e=n,t=this._getAttributeNum(e.attributes,"id",0),i=null!=e.type?this._getTypeInfo(e.type,e.attributes):null;this.overrides.push(new mi(e.name,i,e.attributes,t))}else if(this._isUniformVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=new ci(e.name,r,t,i,e.attributes,pn.Uniform,e.access);this.uniforms.push(o)}else if(this._isStorageVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new ci(e.name,r,t,i,e.attributes,o?pn.StorageTexture:pn.Storage,e.access);this.storage.push(s)}else if(this._isTextureVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new ci(e.name,r,t,i,e.attributes,o?pn.StorageTexture:pn.Texture,e.access);o?this.storage.push(s):this.textures.push(s)}else if(this._isSamplerVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=new ci(e.name,r,t,i,e.attributes,pn.Sampler,e.access);this.samplers.push(o)}else if(n instanceof en){const e=this._getAttribute(n,"vertex"),t=this._getAttribute(n,"fragment"),i=this._getAttribute(n,"compute"),r=e||t||i;if(r){const e=new pi(n.name,r.name);e.inputs=this._getInputs(n.args),e.outputs=this._getOutputs(n.returnType),this.entry[r.name].push(e)}}else;}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.storage){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.textures){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.samplers){t(n.group,n.binding);e[n.group][n.binding]=n}return e}_getOutputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===t&&(t=[]),e instanceof Cn)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof Cn)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==e){const i=this._getTypeInfo(n.type,n.type.attributes),r=this._parseInt(e.value),o=new fi(n.name,i,e.name,r);t.push(o)}}}_getOutputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getTypeInfo(e,e.attributes),i=this._parseInt(t.value);return new fi("",n,t.name,i)}return null}_getInputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0===t&&(t=[]);for(const n of e)if(n.type instanceof Cn)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof Cn)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getAttribute(e,"interpolation"),i=this._getTypeInfo(e.type,e.attributes),r=this._parseInt(t.value),o=new hi(e.name,i,t.name,r);return null!==n&&(o.interpolation=this._parseString(n.value)),o}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new ui(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,t){if(this._types.has(e))return this._types.get(e);if(e instanceof Mn){const n=e,i=this._getTypeInfo(n.format,n.attributes),r=new ai(n.name,t);return r.format=i,r.count=n.count,this._types.set(e,r),this._updateTypeInfo(r),r}if(e instanceof Cn){const n=e,i=new si(n.name,t);for(const e of n.members){const t=this._getTypeInfo(e.type,e.attributes);i.members.push(new oi(e.name,t,e.attributes))}return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof kn){const n=e,i=n.format instanceof Rn,r=n.format?i?this._getTypeInfo(n.format,null):new ri(n.format,null):null,o=new li(n.name,r,t,n.access);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof Pn){const n=e,i=n.format?this._getTypeInfo(n.format,null):null,r=new li(n.name,i,t,n.access);return this._types.set(e,r),this._updateTypeInfo(r),r}const n=new ri(e.name,t);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var t,n;const i=this._getTypeSize(e);if(e.size=null!==(t=null===i||void 0===i?void 0:i.size)&&void 0!==t?t:0,e instanceof ai){const t=this._getTypeSize(e.format);e.stride=null!==(n=null===t||void 0===t?void 0:t.size)&&void 0!==n?n:0,this._updateTypeInfo(e.format)}e instanceof si&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,i=0,r=0,o=0;for(let s=0,a=e.members.length;s<a;++s){const a=e.members[s],l=this._getTypeSize(a);if(!l)continue;null!==(t=this._getAlias(a.type.name))&&void 0!==t||a.type;const c=l.align,u=l.size;n=this._roundUp(c,n+i),i=u,r=n,o=Math.max(o,c),a.offset=n,a.size=u,this._updateTypeInfo(a.type)}e.size=this._roundUp(o,r+i),e.align=o}_getTypeSize(e){var t;if(null===e||void 0===e)return null;const n=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof oi&&(e=e.type),e instanceof ri){const t=this._getAlias(e.name);null!==t&&(e=t)}{const t=_i._typeInfo[e.name];if(void 0!==t){const r="f16"===e.format?2:1;return new di(Math.max(i,t.align/r),Math.max(n,t.size/r))}}{const t=_i._typeInfo[e.name.substring(0,e.name.length-1)];if(t){const r="h"===e.name[e.name.length-1]?2:1;return new di(Math.max(i,t.align/r),Math.max(n,t.size/r))}}if(e instanceof ai){let r=e,o=8,s=8;const a=this._getTypeSize(r.format);null!==a&&(s=a.size,o=a.align);return s=r.count*this._getAttributeNum(null!==(t=null===e||void 0===e?void 0:e.attributes)&&void 0!==t?t:null,"stride",this._roundUp(o,s)),n&&(s=n),new di(Math.max(i,o),Math.max(n,s))}if(e instanceof si){let t=0,r=0,o=0,s=0,a=0;for(const n of e.members){const e=this._getTypeSize(n.type);null!==e&&(t=Math.max(e.align,t),o=this._roundUp(e.align,o+s),s=e.size,a=o)}return r=this._roundUp(t,a+s),new di(Math.max(i,t),Math.max(n,r))}return null}_isUniformVar(e){return e instanceof sn&&"uniform"==e.storage}_isStorageVar(e){return e instanceof sn&&"storage"==e.storage}_isTextureVar(e){return e instanceof sn&&null!==e.type&&-1!=_i._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof sn&&null!==e.type&&-1!=_i._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const i=n.attributes;for(let r of i)if(r.name==t)return r;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let i of e)if(i.name==t){let e=null!==i&&null!==i.value?i.value:n;return e instanceof Array&&(e=e[0]),"number"===typeof e?e:"string"===typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}function vi(e){const t={attributes:[],bindings:[]};let n;try{n=function(e){try{return new _i(e)}catch(t){if(t instanceof Error)throw t;let e="WGSL parse error";throw"object"===typeof t&&null!==t&&void 0!==t&&t.message&&(e+=": ".concat(t.message," ")),"object"===typeof t&&null!==t&&void 0!==t&&t.token&&(e+=t.token.line||""),new Error(e,{cause:t})}}(e)}catch(o){return Ft.error(o.message)(),t}for(const s of n.uniforms){const e=[];for(const t of s.type.members)e.push({name:t.name,type:yi(t.type)});t.bindings.push({type:"uniform",name:s.name,location:s.binding,group:s.group,members:e})}const i=n.entry.vertex[0],r=(null===i||void 0===i?void 0:i.inputs.length)||0;for(let s=0;s<r;s++){const e=i.inputs[s];if("location"===e.locationType){const n=yi(e.type);t.attributes.push({name:e.name,location:e.location,type:n})}}return t}function yi(e){return e.format?"".concat(e.name,"<").concat(e.format.name,">"):e.name}function bi(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}_i._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},_i._textureTypes=ei.any_texture_type.map((e=>e.name)),_i._samplerTypes=ei.sampler_type.map((e=>e.name));const wi={number:{type:"number",validate:(e,t)=>Number.isFinite(e)&&"object"===typeof t&&(void 0===t.max||e<=t.max)&&(void 0===t.min||e>=t.min)},array:{type:"array",validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function Ei(e){let t=Si(e);if("object"!==t)return{value:e,...wi[t],type:t};if("object"===typeof e)return e?void 0!==e.type?{...e,...wi[e.type],type:e.type}:void 0===e.value?{type:"object",value:e}:(t=Si(e.value),{...e,...wi[t],type:t}):{type:"object",value:null};throw new Error("props")}function Si(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const Ti={vertex:"#ifdef MODULE_LOGDEPTH\nlogdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\ngl_FragColor = material_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_LIGHTING\ngl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_FOG\ngl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_PICKING\ngl_FragColor = picking_filterHighlightColor(gl_FragColor);\ngl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n#ifdef MODULE_LOGDEPTH\nlogdepth_setFragDepth();\n#endif\n"},xi=/void\s+main\s*\([^)]*\)\s*\{\n?/,Ai=/}\n?[^{}]*$/,Ri=[],Ci="__LUMA_INJECT_DECLARATIONS__";function Pi(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function Li(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="vertex"===t;for(const o in n){const t=n[o];t.sort(((e,t)=>e.order-t.order)),Ri.length=t.length;for(let e=0,n=t.length;e<n;++e)Ri[e]=t[e].injection;const i="".concat(Ri.join("\n"),"\n");switch(o){case"vs:#decl":r&&(e=e.replace(Ci,i));break;case"vs:#main-start":r&&(e=e.replace(xi,(e=>e+i)));break;case"vs:#main-end":r&&(e=e.replace(Ai,(e=>i+e)));break;case"fs:#decl":r||(e=e.replace(Ci,i));break;case"fs:#main-start":r||(e=e.replace(xi,(e=>e+i)));break;case"fs:#main-end":r||(e=e.replace(Ai,(e=>i+e)));break;default:e=e.replace(o,(e=>e+i))}}return e=e.replace(Ci,""),i&&(e=e.replace(/\}\s*$/,(e=>e+Ti[t]))),e}let Mi=1;class ki{static instantiateModules(e){return e.map((e=>{if(e instanceof ki)return e;bi("string"!==typeof e,"Shader module use by name is deprecated. Import shader module '".concat(JSON.stringify(e),"' and use it directly.")),e.name||(console.warn("shader module has no name"),e.name="shader-module-".concat(Mi++));const t=new ki(e);return t.dependencies=ki.instantiateModules(e.dependencies||[]),t}))}constructor(e){H(this,"name",void 0),H(this,"vs",void 0),H(this,"fs",void 0),H(this,"getModuleUniforms",void 0),H(this,"dependencies",void 0),H(this,"deprecations",void 0),H(this,"defines",void 0),H(this,"injections",void 0),H(this,"uniforms",{}),H(this,"uniformTypes",{});const{name:t,vs:n,fs:i,dependencies:r=[],uniformTypes:o={},uniformPropTypes:s={},getUniforms:a,deprecations:l=[],defines:c={},inject:u={}}=e;bi("string"===typeof t),this.name=t,this.vs=n,this.fs=i,this.getModuleUniforms=a,this.dependencies=ki.instantiateModules(r),this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=function(e){const t={vertex:{},fragment:{}};for(const n in e){let i=e[n];"string"===typeof i&&(i={order:0,injection:i}),t[Pi(n)][n]=i}return t}(u),this.uniformTypes=o,s&&(this.uniforms=function(e){const t={};for(const[n,i]of Object.entries(e))t[n]=Ei(i);return t}(s))}getModuleSource(e){let t;switch(e){case"vertex":t=this.vs||"";break;case"fragment":t=this.fs||"";break;default:bi(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return"// ----- MODULE ".concat(this.name," ---------------\n\n#define MODULE_").concat(n,"\n").concat(t,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):function(e,t,n){const i={};for(const[r,o]of Object.entries(t))e&&r in e&&!o.private?(o.validate&&bi(o.validate(e[r],o),"".concat(n,": invalid ").concat(r)),i[r]=e[r]):i[r]=o.value;return i}(e,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{var i;null!==(i=n.regex)&&void 0!==i&&i.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp("\\b".concat(e.old,"\\("));else e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))})),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},n=this.uniforms;for(const i in n){const r=n[i];i in e&&!r.private?(r.validate&&bi(r.validate(e[i],r),"".concat(this.name,": invalid ").concat(i)),t[i]=e[i]):t[i]=r.value}return t}}function Ii(e){if(e.source&&"webgpu"===e.platformInfo.type){return{...e,vs:void 0,fs:void 0}}if(!e.vs)throw new Error("no vertex shader");const t=Oi(e.platformInfo,e.vs);let n;return e.fs&&(n=Oi(e.platformInfo,e.fs)),{...e,vs:t,fs:n}}function Oi(e,t){if("string"===typeof t)return t;if("webgpu"===e.type){if(null!==t&&void 0!==t&&t.wgsl)return t.wgsl;throw new Error("WebGPU does not support GLSL shaders")}if(null!==t&&void 0!==t&&t.glsl)return t.glsl;throw new Error("WebGL does not support WGSL shaders")}function Ni(e){return Fi(ki.instantiateModules(e))}function Fi(e){const t={},n={};return Di({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}function Di(e){const{modules:t,level:n,moduleMap:i,moduleDepth:r}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of t)o.dependencies&&Di({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}const Bi=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Ui=[...Bi,[ji("attribute"),"in $1"],[ji("varying"),"out $1"]],zi=[...Bi,[ji("varying"),"in $1"]];function Gi(e,t){for(const[n,i]of t)e=e.replace(n,i);return e}function ji(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}function Vi(e,t){let n="";for(const i in e){const r=e[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),t[i]){const e=t[i];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+="  ".concat(t.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}function Wi(e){const t={vertex:{},fragment:{}};for(const n of e){let e,i;"string"!==typeof n?(e=n,i=e.hook):(e={},i=n),i=i.trim();const[r,o]=i.split(":"),s=i.replace(/\(.+/,""),a=Object.assign(e,{signature:o});switch(r){case"vs":t.vertex[s]=a;break;case"fs":t.fragment[s]=a;break;default:throw new Error(r)}}return t}function Hi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function Xi(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}if(100!==t&&300!==t)throw new Error("Invalid GLSL version ".concat(t));return t}const Ki="\n\n".concat(Ci,"\n"),Yi="precision highp float;\n";function qi(e,t){const{source:n,stage:i,modules:r,hookFunctions:o=[],inject:s={},log:a}=t;bi("string"===typeof n,"shader source must be a string");const l=n;let c="";const u=Wi(o),d={},h={},f={};for(const g in s){const e="string"===typeof s[g]?{injection:s[g],order:0}:s[g],t=/^(v|f)s:(#)?([\w-]+)$/.exec(g);if(t){const n=t[2],i=t[3];n?"decl"===i?h[g]=[e]:f[g]=[e]:d[g]=[e]}else f[g]=[e]}const p="webgpu"!==e.type?r:[];for(const g of p){a&&g.checkDeprecations(l,a);c+=g.getModuleSource(i,"wgsl");const e=g.injections[i];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?h:f;i[t]=i[t]||[],i[t].push(e[t])}else d[t]=d[t]||[],d[t].push(e[t])}}return c+=Ki,c=Li(c,i,h),c+=Vi(u[i],d),c+=l,c=Li(c,i,f),c}function Zi(e,t){const{id:n,source:i,stage:r,language:o="glsl",modules:s,defines:a={},hookFunctions:l=[],inject:c={},prologue:u=!0,log:d}=t;bi("string"===typeof i,"shader source must be a string");const h="glsl"===o?function(e,t){return{name:Hi(e,t),language:"glsl",version:Xi(e)}}(i).version:-1,f=e.shaderLanguageVersion,p=100===h?"#version 100":"#version 300 es",g=i.split("\n").slice(1).join("\n"),m={};s.forEach((e=>{Object.assign(m,e.getDefines())})),Object.assign(m,a);let _="";switch(o){case"wgsl":break;case"glsl":_=u?"".concat(p,"\n\n// ----- PROLOGUE -------------------------\n").concat(function(e){const{id:t,source:n,stage:i}=e,r=t&&-1===n.indexOf("SHADER_NAME");return r?"\n#define SHADER_NAME ".concat(t,"_").concat(i,"\n\n"):""}({id:n,source:i,stage:r}),"\n","#define SHADER_TYPE_".concat(r.toUpperCase()),"\n").concat(function(e){switch(null===e||void 0===e?void 0:e.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat("fragment"===r?Yi:"","\n\n// ----- APPLICATION DEFINES -------------------------\n\n").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const n in e){const i=e[n];(i||Number.isFinite(i))&&(t+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}return t}(m),"\n\n"):"".concat(p,"\n")}const v=Wi(l),y={},b={},w={};for(const E in c){const e="string"===typeof c[E]?{injection:c[E],order:0}:c[E],t=/^(v|f)s:(#)?([\w-]+)$/.exec(E);if(t){const n=t[2],i=t[3];n?"decl"===i?b[E]=[e]:w[E]=[e]:y[E]=[e]}else w[E]=[e]}for(const E of s){d&&E.checkDeprecations(g,d);_+=E.getModuleSource(r);const e=E.injections[r];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?b:w;i[t]=i[t]||[],i[t].push(e[t])}else y[t]=y[t]||[],y[t].push(e[t])}}return _+="// ----- MAIN SHADER SOURCE -------------------------",_+=Ki,_=Li(_,r,b),_+=Vi(v[r],y),_+=g,_=Li(_,r,w),"glsl"===o&&h!==f&&(_=function(e,t){var n;if(300!==Number((null===(n=e.match(/^#version[ \t]+(\d+)/m))||void 0===n?void 0:n[1])||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return Gi(e,Ui);case"fragment":return Gi(e,zi);default:throw new Error(t)}}(_,r)),_.trim()}function Qi(e){return function(t){const n={};for(const i of e){const e=i.getUniforms(t,n);Object.assign(n,e)}return n}}class $i{constructor(){H(this,"_hookFunctions",[]),H(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return $i.defaultShaderAssembler=$i.defaultShaderAssembler||new $i,$i.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find((t=>t.name===("string"===typeof e?e:e.name)))||this._defaultModules.push(e)}removeDefaultModule(e){const t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t))}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e)}assembleShader(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,i=Ii(e),r=function(e){const t=Ni(e.modules||[]);return{source:qi(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:Qi(t)}}({platformInfo:e.platformInfo,...i,modules:t,hookFunctions:n});return{...r,modules:t}}assembleShaderPair(e){const t=Ii(e),n=this._getModuleList(e.modules),i=this._hookFunctions,{platformInfo:r}=e,o="wgsl"===e.platformInfo.shaderLanguage?function(e){const t=Ni(e.modules||[]);return{vs:qi(e.platformInfo,{...e,source:e.vs,stage:"vertex",modules:t}),fs:qi(e.platformInfo,{...e,source:e.fs,stage:"fragment",modules:t}),getUniforms:Qi(t)}}({platformInfo:r,...t,modules:n,hookFunctions:i}):function(e){const{vs:t,fs:n}=e,i=Ni(e.modules||[]);return{vs:Zi(e.platformInfo,{...e,source:t,stage:"vertex",modules:i}),fs:Zi(e.platformInfo,{...e,source:n,stage:"fragment",modules:i}),getUniforms:Qi(i)}}({platformInfo:r,...t,modules:n,hookFunctions:i});return{...o,modules:n}}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let r=0,o=this._defaultModules.length;r<o;++r){const e=this._defaultModules[r],o=e.name;t[i++]=e,n[o]=!0}for(let r=0,o=e.length;r<o;++r){const o=e[r],s=o.name;n[s]||(t[i++]=o,n[s]=!0)}return t.length=i,ki.instantiateModules(t)}}H($i,"defaultShaderAssembler",void 0);class Ji{constructor(e){H(this,"id",void 0),H(this,"userData",{}),H(this,"topology",void 0),H(this,"bufferLayout",[]),H(this,"vertexCount",void 0),H(this,"indices",void 0),H(this,"attributes",void 0),this.id=e.id||K("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&St(this.indices.usage===Z.INDEX)}destroy(){var e;null===(e=this.indices)||void 0===e||e.destroy();for(const t of Object.values(this.attributes))t.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(e){return e.byteLength/12}}function er(e,t){if(t instanceof Ji)return t;const n=function(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:Z.INDEX,data:n})}(e,t),{attributes:i,bufferLayout:r}=function(e,t){const n=[],i={};for(const[o,s]of Object.entries(t.attributes)){let t=o;switch(o){case"POSITION":t="positions";break;case"NORMAL":t="normals";break;case"TEXCOORD_0":t="texCoords";break;case"COLOR_0":t="colors"}i[t]=e.createBuffer({data:s.value,id:"".concat(o,"-buffer")});const{value:r,size:a,normalized:l}=s;n.push({name:t,format:xe(r,a,l)})}const r=t._calculateVertexCount(t.attributes,t.indices);return{attributes:i,bufferLayout:n,vertexCount:r}}(e,t);return new Ji({topology:t.topology||"triangle-list",bufferLayout:r,vertexCount:t.vertexCount,indices:n,attributes:i})}class tr{constructor(e){H(this,"modules",void 0),H(this,"moduleUniforms",void 0),H(this,"moduleBindings",void 0),H(this,"moduleUniformsChanged",void 0);const t=Ni(Object.values(e).filter((e=>e.dependencies)));for(const n of t)e[n.name]=n;Ft.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[n,i]of Object.entries(e)){const e=n;this.moduleUniforms[e]=i.defaultUniforms||{},this.moduleBindings[e]={}}}destroy(){}setProps(e){for(const n of Object.keys(e)){var t;const i=n,r=e[i],o=this.modules[i];if(!o){Ft.warn("Module ".concat(n," not found"))();continue}const s=this.moduleUniforms[i],a=(null===(t=o.getUniforms)||void 0===t?void 0:t.call(o,r,this.moduleUniforms[i]))||r;this.moduleUniforms[i]={...s,...a}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const e={};for(const t of Object.values(this.moduleBindings))Object.assign(e,t);return e}getDebugTable(){const e={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[r,o]of Object.entries(i)){var t;e["".concat(n,".").concat(r)]={type:null===(t=this.modules[n].uniformTypes)||void 0===t?void 0:t[r],value:String(o)}}return e}}class nr extends q{get[Symbol.toStringTag](){return"ComputePipeline"}constructor(e,t){super(e,t,nr.defaultProps),H(this,"hash","")}}H(nr,"defaultProps",{...q.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});class ir{static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new ir(e),e._lumaData.defaultPipelineFactory}constructor(e){H(this,"device",void 0),H(this,"_hashCounter",0),H(this,"_hashes",{}),H(this,"_renderPipelineCache",{}),H(this,"_computePipelineCache",{}),this.device=e}createRenderPipeline(e){const t={...Ut.defaultProps,...e},n=this._hashRenderPipeline(t);if(!this._renderPipelineCache[n]){const e=this.device.createRenderPipeline({...t,id:t.id?"".concat(t.id,"-cached"):void 0});e.hash=n,this._renderPipelineCache[n]={pipeline:e,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const t={...nr.defaultProps,...e},n=this._hashComputePipeline(t);if(!this._computePipelineCache[n]){const e=this.device.createComputePipeline({...t,id:t.id?"".concat(t.id,"-cached"):void 0});e.hash=n,this._computePipelineCache[n]={pipeline:e,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const t=e.hash,n=e instanceof nr?this._computePipelineCache:this._renderPipelineCache;n[t].useCount--,0===n[t].useCount&&(n[t].pipeline.destroy(),delete n[t])}_hashComputePipeline(e){const t=this._getHash(e.shader.source);return"".concat(t)}_hashRenderPipeline(e){const t=this._getHash(e.vs.source),n=e.fs?this._getHash(e.fs.source):0,i=this._getHash(JSON.stringify(e.bufferLayout));if("webgl"===this.device.type)return"".concat(t,"/").concat(n,"V").concat("-","BL").concat(i);{const r=this._getHash(JSON.stringify(e.parameters));return"".concat(t,"/").concat(n,"V").concat("-","T").concat(e.topology,"P").concat(r,"BL").concat(i)}}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}}function rr(e,t,n,i){if(null!==i&&void 0!==i&&i.inlineSource){const i=function(e,t,n){let i="";for(let r=t-2;r<=t;r++){const o=e[r-1];void 0!==o&&(i+=or(o,t,n))}return i}(t,n),r=e.linePos>0?"".concat(" ".repeat(e.linePos+5),"^^^\n"):"";return"\n".concat(i).concat(r).concat(e.type.toUpperCase(),": ").concat(e.message,"\n\n")}return null!==i&&void 0!==i&&i.html?"<div class='luma-compiler-log-error' style=\"color:red;\"><b> ".concat(e.type.toUpperCase(),": ").concat(e.message,"</b></div>"):"".concat(e.type.toUpperCase(),": ").concat(e.message)}function or(e,t,n){const i=null!==n&&void 0!==n&&n.html?e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):e;return"".concat(function(e,t){let n="";for(let i=e.length;i<t;++i)n+=" ";return n+e}(String(t),4),": ").concat(i).concat(null!==n&&void 0!==n&&n.html?"<br/>":"\n")}function sr(e,t){return{name:ar(e,t),language:"glsl",version:lr(e)}}function ar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}function lr(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}H(ir,"defaultProps",{...Ut.defaultProps});class cr extends q{get[Symbol.toStringTag](){return"Shader"}constructor(e,t){super(e,{id:ur(t),...t},cr.defaultProps),H(this,"stage",void 0),H(this,"source",void 0),H(this,"compilationStatus","pending"),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.debug){case"never":return;case"errors":if("success"===this.compilationStatus)return}const e=await this.getCompilationInfo();"warnings"===this.props.debug&&0===(null===e||void 0===e?void 0:e.length)||this._displayShaderLog(e)}_displayShaderLog(e){var t,n;if("undefined"===typeof document||null===(t=document)||void 0===t||!t.createElement)return;const i=sr(this.source).name,r="".concat(this.stage," ").concat(i);let o=function(e,t,n){let i="";const r=t.split(/\r?\n/),o=e.slice().sort(((e,t)=>e.lineNum-t.lineNum));switch((null===n||void 0===n?void 0:n.showSourceCode)||"no"){case"all":let t=0;for(let e=1;e<=r.length;e++)for(i+=or(r[e-1],e,n);o.length>t&&o[t].lineNum===e;){const e=o[t++];i+=rr(e,r,e.lineNum,{...n,inlineSource:!1})}return i;case"issues":case"no":for(const o of e)i+=rr(o,r,o.lineNum,{inlineSource:"no"!==(null===n||void 0===n?void 0:n.showSourceCode)});return i}}(e,this.source,{showSourceCode:"all",html:!0});const s=this.getTranslatedSource();s&&(o+='<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>'.concat(s,"</pre></code>"));const a=document.createElement("Button");a.innerHTML="\n<h1>Shader Compilation Error in ".concat(r,'</h1><br /><br />\n<code style="user-select:text;"><pre>\n').concat(o,"\n</pre></code>"),a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a);const l=document.getElementsByClassName("luma-compiler-log-error");null!==(n=l[0])&&void 0!==n&&n.scrollIntoView&&l[0].scrollIntoView(),a.onclick=()=>{const e="data:text/plain,".concat(encodeURIComponent(this.source));navigator.clipboard.writeText(e)}}}function ur(e){return sr(e.source).name||e.id||K("unnamed ".concat(e.stage,"-shader"))}H(cr,"defaultProps",{...q.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});class dr{static getDefaultShaderFactory(e){var t;return(t=e._lumaData).defaultShaderFactory||(t.defaultShaderFactory=new dr(e)),e._lumaData.defaultShaderFactory}constructor(e){H(this,"device",void 0),H(this,"_cache",{}),this.device=e}createShader(e){const t=this._hashShader(e);let n=this._cache[t];if(!n){const i=this.device.createShader({...e,id:e.id?"".concat(e.id,"-cached"):void 0});this._cache[t]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(e){const t=this._hashShader(e),n=this._cache[t];n&&(n.useCount--,0===n.useCount&&(delete this._cache[t],n.shader.destroy()))}_hashShader(e){return"".concat(e.stage,":").concat(e.source)}}H(dr,"defaultProps",{...cr.defaultProps});let hr=null,fr=null;class pr{constructor(e,t){var n,i,r;H(this,"device",void 0),H(this,"id",void 0),H(this,"source",void 0),H(this,"vs",void 0),H(this,"fs",void 0),H(this,"pipelineFactory",void 0),H(this,"shaderFactory",void 0),H(this,"userData",{}),H(this,"parameters",void 0),H(this,"topology",void 0),H(this,"bufferLayout",void 0),H(this,"isInstanced",void 0),H(this,"instanceCount",0),H(this,"vertexCount",void 0),H(this,"indexBuffer",null),H(this,"bufferAttributes",{}),H(this,"constantAttributes",{}),H(this,"bindings",{}),H(this,"uniforms",{}),H(this,"vertexArray",void 0),H(this,"transformFeedback",null),H(this,"pipeline",void 0),H(this,"shaderInputs",void 0),H(this,"_uniformStore",void 0),H(this,"_attributeInfos",{}),H(this,"_gpuGeometry",null),H(this,"_getModuleUniforms",void 0),H(this,"props",void 0),H(this,"_pipelineNeedsUpdate","newly created"),H(this,"_needsRedraw","initializing"),H(this,"_destroyed",!1),H(this,"_lastDrawTimestamp",-1),H(this,"_lastLogTime",0),H(this,"_logOpen",!1),H(this,"_drawCount",0),this.props={...pr.defaultProps,...t},t=this.props,this.id=t.id||K("model"),this.device=e,Object.assign(this.userData,t.userData);const o=Object.fromEntries((null===(n=this.props.modules)||void 0===n?void 0:n.map((e=>[e.name,e])))||[]);this.setShaderInputs(t.shaderInputs||new tr(o));const s=function(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}(e),a=((null===(i=this.props.modules)||void 0===i?void 0:i.length)>0?this.props.modules:null===(r=this.shaderInputs)||void 0===r?void 0:r.getModules())||[];if("webgpu"===this.device.type&&this.props.source){var l;(l=this.props).shaderLayout||(l.shaderLayout=vi(this.props.source));const{source:e,getUniforms:t}=this.props.shaderAssembler.assembleShader({platformInfo:s,...this.props,modules:a});this.source=e,this._getModuleUniforms=t}else{const{vs:e,fs:t,getUniforms:n}=this.props.shaderAssembler.assembleShaderPair({platformInfo:s,...this.props,modules:a});this.vs=e,this.fs=t,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,t.geometry&&this.setGeometry(t.geometry),this.pipelineFactory=t.pipelineFactory||ir.getDefaultPipelineFactory(this.device),this.shaderFactory=t.shaderFactory||dr.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in t&&(this.isInstanced=t.isInstanced),t.instanceCount&&this.setInstanceCount(t.instanceCount),t.vertexCount&&this.setVertexCount(t.vertexCount),t.indexBuffer&&this.setIndexBuffer(t.indexBuffer),t.attributes&&this.setAttributes(t.attributes),t.constantAttributes&&this.setConstantAttributes(t.constantAttributes),t.bindings&&this.setBindings(t.bindings),t.uniforms&&this.setUniforms(t.uniforms),t.moduleSettings&&this.updateModuleSettings(t.moduleSettings),t.transformFeedback&&(this.transformFeedback=t.transformFeedback),Object.seal(this)}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),null===(e=this._gpuGeometry)||void 0===e||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){let t;this.predraw();try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),Y(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,i=n?n.byteLength/("uint32"===n.indexType?4:2):void 0;t=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(e),t?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",t}setGeometry(e){var t;null===(t=this._gpuGeometry)||void 0===t||t.destroy();const n=e&&er(this.device,e);n&&(this.setTopology(n.topology||"triangle-list"),this.bufferLayout=gr(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)),this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){this.bufferLayout=this._gpuGeometry?gr(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){zt(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,void 0===this.isInstanced&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new Bt(this.shaderInputs.modules);for(const t of Object.keys(this.shaderInputs.modules)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings["".concat(t,"Uniforms")]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,t){e.indices&&Ft.warn("Model:".concat(this.id," setAttributes() - indexBuffer should be set using setIndexBuffer()"))();for(const[i,r]of Object.entries(e)){var n;const e=this.bufferLayout.find((e=>mr(e).includes(i)));if(!e){Ft.warn("Model(".concat(this.id,'): Missing layout for buffer "').concat(i,'".'))();continue}const o=mr(e);let s=!1;for(const t of o){const e=this._attributeInfos[t];e&&(this.vertexArray.setBuffer(e.location,r),s=!0)}s||(null!==(n=null===t||void 0===t?void 0:t.disableWarnings)&&void 0!==n?n:this.props.disableWarnings)||Ft.warn("Model(".concat(this.id,'): Ignoring buffer "').concat(r.id,'" for unknown attribute "').concat(i,'"'))()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,t){for(const[i,r]of Object.entries(e)){var n;const e=this._attributeInfos[i];e?this.vertexArray.setConstantWebGL(e.location,r):(null!==(n=null===t||void 0===t?void 0:t.disableWarnings)&&void 0!==n?n:this.props.disableWarnings)||Ft.warn('Model "'.concat(this.id,': Ignoring constant supplied for unknown attribute "').concat(i,'"'))()}this.setNeedsRedraw("constants")}setUniforms(e){Y(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettings(e){const{bindings:t,uniforms:n}=Gt(this._getModuleUniforms(e));Object.assign(this.bindings,t),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let e=0;for(const t of Object.values(this.bindings))t instanceof At?e=Math.max(e,t.texture.updateTimestamp):t instanceof Z||t instanceof Rt?e=Math.max(e,t.updateTimestamp):t instanceof Ct||(e=Math.max(e,t.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const t={...e.attributes};for(const[n]of Object.entries(t))this.pipeline.shaderLayout.attributes.find((e=>e.name===n))||"positions"===n||delete t[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(t,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,t=null;this.pipeline&&(Ft.log(1,"Model ".concat(this.id,': Recreating pipeline because "').concat(this._pipelineNeedsUpdate,'".'))(),e=this.pipeline.vs,t=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:"".concat(this.id,"-vertex"),stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:"".concat(this.id,"-fragment"),stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:i}),this._attributeInfos=Yt(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),t&&this.shaderFactory.release(t)}return this.pipeline}_logDrawCallStart(){const e=Ft.level>3?0:1e4;Ft.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Ft.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ft.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=function(e,t){var n;const i={},r="Values";if(0===e.attributes.length&&(null===(n=e.varyings)||void 0===n||!n.length))return{"No attributes or varyings":{[r]:"N/A"}};for(const o of e.attributes)if(o){const e="".concat(o.location," ").concat(o.name,": ").concat(o.type);i["in ".concat(e)]={[r]:o.stepMode||"vertex"}}for(const o of e.varyings||[]){const e="".concat(o.location," ").concat(o.name);i["out ".concat(e)]={[r]:JSON.stringify(o.accessor)}}return i}(this.pipeline.shaderLayout,this.id);Ft.table(2,e)();const t=this.shaderInputs.getDebugTable();for(const[i,r]of Object.entries(this.uniforms))t[i]={value:r};Ft.table(2,t)();const n=this._getAttributeDebugTable();Ft.table(2,this._attributeInfos)(),Ft.table(2,n)(),Ft.groupEnd(2)(),this._logOpen=!1}}_logFramebuffer(e){const t=Ft.get("framebuffer");if(this._drawCount++,!t||this._drawCount++>3&&this._drawCount%60)return;const n=e.props.framebuffer;n&&function(e,t){let{id:n,minimap:i,opaque:r,top:o="0",left:s="0",rgbaScale:a=1}=t;hr||(hr=document.createElement("canvas"),hr.id=n,hr.title=n,hr.style.zIndex="100",hr.style.position="absolute",hr.style.top=o,hr.style.left=s,hr.style.border="blue 1px solid",hr.style.transform="scaleY(-1)",document.body.appendChild(hr),fr=hr.getContext("2d")),hr.width===e.width&&hr.height===e.height||(hr.width=e.width/2,hr.height=e.height/2,hr.style.width="400px",hr.style.height="400px");const l=e.device.readPixelsToArrayWebGL(e),c=fr.createImageData(e.width,e.height);for(let u=0;u<l.length;u+=4)c.data[0+u+0]=l[u+0]*a,c.data[0+u+1]=l[u+1]*a,c.data[0+u+2]=l[u+2]*a,c.data[0+u+3]=r?255:l[u+3]*a;fr.putImageData(c,0,0)}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[t,n]of Object.entries(this._attributeInfos))e[n.location]={name:t,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:t}=this.vertexArray,n="uint32"===t.indexType?new Uint32Array(t.debugData):new Uint16Array(t.debugData);e.indices={name:"indices",type:t.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,t){const n=Te(t);return(e instanceof Z?new n(e.debugData):e).toString()}}function gr(e,t){const n=[...e];for(const i of t){const e=n.findIndex((e=>e.name===i.name));e<0?n.push(i):n[e]=i}return n}function mr(e){var t;return e.attributes?null===(t=e.attributes)||void 0===t?void 0:t.map((e=>e.attribute)):[e.name]}H(pr,"defaultProps",{...Ut.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:$i.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});class _r{static isSupported(e){var t;return"webgl"===(null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.type)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pr.defaultProps;H(this,"device",void 0),H(this,"model",void 0),H(this,"transformFeedback",void 0),St(_r.isSupported(e),"BufferTransform not yet implemented on WebGPU"),this.device=e,this.model=new pr(this.device,{id:t.id||"buffer-transform-model",fs:t.fs||xt(),topology:t.topology||"point-list",...t}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:t.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){const t=this.device.beginRenderPass(e);this.model.draw(t),t.end()}update(){console.warn("TextureTransform#update() not implemented")}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const t=this.getBuffer(e);if(t instanceof Z)return t.readAsync();const{buffer:n,byteOffset:i=0,byteLength:r=n.byteLength}=t;return n.readAsync(i,r)}}function vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.fround(e),r=e-i;return t[n]=i,t[n+1]=r,t}function yr(e){return e-Math.fround(e)}function br(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){const r=4*n+i;vr(e[4*i+n],t,2*r)}return t}const wr={ONE:1};const Er={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\nconst float SPLIT = 4097.0;\nfloat t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat a_hi = t * ONE - (t - a);\nfloat a_lo = a * ONE - a_hi;\n#else\nfloat a_hi = t - (t - a);\nfloat a_lo = a - a_hi;\n#endif\nreturn vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\nvec2 b = split(a.x);\nb.y += a.y;\nreturn b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat sum = (a + b) * ONE;\nfloat err = b - (sum - a) * ONE;\n#else\nfloat sum = a + b;\nfloat err = b - (sum - a);\n#endif\nreturn vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\nfloat s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) + (b - v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSub(float a, float b) {\nfloat s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) - (b + v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSqr(float a) {\nfloat prod = a * a;\nvec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\na_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\nfloat err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\nreturn vec2(prod, err);\n}\nvec2 twoProd(float a, float b) {\nfloat prod = a * b;\nvec2 a_fp64 = split(a);\nvec2 b_fp64 = split(b);\nfloat err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\na_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\nreturn vec2(prod, err);\n}\nvec2 sum_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSum(a.x, b.x);\nt = twoSum(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 sub_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSub(a.x, b.x);\nt = twoSub(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 mul_fp64(vec2 a, vec2 b) {\nvec2 prod = twoProd(a.x, b.x);\nprod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nprod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nreturn prod;\n}\nvec2 div_fp64(vec2 a, vec2 b) {\nfloat xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nvec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\nvec2 yn = a * xn;\n#endif\nfloat diff = (sub_fp64(a, mul_fp64(b, yn))).x;\nvec2 prod = twoProd(xn, diff);\nreturn sum_fp64(yn, prod);\n}\nvec2 sqrt_fp64(vec2 a) {\nif (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\nif (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\nfloat x = 1.0 / sqrt(a.x);\nfloat yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nvec2 yn_sqr = twoSqr(yn) * ONE;\n#else\nvec2 yn_sqr = twoSqr(yn);\n#endif\nfloat diff = sub_fp64(a, yn_sqr).x;\nvec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nreturn sum_fp64(split(yn), prod);\n#else\nreturn sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",getUniforms:function(){return wr},fp64ify:vr,fp64LowPart:yr,fp64ifyMatrix4:br};function Sr(e){const{source:t,target:n,start:i=0,size:r,getData:o}=e,s=e.end||n.length,a=t.length,l=s-i;if(a>l)return void n.set(t.subarray(0,l),i);if(n.set(t,i),!o)return;let c=a;for(;c<l;){const e=o(c,t);for(let t=0;t<r;t++)n[i+c]=e[t]||0,c++}}function Tr(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function xr(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function Ar(e){e.push(e.shift())}function Rr(e){let{device:t,source:n,target:i}=e;var r;(!i||i.byteLength<n.byteLength)&&(null===(r=i)||void 0===r||r.destroy(),i=t.createBuffer({byteLength:n.byteLength,usage:n.usage}));return i}function Cr(e){let{device:t,buffer:n,attribute:i,fromLength:r,toLength:o,fromStartIndices:s,getData:a=(e=>e)}=e;const l=i.doublePrecision&&i.value instanceof Float64Array?2:1,c=i.size*l,u=i.byteOffset,d=i.settings.bytesPerElement<4?u/i.settings.bytesPerElement*4:u,h=i.startIndices,f=s&&h,p=i.isConstant;if(!f&&n&&r>=o)return n;const g=i.value instanceof Float64Array?Float32Array:i.value.constructor,m=p?i.value:new g(i.getBuffer().readSyncWebGL(u,o*g.BYTES_PER_ELEMENT).buffer);if(i.settings.normalized&&!p){const e=a;a=(t,n)=>i.normalizeConstant(e(t,n))}const _=p?(e,t)=>a(m,t):(e,t)=>a(m.subarray(e+u,e+u+c),t),v=n?new Float32Array(n.readSyncWebGL(d,4*r).buffer):new Float32Array(0),y=new Float32Array(o);var b;(function(e){let{source:t,target:n,size:i,getData:r,sourceStartIndices:o,targetStartIndices:s}=e;if(!o||!s)return Sr({source:t,target:n,size:i,getData:r}),n;let a=0,l=0;const c=r&&((e,t)=>r(e+l,t)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const e=o[d]*i,r=s[d]*i;Sr({source:t.subarray(a,e),target:n,start:l,end:r,size:i,getData:c}),a=e,l=r}l<n.length&&Sr({source:[],target:n,start:l,size:i,getData:c})}({source:v,target:y,sourceStartIndices:s,targetStartIndices:h,size:c,getData:_}),!n||n.byteLength<y.byteLength+d)&&(null===(b=n)||void 0===b||b.destroy(),n=t.createBuffer({byteLength:y.byteLength+d,usage:35050}));return n.write(y,d),n}class Pr{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var t,n;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(n=this.settings).onStart)||void 0===t||t.call(n,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}class Lr{constructor(e){let{device:t,attribute:n,timeline:i}=e;this.buffers=[],this.currentLength=0,this.device=t,this.transition=new Pr(i),this.attribute=n,this.attributeInTransition=function(e){const{device:t,settings:n,value:i}=e,r=new _t(t,n);return r.setData({value:i instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),r}(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=function(e,t){const{doublePrecision:n,settings:i,value:r,size:o}=e,s=n&&r instanceof Float64Array?2:1;let a=0;const{shaderAttributes:l}=e.settings;if(l)for(const u of Object.values(l)){var c;a=Math.max(a,null!==(c=u.vertexOffset)&&void 0!==c?c:0)}return(i.noAlloc?r.length:(t+a)*o)*s}(this.attribute,t),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}const Mr="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",kr="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n";function Ir(e){return e.doublePrecision&&e.value instanceof Float64Array}const Or="#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",Nr="#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}";const Fr={interpolation:class extends Lr{constructor(e){let{device:t,attribute:n,timeline:i}=e;super({device:t,attribute:n,timeline:i}),this.type="interpolation",this.transform=function(e,t){const n=t.size,i=Tr(n),r=xr(n),o=t.getBufferLayout();if(Ir(t))return new _r(e,{vs:kr,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:r,byteOffset:0},{attribute:"aFrom64Low",format:r,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:r,byteOffset:0},{attribute:"aTo64Low",format:r,byteOffset:4*n}]}],modules:[Er],defines:{ATTRIBUTE_TYPE:i,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0});return new _r(e,{vs:Mr,bufferLayout:[{name:"aFrom",format:r},{name:"aTo",format:o.attributes[0].format}],defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"],disableWarnings:!0})}(t,n)}start(e,t){const n=this.currentLength,i=this.currentStartIndices;if(super.start(e,t,e.duration),e.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:o}=this;Ar(r),r[0]=Cr({device:this.device,buffer:r[0],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),r[1]=Rr({device:this.device,source:r[0],target:r[1]}),this.setBuffer(r[1]);const{transform:s}=this,a=s.model;let l=Math.floor(this.currentLength/o.size);Ir(o)&&(l/=2),a.setVertexCount(l),o.isConstant?(a.setAttributes({aFrom:r[0]}),a.setConstantAttributes({aTo:o.value})):a.setAttributes({aFrom:r[0],aTo:o.getBuffer()}),s.transformFeedback.setBuffers({vCurrent:r[1]})}onUpdate(){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let i=n/e;t&&(i=t(i));const{model:r}=this.transform;r.setUniforms({time:i}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},spring:class extends Lr{constructor(e){let{device:t,attribute:n,timeline:i}=e;super({device:t,attribute:n,timeline:i}),this.type="spring",this.texture=function(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}(t),this.framebuffer=function(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}(t,this.texture),this.transform=function(e,t){const n=Tr(t.size),i=xr(t.size);return new _r(e,{vs:Or,fs:Nr,bufferLayout:[{name:"aPrev",format:i},{name:"aCur",format:i},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}(t,n)}start(e,t){const n=this.currentLength,i=this.currentStartIndices;super.start(e,t);const{buffers:r,attribute:o}=this;for(let a=0;a<2;a++)r[a]=Cr({device:this.device,buffer:r[a],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});r[2]=Rr({device:this.device,source:r[0],target:r[2]}),this.setBuffer(r[1]);const{model:s}=this.transform;s.setVertexCount(Math.floor(this.currentLength/o.size)),o.isConstant?s.setConstantAttributes({aTo:o.value}):s.setAttributes({aTo:o.getBuffer()})}onUpdate(){const{buffers:e,transform:t,framebuffer:n,transition:i}=this,r=this.settings;t.model.setAttributes({aPrev:e[0],aCur:e[1]}),t.transformFeedback.setBuffers({vNext:e[2]}),t.model.setUniforms({stiffness:r.stiffness,damping:r.damping}),t.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),Ar(e),this.setBuffer(e[1]);this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}};class Dr{constructor(e,t){let{id:n,timeline:i}=t;if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update(e){let{attributes:t,transitions:n,numInstances:i}=e;this.numInstances=i||1;for(const r in t){const e=t[r],i=e.getTransitionSetting(n);i&&this._updateAttribute(r,e,i)}for(const r in this.transitions){const e=t[r];e&&e.getTransitionSetting(n)||this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,t,n){const i=this.transitions[e];let r=!i||i.type!==n.type;if(r){i&&this._removeTransition(e);const o=Fr[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,device:this.device}):(ve.error("unsupported transition type '".concat(n.type,"'"))(),r=!1)}(r||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const Br="attributeManager.invalidate";class Ur{constructor(e){let{id:t="attribute-manager",stats:n,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mergeBoundsMemoized=yt(tt),this.id=t,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Dr(e,{id:"".concat(t,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);Et(Br,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Et(Br,this,"all")}update(e){let{data:t,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}=e,l=!1;Et("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const e=this.attributes[c],r=e.settings.accessor;e.startIndices=i,e.numInstances=n,o[c]&&ve.removed("props.".concat(c),"data.attributes.".concat(c))(),e.setExternalBuffer(s[c])||e.setBinaryValue("string"===typeof r?s[r]:void 0,t.startIndices)||"string"===typeof r&&!s[r]&&e.setConstantValue(o[r])||e.needsUpdate()&&(l=!0,this._updateAttribute({attribute:e,numInstances:n,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||e.needsRedraw()}l&&Et("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const t=e.map((e=>{var t;return null===(t=this.attributes[e])||void 0===t?void 0:t.getBounds()}));return this.mergeBoundsMemoized(t)}getChangedAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:t,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const r in t){const o=t[r];o.needsRedraw(e)&&!n.hasAttribute(r)&&(i[r]=o)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map((t=>t.getBufferLayout(e)))}_add(e,t){for(const n in e){const i=e[n],r={...i,id:n,size:(i.isIndexed?1:i.size)||1,...t};this.attributes[n]=new _t(this.device,r)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:i}=this,r=i[e];return r&&r.forEach((e=>{const i=n[e];i&&i.setNeedsUpdate(i.id,t)})),r}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if(Et("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&Et("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,Et("attribute.updateEnd",t,n))}}const zr=1e-5;function Gr(e,t,n,i,r){const o=t-e;return(n-t)*r+-o*i+o+t}function jr(e,t){if(Array.isArray(e)){let n=0;for(let i=0;i<e.length;i++){const r=e[i]-t[i];n+=r*r}return Math.sqrt(n)}return Math.abs(e-t)}const Vr={interpolation:class extends Pr{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:i,easing:r}}=this,o=r(e/i);this._value=Oe(t,n,o)}},spring:class extends Pr{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:i}=this.settings,{_prevValue:r=e,_currValue:o=e}=this;let s=function(e,t,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Gr(e[s],t[s],n[s],i,r);return o}return Gr(e,t,n,i,r)}(r,o,t,n,i);const a=jr(s,t),l=jr(s,o);a<zr&&l<zr&&(s=t,this.end()),this._prevValue=o,this._currValue=s}}};class Wr{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,i){const{transitions:r}=this;if(r.has(e)){const n=r.get(e),{value:i=n.settings.fromValue}=n;t=i,this.remove(e)}if(!(i=mt(i)))return;const o=Vr[i.type];if(!o)return void ve.error("unsupported transition type '".concat(i.type,"'"))();const s=new o(this.timeline);s.start({...i,fromValue:t,toValue:n}),r.set(e,s)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const Hr="Awaiting state",Xr="Matched. State transferred from previous layer",Kr="Initialized",Yr="Discarded. Awaiting garbage collection",qr="No longer matched. Awaiting garbage collection",Zr="Finalized! Awaiting garbage collection",Qr=Symbol.for("component"),$r=Symbol.for("propTypes"),Jr=Symbol.for("deprecatedProps"),eo=Symbol.for("asyncPropDefaults"),to=Symbol.for("asyncPropOriginal"),no=Symbol.for("asyncPropResolved");function io(e,t){const n=oo({newProps:e,oldProps:t,propTypes:e[$r],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=e;i?i(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&r&&(n=r(e.data,t.data)||n);return n}(e,t);let r=!1;return i||(r=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers){if(lo(e,t,"all"))return{all:!0}}const n={};let i=!1;for(const r in e.updateTriggers)if("all"!==r){lo(e,t,r)&&(n[r]=!0,i=!0)}return!!i&&n}(e,t)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:ao(e,t),transitionsChanged:ro(e,t)}}function ro(e,t){if(!e.transitions)return!1;const n={},i=e[$r];let r=!1;for(const o in e.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&so(e[o],t[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function oo(e){let{newProps:t,oldProps:n,ignoreProps:i={},propTypes:r={},triggerName:o="props"}=e;if(n===t)return!1;if("object"!==typeof t||null===t)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(t))if(!(s in i)){if(!(s in n))return"".concat(o,".").concat(s," added");const e=so(t[s],n[s],r[s]);if(e)return"".concat(o,".").concat(s," ").concat(e)}for(const s of Object.keys(n))if(!(s in i)){if(!(s in t))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const e=so(t[s],n[s],r[s]);if(e)return"".concat(o,".").concat(s," ").concat(e)}}return!1}function so(e,t,n){let i=n&&n.equal;return i&&!i(e,t,n)?"changed deeply":i||(i=e&&t&&e.equals,!i||i.call(e,t))?i||t===e?null:"changed shallowly":"changed deeply"}function ao(e,t){if(null===t)return!0;const n=t.extensions,{extensions:i}=e;if(i===n)return!1;if(!n||!i)return!0;if(i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function lo(e,t,n){let i=e.updateTriggers[n];i=void 0===i||null===i?{}:i;let r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;return oo({oldProps:r,newProps:i,triggerName:n})}function co(e){if(null===(t=e)||"object"!==typeof t)throw new Error("count(): argument not an object");var t;if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function uo(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const i={...e.inject};for(const e in t.inject)i[e]=(i[e]||"")+t.inject[e];n.inject=i}else n.inject=t.inject;return n}function ho(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,e}!function(){const e=function(){const e=new Ve(4);return Ve!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function fo(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],_=t[15],v=n*a-i*s,y=n*l-r*s,b=n*c-o*s,w=i*l-r*a,E=i*c-o*a,S=r*c-o*l,T=u*g-d*p,x=u*m-h*p,A=u*_-f*p,R=d*m-h*g,C=d*_-f*g,P=h*_-f*m;let L=v*P-y*C+b*R+w*A-E*x+S*T;return L?(L=1/L,e[0]=(a*P-l*C+c*R)*L,e[1]=(r*C-i*P-o*R)*L,e[2]=(g*S-m*E+_*w)*L,e[3]=(h*E-d*S-f*w)*L,e[4]=(l*A-s*P-c*x)*L,e[5]=(n*P-r*A+o*x)*L,e[6]=(m*b-p*S-_*y)*L,e[7]=(u*S-h*b+f*y)*L,e[8]=(s*C-a*A+c*T)*L,e[9]=(i*A-n*C-o*T)*L,e[10]=(p*E-g*b+_*v)*L,e[11]=(d*b-u*E-f*v)*L,e[12]=(a*x-s*R-l*T)*L,e[13]=(n*R-i*x+r*T)*L,e[14]=(g*y-p*w-m*v)*L,e[15]=(u*w-d*y+h*v)*L,e):null}function po(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],g=t[12],m=t[13],_=t[14],v=t[15];let y=n[0],b=n[1],w=n[2],E=n[3];return e[0]=y*i+b*a+w*d+E*g,e[1]=y*r+b*l+w*h+E*m,e[2]=y*o+b*c+w*f+E*_,e[3]=y*s+b*u+w*p+E*v,y=n[4],b=n[5],w=n[6],E=n[7],e[4]=y*i+b*a+w*d+E*g,e[5]=y*r+b*l+w*h+E*m,e[6]=y*o+b*c+w*f+E*_,e[7]=y*s+b*u+w*p+E*v,y=n[8],b=n[9],w=n[10],E=n[11],e[8]=y*i+b*a+w*d+E*g,e[9]=y*r+b*l+w*h+E*m,e[10]=y*o+b*c+w*f+E*_,e[11]=y*s+b*u+w*p+E*v,y=n[12],b=n[13],w=n[14],E=n[15],e[12]=y*i+b*a+w*d+E*g,e[13]=y*r+b*l+w*h+E*m,e[14]=y*o+b*c+w*f+E*_,e[15]=y*s+b*u+w*p+E*v,e}function go(e,t,n){const i=n[0],r=n[1],o=n[2];let s,a,l,c,u,d,h,f,p,g,m,_;return t===e?(e[12]=t[0]*i+t[4]*r+t[8]*o+t[12],e[13]=t[1]*i+t[5]*r+t[9]*o+t[13],e[14]=t[2]*i+t[6]*r+t[10]*o+t[14],e[15]=t[3]*i+t[7]*r+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],c=t[3],u=t[4],d=t[5],h=t[6],f=t[7],p=t[8],g=t[9],m=t[10],_=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=h,e[7]=f,e[8]=p,e[9]=g,e[10]=m,e[11]=_,e[12]=s*i+u*r+p*o+t[12],e[13]=a*i+d*r+g*o+t[13],e[14]=l*i+h*r+m*o+t[14],e[15]=c*i+f*r+_*o+t[15]),e}function mo(e,t,n){const i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _o(e,t,n){const i=Math.sin(n),r=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=s*r+u*i,e[6]=a*r+d*i,e[7]=l*r+h*i,e[8]=c*r-o*i,e[9]=u*r-s*i,e[10]=d*r-a*i,e[11]=h*r-l*i,e}function vo(e,t,n){const i=Math.sin(n),r=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=s*r+u*i,e[2]=a*r+d*i,e[3]=l*r+h*i,e[4]=c*r-o*i,e[5]=u*r-s*i,e[6]=d*r-a*i,e[7]=h*r-l*i,e}const yo=function(e,t,n,i,r){const o=1/Math.tan(t/2);if(e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0){const t=1/(i-r);e[10]=(r+i)*t,e[14]=2*r*i*t}else e[10]=-1,e[14]=-2*i;return e};const bo=function(e,t,n,i,r,o,s){const a=1/(t-n),l=1/(i-r),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(r+i)*l,e[14]=(s+o)*c,e[15]=1,e};const wo=[0,0,0,0],Eo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],So=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],To=[0,0,0],xo=[0,0,0],Ao=yt((function(e){let{viewport:t,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:r}=e;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(e,t,n){const{viewMatrixUncentered:i,projectionMatrix:r}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=wo,l=wo,c=e.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=Ro(e,t,n);h&&(l=e.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=ho([],l,s),o=i||o,s=po([],r,o),s=po([],s,Eo));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(t,i,r),d=t.getDistanceScales(),h=[t.width*n,t.height*n],f=ho([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,p={project_uCoordinateSystem:i,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:To,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:So,project_uCameraPosition:l};if(u){const e=t.getDistanceScales(u);switch(i){case ye.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case ye.LNGLAT:case ye.LNGLAT_OFFSETS:t._pseudoMeters||(p.project_uCommonUnitsPerMeter=e.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case ye.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return p}));function Ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo;n.length<3&&(n=[n[0],n[1],0]);let i,r=n,o=!0;switch(i=t===ye.LNGLAT_OFFSETS||t===ye.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case be.WEB_MERCATOR:t!==ye.LNGLAT&&t!==ye.CARTESIAN||(i=[0,0,0],o=!1);break;case be.WEB_MERCATOR_AUTO_OFFSET:t===ye.LNGLAT?r=i:t===ye.CARTESIAN&&(r=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case be.IDENTITY:r=e.position.map(Math.fround),r[2]=r[2]||0;break;case be.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}class Co extends De{toString(){let e="[";if(Le.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Be(n),this}getColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=e*this.RANK;for(let i=0;i<this.RANK;++i)t[i]=this[n+i];return t}setColumn(e,t){const n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=t[i];return this}}function Po(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Lo(e,t,n,i){const r=t[0],o=t[1];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e}!function(){const e=function(){const e=new Ve(2);return Ve!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var Mo;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(Mo||(Mo={}));const ko=45*Math.PI/180,Io=1,Oo=.1,No=500,Fo=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Do extends Co{static get IDENTITY(){return function(){Uo||(Uo=new Do,Object.freeze(Uo));return Uo}()}static get ZERO(){return function(){Bo||(Bo=new Do([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Bo));return Bo}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Mo}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,i,r,o,s,a,l,c,u,d,h,f,p,g){return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(e,t,n,i,r,o,s,a,l,c,u,d,h,f,p,g){return this[0]=e,this[1]=r,this[2]=l,this[3]=h,this[4]=t,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=i,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Fo)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],s=n+n,a=i+i,l=r+r,c=n*s,u=i*s,d=i*a,h=r*s,f=r*a,p=r*l,g=o*s,m=o*a,_=o*l;e[0]=1-d-p,e[1]=u+_,e[2]=h-m,e[3]=0,e[4]=u-_,e[5]=1-c-p,e[6]=f+g,e[7]=0,e[8]=h+m,e[9]=f-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:i,top:r,near:o=Oo,far:s=No}=e;return s===1/0?function(e,t,n,i,r,o){const s=2*o/(n-t),a=2*o/(r-i),l=(n+t)/(n-t),c=(r+i)/(r-i),u=-1,d=-1,h=-2*o;e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=c,e[10]=u,e[11]=d,e[12]=0,e[13]=0,e[14]=h,e[15]=0}(this,t,n,i,r,o):function(e,t,n,i,r,o,s){const a=1/(n-t),l=1/(r-i),c=1/(o-s);e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(r+i)*l,e[10]=(s+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*c,e[15]=0}(this,t,n,i,r,o,s),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:i=[0,1,0]}=e;return function(e,t,n,i){let r,o,s,a,l,c,u,d,h,f;const p=t[0],g=t[1],m=t[2],_=i[0],v=i[1],y=i[2],b=n[0],w=n[1],E=n[2];Math.abs(p-b)<je&&Math.abs(g-w)<je&&Math.abs(m-E)<je?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(d=p-b,h=g-w,f=m-E,r=1/Math.sqrt(d*d+h*h+f*f),d*=r,h*=r,f*=r,o=v*f-y*h,s=y*d-_*f,a=_*h-v*d,r=Math.sqrt(o*o+s*s+a*a),r?(r=1/r,o*=r,s*=r,a*=r):(o=0,s=0,a=0),l=h*a-f*s,c=f*o-d*a,u=d*s-h*o,r=Math.sqrt(l*l+c*c+u*u),r?(r=1/r,l*=r,c*=r,u*=r):(l=0,c=0,u=0),e[0]=o,e[1]=l,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=a,e[9]=u,e[10]=f,e[11]=0,e[12]=-(o*p+s*g+a*m),e[13]=-(l*p+c*g+u*m),e[14]=-(d*p+h*g+f*m),e[15]=1)}(this,t,n,i),this.check()}ortho(e){const{left:t,right:n,bottom:i,top:r,near:o=Oo,far:s=No}=e;return bo(this,t,n,i,r,o,s),this.check()}orthographic(e){const{fovy:t=ko,aspect:n=Io,focalDistance:i=1,near:r=Oo,far:o=No}=e;zo(t);const s=t/2,a=i*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:i=.1,far:r=500}=e;return zo(t),yo(this,t,n,i,r),this.check()}determinant(){return function(e){const t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],g=e[14],m=t*s-n*o,_=t*a-i*o,v=n*a-i*s,y=c*p-u*f,b=c*g-d*f,w=u*g-d*p;return l*(t*w-n*b+i*y)-r*(o*w-s*b+a*y)+e[15]*(c*v-u*_+d*m)-h*(f*v-p*_+g*m)}(this)}getScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),i=1/n[0],r=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*r,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*r,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*r,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),i=1/n[0],r=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*r,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*r,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*r,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){const n=t[1],i=t[2],r=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=r,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return fo(this,this),this.check()}multiplyLeft(e){return po(this,e,this),this.check()}multiplyRight(e){return po(this,this,e),this.check()}rotateX(e){return _o(this,this,e),this.check()}rotateY(e){return function(e,t,n){const i=Math.sin(n),r=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=s*r-u*i,e[2]=a*r-d*i,e[3]=l*r-h*i,e[8]=o*i+c*r,e[9]=s*i+u*r,e[10]=a*i+d*r,e[11]=l*i+h*r}(this,this,e),this.check()}rotateZ(e){return vo(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function(e,t,n,i){let r,o,s,a,l,c,u,d,h,f,p,g,m,_,v,y,b,w,E,S,T,x,A,R,C=i[0],P=i[1],L=i[2],M=Math.sqrt(C*C+P*P+L*L);M<je||(M=1/M,C*=M,P*=M,L*=M,o=Math.sin(n),r=Math.cos(n),s=1-r,a=t[0],l=t[1],c=t[2],u=t[3],d=t[4],h=t[5],f=t[6],p=t[7],g=t[8],m=t[9],_=t[10],v=t[11],y=C*C*s+r,b=P*C*s+L*o,w=L*C*s-P*o,E=C*P*s-L*o,S=P*P*s+r,T=L*P*s+C*o,x=C*L*s+P*o,A=P*L*s-C*o,R=L*L*s+r,e[0]=a*y+d*b+g*w,e[1]=l*y+h*b+m*w,e[2]=c*y+f*b+_*w,e[3]=u*y+p*b+v*w,e[4]=a*E+d*S+g*T,e[5]=l*E+h*S+m*T,e[6]=c*E+f*S+_*T,e[7]=u*E+p*S+v*T,e[8]=a*x+d*A+g*R,e[9]=l*x+h*A+m*R,e[10]=c*x+f*A+_*R,e[11]=u*x+p*A+v*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return mo(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return go(this,this,e),this.check()}transform(e,t){return 4===e.length?(Ue(t=ho(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let i;switch(n){case 2:i=function(e,t,n){const i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e}(t||[-0,-0],e,this);break;case 3:i=He(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ue(i,e.length),i}transformAsVector(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const i=t[0],r=t[1],o=n[3]*i+n[7]*r||1;return e[0]=(n[0]*i+n[4]*r)/o,e[1]=(n[1]*i+n[5]*r)/o,e}(t||[-0,-0],e,this);break;case 3:n=Ke(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ue(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let Bo,Uo;function zo(e){if(e>2*Math.PI)throw Error("expected radians")}function Go(e,t){const n=ho([],t,e);var i,r,o;return i=n,r=n,o=1/n[3],i[0]=r[0]*o,i[1]=r[1]*o,i[2]=r[2]*o,i[3]=r[3]*o,n}function jo(e,t){const n=e%t;return n<0?t+n:n}function Vo(e,t,n){return e<t?t:e>n?n:e}const Wo=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function Ho(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Xo=Math.PI,Ko=Xo/4,Yo=Xo/180,qo=180/Xo,Zo=512,Qo=4003e4,$o=85.051129,Jo=1.5;function es(e){const[t,n]=e;Ho(Number.isFinite(t)),Ho(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=n*Yo;return[Zo*(t*Yo+Xo)/(2*Xo),Zo*(Xo+Math.log(Math.tan(Ko+.5*i)))/(2*Xo)]}function ts(e){const[t,n]=e,i=t/Zo*(2*Xo)-Xo,r=2*(Math.atan(Math.exp(n/Zo*(2*Xo)-Xo))-Ko);return[i*qo,r*qo]}function ns(e){const{latitude:t}=e;Ho(Number.isFinite(t));const n=Math.cos(t*Yo);return function(e){return Wo(e)}(Qo*n)-9}function is(e){const t=Math.cos(e*Yo);return Zo/Qo/t}function rs(e){const{latitude:t,longitude:n,highPrecision:i=!1}=e;Ho(Number.isFinite(t)&&Number.isFinite(n));const r=Zo,o=Math.cos(t*Yo),s=r/360,a=s/o,l=r/Qo/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(i){const e=Yo*Math.tan(t*Yo)/o,n=s*e/2,i=r/Qo*e,u=i/a*l;c.unitsPerDegree2=[0,n,i],c.unitsPerMeter2=[u,0,u]}return c}function os(e,t){const[n,i,r]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:c}=rs({longitude:n,latitude:i,highPrecision:!0}),u=es(e);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=ts(u),h=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[d[0],d[1],h]:d}function ss(e){const{width:t,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=e;let{fovy:u=as(Jo)}=e;void 0!==i&&(u=as(i));const d=u*Yo,h=r*Yo,f=ls(u);let p=f;s&&(p+=s[2]*a/Math.cos(h)/n);const g=d*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(Vo(Math.PI/2-h-g,.01,Math.PI-.01)),_=Math.sin(h)*m+p,v=10*p;return{fov:d,aspect:t/n,focalDistance:f,near:l,far:Math.min(_*c,v)}}function as(e){return 2*Math.atan(.5/e)*qo}function ls(e){return.5/Math.tan(.5*e*Yo)}function cs(e,t){const[n,i,r=0]=e;return Ho(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Go(t,[n,i,r,1])}function us(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[i,r,o]=e;if(Ho(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o)){return Go(t,[i,r,o,1])}const s=Go(t,[i,r,0,1]),a=Go(t,[i,r,1,1]),l=s[2],c=a[2];return Lo([],s,a,l===c?0:((n||0)-l)/(c-l))}function ds(e){const{width:t,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[c,u]]=i,d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof e)return{top:e,bottom:e,left:e,right:e};return Ho(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e}(e.padding),h=es([a,Vo(u,-85.051129,$o)]),f=es([c,Vo(l,-85.051129,$o)]),p=[Math.max(Math.abs(f[0]-h[0]),r),Math.max(Math.abs(f[1]-h[1]),r)],g=[t-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];Ho(g[0]>0&&g[1]>0);const m=g[0]/p[0],_=g[1]/p[1],v=(d.right-d.left)/2/m,y=(d.top-d.bottom)/2/_,b=ts([(f[0]+h[0])/2+v,(f[1]+h[1])/2+y]),w=Math.min(o,Wo(Math.abs(Math.min(m,_))));return Ho(Number.isFinite(w)),{longitude:b[0],latitude:b[1],zoom:w}}const hs=Math.PI/180;function fs(e,t,n){const{pixelUnprojectionMatrix:i}=e,r=Go(i,[t,0,1,1]),o=Go(i,[t,e.height,1,1]),s=ts(Lo([],r,o,(n*e.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return s.push(n),s}const ps=Math.PI/180,gs=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ms=[0,0,0],_s={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||_s,this.focalDistance=e.focalDistance||1,this.position=e.position||ms,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?be.WEB_MERCATOR:be.WEB_MERCATOR_AUTO_OFFSET:be.IDENTITY}equals(e){return e instanceof vs&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Ne(e.projectionMatrix,this.projectionMatrix)&&Ne(e.viewMatrix,this.viewMatrix))}project(e){let{topLeft:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=cs(this.projectPosition(e),this.pixelProjectionMatrix),[i,r]=n,o=t?r:this.height-r;return 2===e.length?[i,o]:[i,o,n[2]]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[i,r,o]=e,s=t?r:this.height-r,a=n&&n*this.distanceScales.unitsPerMeter[2],l=us([i,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=es(e);return t[1]=Ie(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?ts(e):e}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,0],e),n=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),r=this.unproject([this.width,this.height],e);return[Math.min(t[0],n[0],i[0],r[0]),Math.min(t[1],n[1],i[1],r[1]),Math.max(t[0],n[0],i[0],r[0]),Math.max(t[1],n[1],i[1],r[1])]}getDistanceScales(e){return e?rs({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel(e){let{x:t,y:n,width:i=1,height:r=1}=e;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:$e((e=this.viewProjectionMatrix)[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:$e(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:$e(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:$e(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:$e(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:$e(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}),this._frustumPlanes;var e}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=ns({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||rs({latitude:n,longitude:t}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:r,modelMatrix:o}=e;let s=ms;if(r&&(s=o?new Do(o).transformAsVector(r,[]):r),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new Ze(s).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(s)}_initMatrices(e){const{viewMatrix:t=gs,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:r,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Do).multiplyRight(t).translate(new Ze(this.center).negate()),this.projectionMatrix=n||function(e){let{width:t,height:n,orthographic:i,fovyRadians:r,focalDistance:o,padding:s,near:a,far:l}=e;const c=t/n,u=i?(new Do).orthographic({fovy:r,aspect:c,focalDistance:o,near:a,far:l}):(new Do).perspective({fovy:r,aspect:c,near:a,far:l});if(s){const{left:e=0,right:i=0,top:r=0,bottom:o=0}=s,a=Ie((e+t-i)/2,0,t)-t/2,l=Ie((r+n-o)/2,0,n)-n/2;u[8]-=2*a/t,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:i,fovyRadians:r||o*ps,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;po(u,u,this.projectionMatrix),po(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=fo([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mo(h,h,[this.width/2,-this.height/2,1]),go(h,h,[1,-1,0]),po(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=fo([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ve.warn("Pixel project matrix not invertible")()}}vs.displayName="Viewport";class ys extends vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:t=0,longitude:n=0,zoom:i=0,pitch:r=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:l,farZ:c,orthographic:u=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,position:p,padding:g,legacyMeterSizes:m=!1}=e;let{width:_,height:v,altitude:y=1.5}=e;const b=Math.pow(2,i);let w;_=_||1,v=v||1;let E=null;if(d)y=d[5]/2,w=as(y);else{let n;if(e.fovy?(w=e.fovy,y=ls(w)):w=as(y),g){const{top:e=0,bottom:t=0}=g;n=[0,Ie((e+v-t)/2,0,v)-v/2]}E=ss({width:_,height:v,scale:b,center:p&&[0,0,p[2]*is(t)],offset:n,pitch:r,fovy:w,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(l)&&(E.near=l),Number.isFinite(c)&&(E.far=c)}let S=function(e){const{height:t,pitch:n,bearing:i,altitude:r,scale:o,center:s}=e,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];go(a,a,[0,0,-r]),_o(a,a,-n*Yo),vo(a,a,i*Yo);const l=o/t;var c,u;return mo(a,a,[l,l,l]),s&&go(a,a,((c=[])[0]=-(u=s)[0],c[1]=-u[1],c[2]=-u[2],c)),a}({height:v,pitch:r,bearing:o,scale:b,altitude:y});if(f){S=(new Do).translate([512*f,0,0]).multiplyLeft(S)}super({...e,width:_,height:v,viewMatrix:S,longitude:n,latitude:t,zoom:i,...E,fovy:w,focalDistance:y}),this.latitude=t,this.longitude=n,this.zoom=i,this.pitch=r,this.bearing=o,this.altitude=y,this.fovy=w,this.orthographic=u,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=t;i<=n;i++){const e=i?new ys({...this,worldOffset:i}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*is(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/is(n)]}addMetersToLngLat(e,t){return os(e,t)}panByPosition(e,t){const n=us(t,this.pixelUnprojectionMatrix),i=Po([],this.projectFlat(e),((r=[])[0]=-(o=n)[0],r[1]=-o[1],r));var r,o;const s=Po([],this.center,i),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:i,unproject:r}=e,o={targetZ:t},s=r([0,i],o),a=r([n,i],o);let l,c;return(e.fovy?.5*e.fovy*hs:Math.atan(.5/e.altitude))>(90-e.pitch)*hs-.01?(l=fs(e,0,t),c=fs(e,n,t)):(l=r([0,0],o),c=r([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:i}=this,{longitude:r,latitude:o,zoom:s}=ds({width:n,height:i,bounds:e,...t});return new ys({width:n,height:i,longitude:r,latitude:o,zoom:s})}}ys.displayName="WebMercatorViewport";const bs=[0,0,0];function ws(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.projectPosition(e);if(n&&t instanceof ys){const[n,r,o=0]=e,s=t.getDistanceScales([n,r]);i[2]=o*s.unitsPerMeter[2]}return i}function Es(e,t){let{viewport:n,modelMatrix:i,coordinateSystem:r,coordinateOrigin:o,offsetMode:s}=t,[a,l,c=0]=e;switch(i&&([a,l,c]=ho([],[a,l,c,1],i)),r){case ye.LNGLAT:return ws([a,l,c],n,s);case ye.LNGLAT_OFFSETS:return ws([a+o[0],l+o[1],c+(o[2]||0)],n,s);case ye.METER_OFFSETS:return ws(os(o,[a,l,c]),n,s);case ye.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function Ss(e,t){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:i}=e;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return r===ye.DEFAULT&&(r=t.isGeospatial?ye.LNGLAT:ye.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:t,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(t),{autoOffset:l=!0}=t,{geospatialOrigin:c=bs,shaderCoordinateOrigin:u=bs,offsetMode:d=!1}=l?Ro(n,i,r):{},h=Es(e,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const e=n.projectPosition(c||u);Xe(h,h,e)}return h}const Ts={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},xs={};function As(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!As(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const o of i){if(!t.hasOwnProperty(o))return!1;if(!As(e[o],t[o],n-1))return!1}return!0}return!1}const Rs={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||Ls(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>As(e,t,1)},accessor:{validate(e,t){const n=Ms(e);return"function"===n||n===Ms(t.value)},equal:(e,t,n)=>"function"===typeof t||As(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||Ls(e),equal(e,t,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?As(e,t,r):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?As(e,t,r):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"===typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{if(!e)return e;const{dataTransform:i}=n.props;return i?i(e):"string"===typeof e.shape&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,n)=>{const i=n.context;return i&&i.device?function(e,t,n,i){if(n instanceof Rt)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const o=t.createTexture({...n,sampler:{...Ts,...r,...i}});return xs[o.id]=e,o}(n.id,i.device,e,{...t.parameters,...n.props.textureParameters}):null},release:(e,t,n)=>{var i,r;i=n.id,(r=e)&&r instanceof Rt&&xs[r.id]===i&&(r.delete(),delete xs[r.id])}}};function Cs(e,t){switch(Ms(t)){case"object":return Ps(e,t);case"array":return Ps(e,{type:"array",value:t,compare:!1});case"boolean":return Ps(e,{type:"boolean",value:t});case"number":return Ps(e,{type:"number",value:t});case"function":return Ps(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Ps(e,t){return"type"in t?{name:e,...Rs[t.type],...t}:"value"in t?{name:e,type:Ms(t.value),...t}:{name:e,type:"object",value:t}}function Ls(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Ms(e){return Ls(e)?"array":null===e?"null":typeof e}const ks="_mergedDefaultProps";function Is(e,t){let n=ks;if(t)for(const r of t){const e=r.constructor;e&&(n+=":".concat(e.extensionName||e.name))}const i=Fs(e,n);return i||(e[n]=function(e,t){const n=e.prototype;if(!n)return null;const i=Object.getPrototypeOf(e),r=Is(i),o=Fs(e,"defaultProps")||{},s=function(e){const t={},n={},i={};for(const[r,o]of Object.entries(e)){const e=null===o||void 0===o?void 0:o.deprecatedFor;if(e)i[r]=Array.isArray(e)?e:[e];else{const e=Cs(r,o);t[r]=e,n[r]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:i}}(o),a=Object.assign(Object.create(null),r,s.defaultProps),l=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[$r],s.propTypes),c=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[Jr],s.deprecatedProps);for(const u of t){const e=Is(u.constructor);e&&(Object.assign(a,e),Object.assign(l,e[$r]),Object.assign(c,e[Jr]))}(function(e,t){const n=function(e){const t=e.componentName;t||ve.warn("".concat(e.name,".componentName not specified"))();return t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})})(a,e),function(e,t){const n={},i={};for(const r in t){const e=t[r],{name:o,value:s}=e;e.async&&(n[o]=s,i[o]=Os(o))}e[eo]=n,e[to]={},Object.defineProperties(e,i)}(a,l),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const i="".concat(this.id,": ").concat(n);for(const r of t[n])Ns(this,r)||(this[r]=e);ve.deprecated(i,t[n].join("/"))()}})}(a,c),a[$r]=l,a[Jr]=c,0!==t.length||Ns(e,"_propTypes")||(e._propTypes=l);return a}(e,t||[]))}function Os(e){return{enumerable:!0,set(t){"string"===typeof t||t instanceof Promise||lt(t)?this[to][e]=t:this[no][e]=t},get(){if(this[no]){if(e in this[no]){return this[no][e]||this[eo][e]}if(e in this[to]){const t=this[Qr]&&this[Qr].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[eo][e]}}return this[eo][e]}}}function Ns(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fs(e,t){return Ns(e,t)&&e[t]}var Ds;let Bs=0;class Us{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props=function(e,t){let n;for(let o=t.length-1;o>=0;o--){const e=t[o];"extensions"in e&&(n=e.extensions)}const i=Is(e.constructor,n),r=Object.create(i);r[Qr]=e,r[to]={},r[no]={};for(let o=0;o<t.length;++o){const e=t[o];for(const t in e)r[t]=e[t]}return Object.freeze(r),r}(this,t),this.id=this.props.id,this.count=Bs++}clone(e){const{props:t}=this,n={};for(const i in t[eo])i in t[no]?n[i]=t[no][i]:i in t[to]&&(n[i]=t[to][i]);return new this.constructor({...t,...n,...e})}}(Ds=Us).componentName="Component",Ds.defaultProps={};const zs=Object.freeze({});class Gs{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||zs}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[Qr]||this.component;const t=e[no]||{},n=e[to]||e,i=e[eo]||{};for(const r in t){const e=t[r];this._createAsyncPropData(r,i[r]),this._updateAsyncProp(r,e),t[r]=this.getAsyncProp(r)}for(const r in n){const e=n[r];this._createAsyncPropData(r,i[r]),this._updateAsyncProp(r,e)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"===typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):lt(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),i.resolvedValue=t,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,i),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let r=[],o=0;for await(const s of t){if(!this.component)return;const{dataTransform:t}=this.component.props;r=t?t(s,r):r.concat(s),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:o,endRow:r.length}]}),o=r.length,this._setAsyncPropValue(e,r,i)}this._onResolve(e,r)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[$r];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class js extends Gs{constructor(e){let{attributeManager:t,layer:n}=e;super(n),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,i=null===n||void 0===n?void 0:n.props.fetch;return i?i(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const i=n.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Vs=e=>"boolean"===typeof e,Ws=e=>"function"===typeof e,Hs=e=>null!==e&&"object"===typeof e,Xs=e=>Hs(e)&&e.constructor==={}.constructor,Ks=e=>Boolean(e)&&"function"===typeof e[Symbol.iterator],Ys=e=>e&&"function"===typeof e[Symbol.asyncIterator],qs=e=>"undefined"!==typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Zs=e=>"undefined"!==typeof Blob&&e instanceof Blob,Qs=e=>e&&"object"===typeof e&&e.isBuffer,$s=e=>(e=>"undefined"!==typeof ReadableStream&&e instanceof ReadableStream||Hs(e)&&Ws(e.tee)&&Ws(e.cancel)&&Ws(e.getReader))(e)||(e=>Hs(e)&&Ws(e.read)&&Ws(e.pipe)&&Vs(e.readable))(e);function Js(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function ea(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function ta(e){var t,n;let i;return Js(e,"null loader"),Js(ea(e),"invalid loader"),Array.isArray(e)&&(i=e[1],e=e[0],e={...e,options:{...e.options,...i}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}let na="";const ia={};class ra extends Error{constructor(e,t){super(e),H(this,"reason",void 0),H(this,"url",void 0),H(this,"response",void 0),this.reason=t.reason,this.url=t.url,this.response=t.response}}const oa=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,sa=/^([-\w.]+\/[-\w.+]+)/;function aa(e,t){return e.toLowerCase()===t.toLowerCase()}function la(e){const t=oa.exec(e);return t?t[1]:""}const ca=/\?.*/;function ua(e){return e.replace(ca,"")}function da(e){if(qs(e)){return e.url}if(Zs(e)){return e.name||""}return"string"===typeof e?e:""}function ha(e){if(qs(e)){const t=e,n=t.headers.get("content-type")||"",i=ua(t.url);return function(e){const t=sa.exec(e);return t?t[1]:e}(n)||la(i)}if(Zs(e)){return e.type||""}return"string"===typeof e?la(e):""}async function fa(e){if(qs(e))return e;const t={},n=function(e){if(qs(e))return e.headers["content-length"]||-1;if(Zs(e))return e.size;return"string"===typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const i=da(e),r=ha(e);r&&(t["content-type"]=r);const o=await async function(e){const t=5;if("string"===typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>{var n;return e(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const n=function(e){let t="";const n=new Uint8Array(e);for(let i=0;i<n.byteLength;i++)t+=String.fromCharCode(n[i]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(n)}return null}(e);o&&(t["x-first-bytes"]=o),"string"===typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:i}),s}async function pa(e){if(!e.ok){const t=await async function(e){const n=function(e){if(e.length<50)return e;const t=e.slice(e.length-15),n=e.substr(0,32);return"".concat(n,"...").concat(t)}(e.url);let i="Failed to fetch resource (".concat(e.status,") ").concat(e.statusText,": ").concat(n);i=i.length>100?"".concat(i.slice(0,100),"..."):i;const r={reason:e.statusText,url:e.url,response:e};try{const t=e.headers.get("Content-Type");r.reason=null!==t&&void 0!==t&&t.includes("application/json")?await e.json():e.text()}catch(t){}return new ra(i,r)}(e);throw t}}async function ga(e,t){if("string"===typeof e){const r=function(e){for(const t in ia)if(e.startsWith(t)){const n=ia[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(na).concat(e)),e}(e);var n,i;if(function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(r))if(null!==(n=globalThis.loaders)&&void 0!==n&&n.fetchNode)return null===(i=globalThis.loaders)||void 0===i?void 0:i.fetchNode(r,t);return await fetch(r,t)}return await fa(e)}const ma=new pe({id:"loaders.gl"});class _a{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const va=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),ya="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),ba=(ya&&parseFloat(ya[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){H(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:va,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),wa={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Ea(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function Sa(){const e=Ea();return e.globalOptions=e.globalOptions||{...ba},e.globalOptions}function Ta(e,t,n,i){return n=n||[],function(e,t){xa(e,null,ba,wa,t);for(const n of t){const i=e&&e[n.id]||{},r=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};xa(i,n.id,r,o,t)}}(e,n=Array.isArray(n)?n:[n]),Ra(t,e,i)}function xa(e,t,n,i,r){const o=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&Hs(e[a]);if(!(a in n)&&!("baseUri"===a&&!t)&&!("workerUrl"===a&&t))if(a in i)ma.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!l){const e=Aa(a,r);ma.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(e))()}}}function Aa(e,t){const n=e.toLowerCase();let i="";for(const r of t)for(const t in r.options){if(e===t)return"Did you mean '".concat(r.id,".").concat(t,"'?");const o=t.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(t,"'?"))}return i}function Ra(e,t,n){const i={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(i,n),null===i.log&&(i.log=new _a),Ca(i,Sa()),Ca(i,t),i}function Ca(e,t){for(const n in t)if(n in t){const i=t[n];Xs(i)&&Xs(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Pa(e,t){const n=Sa(),i=e||n;return"function"===typeof i.fetch?i.fetch:Hs(i.fetch)?e=>ga(e,i.fetch):null!==t&&void 0!==t&&t.fetch?null===t||void 0===t?void 0:t.fetch:ga}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const La="object"!==typeof process||"[object process]"!==String(process)||process.browser,Ma="undefined"!==typeof window&&"undefined"!==typeof window.orientation,ka="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);ka&&parseFloat(ka[1]);class Ia{terminate(){}}function Oa(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Na=new Map;function Fa(e){Oa(e.source&&!e.url||!e.source&&e.url);let t=Na.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Da((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),Na.set(e.url,t)),e.source&&(t=Da(e.source),Na.set(e.source,t))),Oa(t),t}function Da(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Ba(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(e){if(Ua(e))i.add(e);else if(Ua(e.buffer))i.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===typeof e)for(const r in e)Ba(e[r],t,i)}else;return void 0===n?Array.from(i):[]}function Ua(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const za=()=>{};class Ga{static isSupported(){return"undefined"!==typeof Worker&&La||"undefined"!==typeof Ia&&!La}constructor(e){H(this,"name",void 0),H(this,"source",void 0),H(this,"url",void 0),H(this,"terminated",!1),H(this,"worker",void 0),H(this,"onMessage",void 0),H(this,"onError",void 0),H(this,"_loadableURL","");const{name:t,source:n,url:i}=e;Oa(n||i),this.name=t,this.source=n,this.url=i,this.onMessage=za,this.onError=e=>console.log(e),this.worker=La?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=za,this.onError=za,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Ba(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=Fa({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Ia(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Ia(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class ja{constructor(e,t){H(this,"name",void 0),H(this,"workerThread",void 0),H(this,"isRunning",!0),H(this,"result",void 0),H(this,"_resolve",(()=>{})),H(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Oa(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Oa(this.isRunning),this.isRunning=!1,this._reject(e)}}class Va{static isSupported(){return Ga.isSupported()}constructor(e){H(this,"name","unnamed"),H(this,"source",void 0),H(this,"url",void 0),H(this,"maxConcurrency",1),H(this,"maxMobileConcurrency",1),H(this,"onDebug",(()=>{})),H(this,"reuseWorkers",!0),H(this,"props",{}),H(this,"jobQueue",[]),H(this,"idleQueue",[]),H(this,"count",0),H(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t,n)=>e.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e.error(t);const i=new Promise((i=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:i}),this)));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const i=new ja(t.name,e);e.onMessage=e=>t.onMessage(i,e.type,e.payload),e.onError=e=>t.onError(i,e),t.onStart(i);try{await i.result}catch(n){console.error("Worker exception: ".concat(n))}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!La||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Ga({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Ma?this.maxMobileConcurrency:this.maxConcurrency}}const Wa={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ha{static isSupported(){return Ga.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ha._workerFarm=Ha._workerFarm||new Ha({}),Ha._workerFarm.setProps(e),Ha._workerFarm}constructor(e){H(this,"props",void 0),H(this,"workerPools",new Map),this.props={...Wa},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:i}=e;let r=this.workerPools.get(t);return r||(r=new Va({name:t,source:n,url:i}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}H(Ha,"_workerFarm",void 0);const Xa="latest";const Ka=function(){var e;return null!==(e=globalThis._loadersgl_)&&void 0!==e&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}();async function Ya(e,t,n,i,r){const o=e.id,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t[e.id]||{},i="".concat(e.id,La?"-worker.js":"-worker-node.js");let r=n.workerUrl;if(r||"compression"!==e.id||(r=t.workerUrl),"test"===t._workerType&&(r=La?"modules/".concat(e.module,"/dist/").concat(i):"modules/".concat(e.module,"/src/workers/").concat(e.id,"-worker-node.ts")),!r){let t=e.version;"latest"===t&&(t=Xa);const n=t?"@".concat(t):"";r="https://unpkg.com/@loaders.gl/".concat(e.module).concat(n,"/dist/").concat(i)}return Oa(r),r}(e,n),a=Ha.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=await a.startJob("process-on-worker",qa.bind(null,r));l.postMessage("process",{input:t,options:n,context:i});const c=await l.result;return await c.result}async function qa(e,t,n,i){switch(n){case"done":t.done(i);break;case"error":t.error(new Error(i.error));break;case"process":const{id:o,input:s,options:a}=i;try{const n=await e(s,a);t.postMessage("done",{id:o,result:n})}catch(r){const e=r instanceof Error?r.message:"unknown error";t.postMessage("error",{id:o,error:e})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function Za(e,t){return Qa(e||{},t)}function Qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>3)return t;const i={...e};for(const[r,o]of Object.entries(t))o&&"object"===typeof o&&!Array.isArray(o)?i[r]=Qa(i[r]||{},t[r],n+1):i[r]=t[r];return i}function $a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),n=t.reduce(((e,t)=>e+t.byteLength),0),i=new Uint8Array(n);let r=0;for(const o of t)i.set(o,r),r+=o.byteLength;return i.buffer}(t)}const Ja=262144;const el=262144;const tl=1048576;function nl(e){if((t=e)&&"object"===typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"===typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"===typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function il(e,t){return va?async function*(e,t){const n=e.getReader();let i;try{for(;;){const e=i||n.read();null!==t&&void 0!==t&&t._streamReadAhead&&(i=n.read());const{done:r,value:o}=await e;if(r)return;yield nl(o)}}catch(r){n.releaseLock()}}(e,t):async function*(e,t){for await(const n of e)yield nl(n)}(e)}function rl(e,t){if("string"===typeof e)return function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||Ja;let i=0;const r=new TextEncoder;for(;i<e.length;){const t=Math.min(e.length-i,n),o=e.slice(i,i+t);i+=t,yield r.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=el}=t;let i=0;for(;i<e.byteLength;){const t=Math.min(e.byteLength-i,n),r=new ArrayBuffer(t),o=new Uint8Array(e,i,t);new Uint8Array(r).set(o),i+=t,yield r}}()}(e,t);if(Zs(e))return async function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||tl;let i=0;for(;i<e.size;){const t=i+n,r=await e.slice(i,t).arrayBuffer();i=t,yield r}}(e,t);if($s(e))return il(e,t);if(qs(e)){return il(e.body,t)}throw new Error("makeIterator")}const ol="Cannot convert supplied data type";async function sl(e,t,n){const i=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"===typeof e||i)return function(e,t,n){if(t.text&&"string"===typeof e)return e;if(Qs(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return 0===e.byteOffset&&i===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(ol)}(e,t);if(Zs(e)&&(e=await fa(e)),qs(e)){const n=e;return await pa(n),t.binary?await n.arrayBuffer():await n.text()}if($s(e)&&(e=rl(e,n)),Ks(e)||Ys(e))return async function(e){const t=[];for await(const n of e)t.push(n);return $a(...t)}(e);throw new Error(ol)}function al(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function ll(e,t,n){if(n)return n;const i={fetch:Pa(t,e),...e};if(i.url){const e=ua(i.url);i.baseUrl=e,i.queryString=function(e){const t=e.match(ca);return t&&t[0]}(i.url),i.filename=al(e),i.baseUrl=function(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}(e)}return Array.isArray(i.loaders)||(i.loaders=null),i}const cl=new pe({id:"loaders.gl"}),ul=()=>{const e=Ea();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};const dl=/\.([^.]+)$/;function hl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!fl(e))return null;if(t&&!Array.isArray(t))return ta(t);let r=[];t&&(r=r.concat(t)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||r.push(...ul()),function(e){for(const t of e)ta(t)}(r);const o=function(e,t,n,i){const r=da(e),o=ha(e),s=ua(r)||(null===i||void 0===i?void 0:i.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=gl(t,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));a=a||function(e,t){const n=t&&dl.exec(t),i=n&&n[1];return i?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,i):null}(t,s),l=l||(a?"matched url ".concat(s):""),a=a||gl(t,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"===typeof t){if(ml(t,n))return n}else if(ArrayBuffer.isView(t)){if(_l(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(_l(t,0,n))return n}return null}(t,e),l=l||(a?"matched initial data ".concat(vl(e)):""),null!==n&&void 0!==n&&n.fallbackMimeType&&(a=a||gl(t,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""));var c;l&&cl.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}(e,r,n,i);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(pl(e));return o}function fl(e){return!(e instanceof Response&&204===e.status)}function pl(e){const t=da(e),n=ha(e);let i="No valid loader found (";i+=t?"".concat(al(t),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=e?vl(e):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function gl(e,t){for(const i of e){var n;if(null!==(n=i.mimeTypes)&&void 0!==n&&n.some((e=>aa(t,e))))return i;if(aa(t,"application/x.".concat(i.id)))return i}return null}function ml(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function _l(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((n=>function(e,t,n,i){if(i instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const i=new Uint8Array(e),r=new Uint8Array(t);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,e,i.byteLength);switch(typeof i){case"function":return i(e);case"string":return i===yl(e,t,i.length);default:return!1}}(e,t,0,n)))}function vl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return yl(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return yl(e,0,t)}return""}function yl(e,t,n){if(e.byteLength<t+n)return"";const i=new DataView(e);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(t+o));return r}async function bl(e,t,n,i){!t||Array.isArray(t)||ea(t)||(i=void 0,n=t,t=void 0),n=n||{};const r=da(e=await e),o=function(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:void 0}(t,i),s=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!fl(e))return null;let r=hl(e,t,{...n,nothrow:!0},i);if(r)return r;if(Zs(e)&&(r=hl(e=await e.slice(0,10).arrayBuffer(),t,n,i)),!r&&(null===n||void 0===n||!n.nothrow))throw new Error(pl(e));return r}(e,o,n);return s?(i=ll({url:r,_parse:bl,loaders:o},n=Ta(n,s,o,r),i||null),await async function(e,t,n,i){if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ka;Oa(e,"no worker provided");const n=e.version}(e),n=Za(e.options,n),qs(t)){const e=t,{ok:n,redirected:r,status:o,statusText:s,type:a,url:l}=e,c=Object.fromEntries(e.headers.entries());i.response={headers:c,ok:n,redirected:r,status:o,statusText:s,type:a,url:l}}t=await sl(t,e,n);const r=e;if(r.parseTextSync&&"string"===typeof t)return r.parseTextSync(t,n,i);if(function(e,t){return!!Ha.isSupported()&&!!(La||null!==t&&void 0!==t&&t._nodeWorkers)&&e.worker&&(null===t||void 0===t?void 0:t.worker)}(e,n))return await Ya(e,t,n,i,bl);if(r.parseText&&"string"===typeof t)return await r.parseText(t,n,i);if(r.parse)return await r.parse(t,n,i);throw Oa(!r.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(s,e,n,i)):null}async function wl(e,t,n,i){let r,o;Array.isArray(t)||ea(t)?(r=t,o=n):(r=[],o=t);const s=Pa(o);let a=e;return"string"===typeof e&&(a=await s(e)),Zs(e)&&(a=await s(e)),Array.isArray(r),await bl(a,r,o)}var El;const Sl=2**24-1,Tl=Object.freeze([]),xl=yt((e=>{let{oldViewport:t,viewport:n}=e;return t.equals(n)}));let Al=new Uint8ClampedArray(0);const Rl={data:{type:"data",value:Tl,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,t)=>{let{propName:n,layer:i,loaders:r,loadOptions:o,signal:s}=t;const{resourceManager:a}=i.context;var l;(o=o||i.getLoadOptions(),r=r||i.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(e);return c||o||(a.add({resourceId:e,data:wl(e,r),persistent:!1}),c=!0),c?a.subscribe({resourceId:e,onChange:e=>{var t;return null===(t=i.internalState)||void 0===t?void 0:t.reloadAsyncProp(n,e)},consumerId:i.id,requestId:n}):wl(e,r,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ye.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:e=>{let{layerIndex:t}=e;return[0,100*-t]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Cl extends Us{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Hr,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){rt(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=Es(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,r,o]=cs(n,t.pixelProjectionMatrix);return 2===e.length?[i,r]:[i,r,o]}unproject(e){rt(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){rt(this.internalState);return Ss(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}setShaderModuleProps(){for(const e of this.getModels())e.shaderInputs.setProps(...arguments)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ye.DEFAULT||e===ye.LNGLAT||e===ye.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){rt(e instanceof Uint8Array);const[t,n,i]=e;return t+256*n+65536*i-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:co(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=uo(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const t of this.props.extensions)e=uo(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const i of n)t.invalidateAll(i);else t.invalidateAll();if(t){const{props:n}=e,i=this.internalState.hasPickingBuffer,r=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(i!==r){this.internalState.hasPickingBuffer=r;const{pickingColors:e,instancePickingColors:n}=t.attributes,i=e||n;i&&(r&&i.constant&&(i.constant=!1,t.invalidate(i.id)),i.value||r||(i.constant=!0,i.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo(e){let{info:t,mode:n,sourceLayer:i}=e;const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}raiseError(e,t){var n,i,r,o;(t&&(e=new Error("".concat(t,": ").concat(e.message),{cause:e})),null!==(n=(i=this.props).onError)&&void 0!==n&&n.call(i,e))||(null===(r=this.context)||void 0===r||null===(o=r.onError)||void 0===o||o.call(r,e,this))}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&xl({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){let t=!1;for(const n in e)e[n].layoutChanged()&&(t=!0);for(const n of this.getModels())this._setModelAttributes(n,e,t)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),i=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:i,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const r=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,t){let{numInstances:n}=t;if(e.constant)return;const i=Math.floor(Al.length/4);if(this.internalState.usesPickingColorCache=!0,i<n){n>Sl&&ve.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Al=Pe.allocate(Al,n,{size:4,copy:!0,maxCount:Math.max(n,Sl)});const e=Math.floor(Al.length/4),t=[];for(let n=i;n<e;n++)this.encodePickingColor(n,t),Al[4*n+0]=t[0],Al[4*n+1]=t[1],Al[4*n+2]=t[2]}e.value=Al.subarray(0,4*n)}_setModelAttributes(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Object.keys(t).length)return;if(i){const n=this.getAttributeManager();e.setBufferLayout(n.getBufferLayouts(e)),t=n.getAttributes()}const r=(null===(n=e.userData)||void 0===n?void 0:n.excludeAttributes)||{},o={},s={};for(const a in t){if(r[a])continue;const n=t[a].getValue();for(const i in n){const r=n[i];r instanceof Z?t[a].settings.isIndexed?e.setIndexBuffer(r):o[i]=r:r&&(s[i]=r)}}e.setAttributes(o),e.setConstantAttributes(s)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t))return void this._disablePickingIndex(e);const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i,o=r&&t.attributes&&t.attributes[r.id];if(o&&o.value){const n=o.value,i=this.encodePickingColor(e);for(let e=0;e<t.length;e++){const t=r.getVertexOffset(e);n[t]===i[0]&&n[t+1]===i[1]&&n[t+2]===i[2]&&this._disablePickingIndex(e)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,i=t||n;if(!i)return;const r=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(o-r),r)}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Al.buffer&&(n.value=Al.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){rt(!this.internalState),rt(Number.isFinite(this.props.coordinateSystem)),Et("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new js({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ve.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Wr(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Et("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Et("layer.update",this,e),!e)return;const t=this.props,n=this.context,i=this.internalState,r=n.viewport,o=this._updateUniformTransition();i.propsInTransition=o,n.viewport=i.viewport||r,this.props=o;try{const e=this._getUpdateParams(),t=this.getModels();if(n.device)this.updateState(e);else try{this.updateState(e)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,e,n);const i=this.getModels()[0]!==t[0];this._postUpdate(e,i)}finally{n.viewport=r,this.props=t,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Et("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer(e){let{renderPass:t,moduleParameters:n=null,uniforms:i={},parameters:r={}}=e;this._updateAttributeTransition();const o=this.props,s=this.context;this.props=this.internalState.propsInTransition||o;const a=this.props.opacity;i.opacity=Math.pow(a,1/2.2);try{if(n){const{isActive:e,isAttribute:t}=n.picking;this.setModuleParameters(n),this.setShaderModuleProps({picking:{isActive:e,isAttribute:t}})}const{getPolygonOffset:e}=this.props,o=e&&e(i)||[0,0];s.device.setParametersWebGL({polygonOffset:o});for(const t of this.getModels())t.setParameters(r);s.device.withParametersWebGL(r,(()=>{const e={renderPass:t,moduleParameters:n,uniforms:i,parameters:r,context:s};for(const t of this.props.extensions)t.draw.call(this,e,t);this.draw(e)}))}finally{this.props=o}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const i in e)if(e[i]){let n=!1;if("dataChanged"===i){const r=e[i],o=t[i];r&&Array.isArray(o)&&(t.dataChanged=Array.isArray(r)?o.concat(r):r,n=!0)}t[i]||(t[i]=e[i],n=!0),n&&Et("layer.changeFlag",this,i,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=io(e,t);if(n.updateTriggersChanged)for(const r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(const r in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(r,t[r],e[r],null===(i=e.transitions)||void 0===i?void 0:i[r])}return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[$r];for(const n in t){const i=t[n],{validate:r}=i;if(r&&!r(e[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"===typeof n&&(t.highlightColor=n(e)),this.setShaderModuleProps({picking:t}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Ur(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const r=this.state.model;null!==r&&void 0!==r&&r.isInstanced&&r.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(t||i.autoHighlight!==o||i.highlightedObjectIndex!==s||i.highlightColor!==a){const e={};o||(e.highlightedObjectColor=null),Array.isArray(a)&&(e.highlightColor=a),(t||s!==i.highlightedObjectIndex)&&(e.highlightedObjectColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setShaderModuleProps({picking:e})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=!!n&&n.getNeedsRedraw(e);if(t=t||i,t)for(const r of this.props.extensions)r.onNeedsRedraw.call(this,r);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}(El=Cl).defaultProps=Rl,El.layerName="Layer";class Pl extends Cl{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo(e){let{info:t}=e;const{object:n}=t;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(t.object=n.__source.object,t.index=n.__source.index,t):t}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"===typeof e){const t={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,i)}return e}getSubLayerProps(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:_,_subLayerProps:v}=this.props,y={id:"",updateTriggers:{},opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:_},b=v&&t.id&&v[t.id],w=b&&b.updateTriggers,E=t.id||"sublayer";if(b){const e=this.props[$r],n=t.type?t.type._propTypes:{};for(const t in b){const i=n[t]||e[t];i&&"accessor"===i.type&&(b[t]=this.getSubLayerAccessor(b[t]))}}Object.assign(y,t,b),y.id="".concat(this.props.id,"-").concat(E),y.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...w};for(const S of g){const e=S.getSubLayerProps.call(this,S);e&&Object.assign(y,e,{updateTriggers:Object.assign(y.updateTriggers,e.updateTriggers)})}return y}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){n=ut(this.renderLayers(),Boolean),this.internalState.subLayers=n}Et("compositeLayer.renderLayers",this,i,n);for(const r of n)r.parent=this}}function Ll(e){let{data:t,getIndex:n,dataRange:i,replace:r}=e;const{startRow:o=0,endRow:s=1/0}=i,a=t.length;let l=a,c=a;for(let h=0;h<a;h++){const e=n(t[h]);if(l>h&&e>=o&&(l=h),e>=s){c=h;break}}let u=l;const d=c-l!==r.length?t.slice(c):void 0;for(let h=0;h<r.length;h++)t[u++]=r[h];if(d){for(let e=0;e<d.length;e++)t[u++]=d[e];t.length=u}return{startRow:l,endRow:l+r.length}}Pl.layerName="CompositeLayer";const Ml={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\nfloat sin_taylor_fp32(float a) {\nfloat r, s, t, x;\nif (a == 0.0) {\nreturn 0.0;\n}\nx = -a * a;\ns = a;\nr = a;\nr = r * x;\nt = r * INVERSE_FACTORIAL_3;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_5;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_7;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_9;\ns = s + t;\nreturn s;\n}\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\nif (a == 0.0) {\nsin_t = 0.0;\ncos_t = 1.0;\n}\nsin_t = sin_taylor_fp32(a);\ncos_t = sqrt(1.0 - sin_t * sin_t);\n}\nfloat tan_taylor_fp32(float a) {\nfloat sin_a;\nfloat cos_a;\nif (a == 0.0) {\nreturn 0.0;\n}\nfloat z = floor(a / TWO_PI);\nfloat r = a - TWO_PI * z;\nfloat t;\nfloat q = floor(r / PI_2 + 0.5);\nint j = int(q);\nif (j < -2 || j > 2) {\nreturn 1.0 / 0.0;\n}\nt = r - PI_2 * q;\nq = floor(t / PI_16 + 0.5);\nint k = int(q);\nint abs_k = int(abs(float(k)));\nif (abs_k > 4) {\nreturn 1.0 / 0.0;\n} else {\nt = t - PI_16 * q;\n}\nfloat u = 0.0;\nfloat v = 0.0;\nfloat sin_t, cos_t;\nfloat s, c;\nsincos_taylor_fp32(t, sin_t, cos_t);\nif (k == 0) {\ns = sin_t;\nc = cos_t;\n} else {\nif (abs(float(abs_k) - 1.0) < 0.5) {\nu = COS_TABLE_0;\nv = SIN_TABLE_0;\n} else if (abs(float(abs_k) - 2.0) < 0.5) {\nu = COS_TABLE_1;\nv = SIN_TABLE_1;\n} else if (abs(float(abs_k) - 3.0) < 0.5) {\nu = COS_TABLE_2;\nv = SIN_TABLE_2;\n} else if (abs(float(abs_k) - 4.0) < 0.5) {\nu = COS_TABLE_3;\nv = SIN_TABLE_3;\n}\nif (k > 0) {\ns = u * sin_t + v * cos_t;\nc = u * cos_t - v * sin_t;\n} else {\ns = u * sin_t - v * cos_t;\nc = u * cos_t + v * sin_t;\n}\n}\nif (j == 0) {\nsin_a = s;\ncos_a = c;\n} else if (j == 1) {\nsin_a = c;\ncos_a = -s;\n} else if (j == -1) {\nsin_a = -c;\ncos_a = s;\n} else {\nsin_a = -s;\ncos_a = -c;\n}\nreturn sin_a / cos_a;\n}\n#endif\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nreturn tan_taylor_fp32(a);\n#else\nreturn tan(a);\n#endif\n}\n"},kl="#define SMOOTH_EDGE_RADIUS 0.5",Il={name:"geometry",vs:"\n".concat(kl,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(kl,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Ol=Object.keys(ye).map((e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ye[e],";"))).join(""),Nl=Object.keys(be).map((e=>"const int PROJECTION_MODE_".concat(e," = ").concat(be[e],";"))).join(""),Fl=Object.keys(we).map((e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(we[e],";"))).join(""),Dl="".concat(Ol,"\n").concat(Nl,"\n").concat(Fl,"\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject_uPseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project_uCommonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project_uWrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project_uModelMatrix * position;\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project_uCoordinateOrigin;\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project_uCommonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project_uCoordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\nreturn offset * project_uFocalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project_uScale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project_uScale;\n}\n"),Bl={};const Ul={name:"project",dependencies:[Ml,Il],vs:Dl,getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bl;return"viewport"in e?function(e){let{viewport:t,devicePixelRatio:n=1,modelMatrix:i=null,coordinateSystem:r=ye.DEFAULT,coordinateOrigin:o=xo,autoWrapLongitude:s=!1}=e;r===ye.DEFAULT&&(r=t.isGeospatial?ye.LNGLAT:ye.CARTESIAN);const a=Ao({viewport:t,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=i||So,a}(e):{}}},zl={name:"project32",dependencies:[Ul],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Gl=new Float32Array([0,1,1,1]),jl={name:"picking",vs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nout vec4 picking_vRGBcolor_Avalid;\nvec3 picking_normalizeColor(vec3 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nvec4 picking_normalizeColor(vec4 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nbool picking_isColorZero(vec3 color) {\nreturn dot(color, vec3(1.0)) < 0.00001;\n}\nbool picking_isColorValid(vec3 color) {\nreturn dot(color, vec3(1.0)) > 0.00001;\n}\nbool isVertexHighlighted(vec3 vertexColor) {\nvec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\nreturn\nbool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\nvoid picking_setPickingColor(vec3 pickingColor) {\npickingColor = picking_normalizeColor(pickingColor);\nif (bool(picking.isActive)) {\npicking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\nif (!bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = pickingColor;\n}\n} else {\npicking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n}\n}\nvoid picking_setPickingAttribute(float value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.r = value;\n}\n}\nvoid picking_setPickingAttribute(vec2 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rg = value;\n}\n}\nvoid picking_setPickingAttribute(vec3 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = value;\n}\n}\n",fs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\nif (picking.isActive > 0.5) {\nreturn color;\n}\nbool selected = bool(picking_vRGBcolor_Avalid.a);\nif (selected) {\nfloat highLightAlpha = picking.highlightColor.a;\nfloat blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\nfloat highLightRatio = highLightAlpha / blendedAlpha;\nvec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\nreturn vec4(blendedRGB, blendedAlpha);\n} else {\nreturn color;\n}\n}\nvec4 picking_filterPickingColor(vec4 color) {\nif (bool(picking.isActive)) {\nif (picking_vRGBcolor_Avalid.a == 0.0) {\ndiscard;\n}\nreturn picking_vRGBcolor_Avalid;\n}\nreturn color;\n}\nvec4 picking_filterColor(vec4 color) {\nvec4 highlightColor = picking_filterHighlightColor(color);\nreturn picking_filterPickingColor(highlightColor);\n}\n",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:new Float32Array([0,0,0]),highlightColor:Gl},getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};if(void 0===e.highlightedObjectColor);else if(null===e.highlightedObjectColor)t.isHighlightActive=!1;else{t.isHighlightActive=!0;const n=e.highlightedObjectColor.slice(0,3);t.highlightedObjectColor=n}if(e.highlightColor){const n=Array.from(e.highlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.highlightColor=n}void 0!==e.isActive&&(t.isActive=Boolean(e.isActive),t.isAttribute=Boolean(e.isAttribute));void 0!==e.useFloatColors&&(t.useFloatColors=Boolean(e.useFloatColors));return t}};const Vl={...jl,defaultUniforms:{...jl.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}};class Wl{constructor(e){H(this,"id",void 0),H(this,"topology",void 0),H(this,"vertexCount",void 0),H(this,"indices",void 0),H(this,"attributes",void 0),H(this,"userData",{});const{attributes:t={},indices:n=null,vertexCount:i=null}=e;this.id=e.id||K("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[r,o]of Object.entries(t)){const e=ArrayBuffer.isView(o)?{value:o}:o;St(ArrayBuffer.isView(e.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),"POSITION"!==r&&"positions"!==r||e.size||(e.size=3),"indices"===r?(St(!this.indices),this.indices=e):this.attributes[r]=e}this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){return this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const i of Object.values(e)){const{value:e,size:t,constant:r}=i;!r&&e&&t>=1&&(n=Math.min(n,e.length/t))}return St(Number.isFinite(n)),n}}const Hl=()=>{},Xl={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Kl={x:0,y:0,width:0,height:0};function Yl(e,t,n,i){const r=Math.min(n/t.width,i/t.height),o=Math.floor(t.width*r),s=Math.floor(t.height*r);return 1===r?{data:t,width:o,height:s}:(e.canvas.height=s,e.canvas.width=o,e.clearRect(0,0,o,s),e.drawImage(t,0,0,t.width,t.height,0,0,o,s),{data:e.canvas,width:o,height:s})}function ql(e){return e&&(e.id||e.url)}function Zl(e,t,n){for(let i=0;i<t.length;i++){const{icon:r,xOffset:o}=t[i];e[ql(r)]={...r,x:o,y:n}}}class Ql{constructor(e,t){let{onUpdate:n=Hl,onError:i=Hl}=t;this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?ql(e):e;return this._mapping[t]||Kl}setProps(e){let{loadOptions:t,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}=e;var s;(t&&(this._loadOptions=t),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i)&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=at(e);for(const s of r){o.index++;const e=t(s,o),r=ql(e);if(!e)throw new Error("Icon is missing.");if(!e.url)throw new Error("Icon url is missing.");i[r]||n[r]&&e.url===n[r].url||(i[r]={...e,source:s,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(n.length>0){const{mapping:e,xOffset:t,yOffset:i,rowHeight:r,canvasHeight:o}=function(e){let{icons:t,buffer:n,mapping:i={},xOffset:r=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=e,l=[];for(let u=0;u<t.length;u++){const e=t[u];if(!i[ql(e)]){const{height:t,width:c}=e;r+c+n>a&&(Zl(i,l,o),r=0,o=s+o+n,s=0,l=[]),l.push({icon:e,xOffset:r}),r=r+c+n,s=Math.max(s,t)}}return l.length>0&&Zl(i,l,o),{mapping:i,rowHeight:s,xOffset:r,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=e,this._xOffset=t,this._yOffset=i,this._canvasHeight=o,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||Xl})),this._texture.height!==this._canvasHeight&&(this._texture=function(e,t,n,i){const{width:r,height:o,device:s}=e,a=s.createTexture({format:"rgba8unorm",width:t,height:n,sampler:i}),l=s.createCommandEncoder();return l.copyTextureToTexture({source:e,destination:a,width:r,height:o}),l.finish(),e.destroy(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Xl)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,wl(n.url,this._loadOptions).then((e=>{const i=ql(n),r=this._mapping[i],{x:o,y:s,width:a,height:l}=r,{data:c,width:u,height:d}=Yl(t,e,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),r.width=u,r.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})})).finally((()=>{this._pendingCount--}))}}var $l;const Jl=[0,0,0,255],ec={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:Jl},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class tc extends Cl{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\nfloat instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n",fs:"#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * opacity * vColor.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[zl,Vl]})}initializeState(){this.state={iconManager:new Ql(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:Jl},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:i}=e,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=t,{iconManager:u}=this.state;if("string"===typeof o)return;const d=o||this.internalState.isAsyncPropLoading("iconAtlas");var h;(u.setProps({loadOptions:t.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==t.iconMapping&&r.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&u.packIcons(a,l),i.extensionsChanged)&&(null===(h=this.state.model)||void 0===h||h.destroy(),this.state.model=this._getModel(),r.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw(e){let{uniforms:t}=e;const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();if(c){const e=this.state.model;e.setBindings({iconsTexture:c}),e.setUniforms(t),e.setUniforms({iconsTextureDim:[c.width,c.height],sizeUnits:we[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}),e.draw(this.context.renderPass)}}_getModel(){return new pr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Wl({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([-1,-1,1,-1,-1,1,1,1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const n=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;n?n(e):ve.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:n,anchorX:i=t/2,anchorY:r=n/2}=this.state.iconManager.getIconMapping(e);return[t/2-i,n/2-r]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:n,width:i,height:r}=this.state.iconManager.getIconMapping(e);return[t,n,i,r]}}($l=tc).defaultProps=ec,$l.layerName="IconLayer";var nc;const ic=[0,0,0,255],rc={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:ic},getLineColor:{type:"accessor",value:ic},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class oc extends Cl{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\nradiusMinPixels, radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\nlineWidthMinPixels, lineWidthMaxPixels\n);\nouterRadiusPixels += stroked * lineWidthPixels / 2.0;\nfloat edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\nif (billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (stroked > 0.5) {\nfloat isLine = antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (filled) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (!filled) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[zl,Vl]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var t;(super.updateState(e),e.changeFlags.extensionsChanged)&&(null===(t=this.state.model)||void 0===t||t.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw(e){let{uniforms:t}=e;const{radiusUnits:n,radiusScale:i,radiusMinPixels:r,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props,p=this.state.model;p.setUniforms(t),p.setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:we[n],radiusScale:i,radiusMinPixels:r,radiusMaxPixels:o,lineWidthUnits:we[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}),p.draw(this.context.renderPass)}_getModel(){return new pr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Wl({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0])}}}),isInstanced:!0})}}(nc=oc).defaultProps=rc,nc.layerName="ScatterplotLayer";var sc;const ac=.75,lc=[];class cc extends tc{getShaders(){return{...super.getShaders(),fs:"#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf) {\nfloat distance = alpha;\nalpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\nif (outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\ncolor = mix(outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(e,t)=>{let{index:n,target:i}=t;return this.encodePickingColor(n,i)}}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:i}=t;i!==n.outlineColor&&(i=i.map((e=>e/255)),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!t.sdf&&t.outlineWidth&&ve.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:n,outlineWidth:i}=this.props,{outlineColor:r}=this.state,o=i?Math.max(n,ac*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:ac,outlineBuffer:o,gamma:n,sdf:Boolean(t),outlineColor:r},super.draw(e),t&&i){const{iconManager:e}=this.state,t=e.getTexture(),n=this.state.model;t&&(n.setUniforms({outlineBuffer:ac}),n.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap((e=>super.getInstanceOffset(e))):lc}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap((e=>super.getInstanceIconFrame(e))):lc}}(sc=cc).defaultProps={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},sc.layerName="MultiIconLayer";const uc=1e20;class dc{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=i,this.radius=n;const a=this.size=e+4*t,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(e,"px ").concat(r),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),f={data:h,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return f;const{ctx:p,buffer:g,gridInner:m,gridOuter:_}=this;p.clearRect(g,g,a,l),p.fillText(e,g,g+s);const v=p.getImageData(g,g,a,l);_.fill(uc,0,d),m.fill(0,0,d);for(let y=0;y<l;y++)for(let e=0;e<a;e++){const t=v.data[4*(y*a+e)+3]/255;if(0===t)continue;const n=(y+g)*c+e+g;if(1===t)_[n]=0,m[n]=uc;else{const e=.5-t;_[n]=e>0?e*e:0,m[n]=e<0?e*e:0}}hc(_,0,0,c,u,c,this.f,this.v,this.z),hc(m,g,g,a,l,c,this.f,this.v,this.z);for(let y=0;y<d;y++){const e=Math.sqrt(_[y])-Math.sqrt(m[y]);h[y]=Math.round(255-255*(e/this.radius+this.cutoff))}return f}}function hc(e,t,n,i,r,o,s,a,l){for(let c=t;c<t+i;c++)fc(e,n*o+c,o,r,s,a,l);for(let c=n;c<n+r;c++)fc(e,c*o+t,1,i,s,a,l)}function fc(e,t,n,i,r,o,s){o[0]=0,s[0]=-uc,s[1]=uc,r[0]=e[t];for(let a=1,l=0,c=0;a<i;a++){r[a]=e[t+a*n];const i=a*a;do{const e=o[l];c=(r[a]-r[e]+i-e*e)/(a-e)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=uc}for(let a=0,l=0;a<i;a++){for(;s[l+1]<a;)l++;const i=o[l],c=a-i;e[t+a*n]=r[i]+c*c}}const pc=32,gc=[];function mc(e,t,n,i){let r=0;for(let s=t;s<n;s++){var o;r+=(null===(o=i[e[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function _c(e,t,n,i,r,o){let s=t,a=0;for(let l=t;l<n;l++){const t=mc(e,l,l+1,r);a+t>i&&(s<l&&o.push(l),s=l,a=0),a+=t}return a}function vc(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=e.length);const s=[];return"break-all"===t?_c(e,r,o,n,i,s):function(e,t,n,i,r,o){let s=t,a=t,l=t,c=0;for(let u=t;u<n;u++)if(" "===e[u]?l=u+1:" "!==e[u+1]&&u+1!==n||(l=u+1),l>a){let t=mc(e,a,l,r);c+t>i&&(s<a&&(o.push(a),s=a,c=0),t>i&&(t=_c(e,a,l,i,r,o),s=o[o.length-1])),a=l,c+=t}}(e,r,o,n,i,s),s}function yc(e,t,n,i,r,o){let s=0,a=0;for(let l=t;l<n;l++){const t=e[l],n=i[t];n?(a||(a=n.layoutHeight),r[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(ve.warn("Missing character: ".concat(t," (").concat(t.codePointAt(0),")"))(),r[l]=s,s+=pc)}o[0]=s,o[1]=a}class bc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this._cache={},this._order=[],this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const wc={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Ec=new bc(3);function Sc(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function Tc(e,t,n,i){e.font="".concat(i," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}class xc{constructor(){this.props={...wc}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(1.2*e+2*t)/e}setProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,e),this._key=this._getKey();const t=function(e,t){let n;n="string"===typeof t?new Set(Array.from(t)):new Set(t);const i=Ec.get(e);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),n=Ec.get(this._key);if(n&&0===t.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(t,n);this._atlas=i,Ec.set(this._key,i)}_generateFontAtlas(e,t){const{fontFamily:n,fontWeight:i,fontSize:r,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=t&&t.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});Tc(u,n,r,i);const{mapping:d,canvasHeight:h,xOffset:f,yOffset:p}=function(e){let{characterSet:t,getFontWidth:n,fontHeight:i,buffer:r,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=e,c=0,u=a;const d=i+2*r;for(const f of t)if(!s[f]){const e=n(f);u+e+2*r>o&&(u=0,c++),s[f]={x:u+r,y:l+c*d+r,width:e,height:d,layoutWidth:e,layoutHeight:i},u+=e+2*r}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(h=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:e=>u.measureText(e).width,fontHeight:1.2*r,buffer:o,characterSet:e,maxCanvasWidth:1024,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(c.height!==h){const e=u.getImageData(0,0,c.width,c.height);c.height=h,u.putImageData(e,0,0)}if(Tc(u,n,r,i),s){const t=new dc({fontSize:r,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:"".concat(i)});for(const n of e){const{data:e,width:i,height:o,glyphTop:s}=t.draw(n);d[n].width=i,d[n].layoutOffsetY=.9*r-s;const a=u.createImageData(i,o);Sc(e,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const g of e)u.fillText(g,d[g].x,d[g].y+o+.9*r);return{xOffset:f,yOffset:p,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:i,sdf:r,radius:o,cutoff:s}=this.props;return r?"".concat(e," ").concat(t," ").concat(n," ").concat(i," ").concat(o," ").concat(s):"".concat(e," ").concat(t," ").concat(n," ").concat(i)}}var Ac;const Rc={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Cc extends Cl{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nuniform bool stroked;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec2 pixelPosition = uv * dimensions;\nif (stroked) {\nfloat distToEdge = min(\nmin(pixelPosition.x, dimensions.x - pixelPosition.x),\nmin(pixelPosition.y, dimensions.y - pixelPosition.y)\n);\nfloat isBorder = smoothedge(distToEdge, vLineWidth);\nfragColor = mix(vFillColor, vLineColor, isBorder);\n} else {\nfragColor = vFillColor;\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[zl,Vl]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;var n;t.extensionsChanged&&(null===(n=this.state.model)||void 0===n||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw(e){let{uniforms:t}=e;const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]);const c=this.state.model;c.setUniforms(t),c.setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:we[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}),c.draw(this.context.renderPass)}_getModel(){return new pr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Wl({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}var Pc;(Ac=Cc).defaultProps=Rc,Ac.layerName="TextBackgroundLayer";const Lc={start:1,middle:0,end:-1},Mc={top:1,center:0,bottom:-1},kc=[0,0,0,255],Ic={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:kc},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:wc.characterSet},fontFamily:wc.fontFamily,fontWeight:wc.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:kc},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:kc},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Oc extends Pl{constructor(){super(...arguments),this.getBoundingRect=(e,t)=>{let{size:[n,i]}=this.transformParagraph(e,t);const{fontSize:r}=this.state.fontAtlasManager.props;n/=r,i/=r;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(Lc["function"===typeof o?o(e,t):o]-1)*n/2,(Mc["function"===typeof s?s(e,t):s]-1)*i/2,n,i]},this.getIconOffsets=(e,t)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:r,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(e,t),c=Lc["function"===typeof n?n(e,t):n],u=Mc["function"===typeof i?i(e,t):i],d=r.length,h=new Array(2*d);let f=0;for(let p=0;p<d;p++){const e=(1-c)*(a-s[p])/2;h[f++]=(c-1)*a/2+e+r[p],h[f++]=(u-1)*l/2+o[p]}return h}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new xc},this.props.maxWidth>0&&ve.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:n,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(e){let{info:t}=e;return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:r}=this.state,o={...e,characterSet:r,fontFamily:t,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const s in o)if(o[s]!==i.props[s])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:n}=this.props,i=null===(e=t.attributes)||void 0===e?void 0:e.getText;let r,{getText:o}=this.props,s=t.startIndices;const a="auto"===n&&new Set;if(i&&s){const{texts:e,characterCount:n}=function(e){let{value:t,length:n,stride:i,offset:r,startIndices:o,characterSet:s}=e;const a=t.BYTES_PER_ELEMENT,l=i?i/a:1,c=r?r/a:0,u=o[n]||Math.ceil((t.length-c)/l),d=s&&new Set,h=new Array(n);let f=t;if(l>1||c>0){f=new(0,t.constructor)(u);for(let e=0;e<u;e++)f[e]=t[e*l+c]}for(let p=0;p<n;p++){const e=o[p],t=o[p+1]||u,n=f.subarray(e,t);h[p]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const p of d)s.add(String.fromCodePoint(p));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(i)?{value:i}:i,length:t.length,startIndices:s,characterSet:a});r=n,o=(t,n)=>{let{index:i}=n;return e[i]}}else{const{iterable:e,objectInfo:n}=at(t);s=[0],r=0;for(const t of e){n.index++;const e=Array.from(o(t,n)||"");a&&e.forEach(a.add,a),r+=e.length,s.push(r)}}this.setState({getText:o,startIndices:s,numInstances:r,characterSet:a||n})}transformParagraph(e,t){const{fontAtlasManager:n}=this.state,i=n.mapping,r=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(e,t,n,i,r){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let _=0;_<=s;_++){const e=o[_];if("\n"!==e&&_!==s||(g=_),g>p){const e=u?vc(o,n,i,r,p,g):gc;for(let n=0;n<=e.length;n++){const i=0===n?p:e[n-1],s=n<e.length?e[n]:g;yc(o,i,s,r,a,h);for(let e=i;e<s;e++){var m;const t=(null===(m=r[o[e]])||void 0===m?void 0:m.layoutOffsetY)||0;l[e]=f+h[1]/2+t,c[e]=h[0]}f+=h[1]*t,d[0]=Math.max(d[0],h[0])}p=g}"\n"===e&&(a[p]=0,l[p]=0,c[p]=0,p++)}return d[1]=f,{x:a,y:l,rowWidth:c,size:d}}(r(e,t)||"",s,o,a*n.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:i,atlas:r,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:_,background:v,billboard:y,fontSettings:b,outlineWidth:w,outlineColor:E,sizeScale:S,sizeUnits:T,sizeMinPixels:x,sizeMaxPixels:A,transitions:R,updateTriggers:C}=this.props,P=this.getSubLayerClass("characters",cc),L=this.getSubLayerClass("background",Cc);return[v&&new L({getFillColor:p,getLineColor:g,getLineWidth:m,padding:_,getPosition:c,getSize:d,getAngle:h,getPixelOffset:f,billboard:y,sizeScale:S,sizeUnits:T,sizeMinPixels:x,sizeMaxPixels:A,transitions:R&&{getPosition:R.getPosition,getAngle:R.getAngle,getSize:R.getSize,getFillColor:R.getBackgroundColor,getLineColor:R.getBorderColor,getLineWidth:R.getBorderWidth,getPixelOffset:R.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset,getBoundingRect:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new P({sdf:b.sdf,smoothing:Number.isFinite(b.smoothing)?b.smoothing:wc.smoothing,outlineWidth:w/(b.radius||wc.radius),outlineColor:E,iconAtlas:r,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,billboard:y,sizeScale:S*i,sizeUnits:T,sizeMinPixels:x*i,sizeMaxPixels:A*i,transitions:R&&{getPosition:R.getPosition,getAngle:R.getAngle,getColor:R.getColor,getSize:R.getSize,getPixelOffset:R.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:C.getText,getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset,getIconOffsets:{getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){!function(e){ve.assert(Number.isFinite(e)&&e>=3,"Invalid cache limit"),Ec=new bc(e)}(e)}}(Pc=Oc).defaultProps=Ic,Pc.layerName="TextLayer";class Nc{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:t={}}=e;this.typedArrayManager=Pe,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:i,geometryBuffer:r,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=t,this.getGeometry=i,this.positionSize=r&&r.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,r&&(rt(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),a||(n.vertexPositions=r)),this.geometryBuffer=n.vertexPositions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(e){let{startRow:t,endRow:n}=e;this._rebuildGeometry({startRow:t,endRow:n})}getGeometryFromBuffer(e){const t=e.value||e;return ArrayBuffer.isView(t)?ct(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,t){const{attributes:n,buffers:i,_attributeDefs:r,typedArrayManager:o}=this;for(const s in r)if(s in i)o.release(n[s]),n[s]=null;else{const i=r[s];i.copy=t,n[s]=o.allocate(n[s],e,i)}}_forEachGeometry(e,t,n){const{data:i,getGeometry:r}=this,{iterable:o,objectInfo:s}=at(i,t,n);for(const a of o){s.index++;e(r?r(a,s):null,s.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:t,vertexStarts:n,instanceCount:i}=this;const{data:r,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=e||{},l={};if(e||(t=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((e,t)=>{const i=e&&this.normalizeGeometry(e);l[t]=i,n[t+1]=n[t]+(i?this.getGeometrySize(i):0)}),s,a),i=n[n.length-1];else if(n=r.startIndices,i=n[r.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Z){const e=4*this.positionSize;i=i||o.byteLength/e}else if(o.buffer){const e=o.stride||4*this.positionSize;i=i||o.buffer.byteLength/e}else if(o.value){const e=o.value,t=o.stride/e.BYTES_PER_ELEMENT||this.positionSize;i=i||e.length/t}this._allocate(i,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry(((e,r)=>{const o=l[r]||e;c.vertexStart=n[r],c.indexStart=t[r];const s=r<n.length-1?n[r+1]:i;c.geometrySize=s-n[r],c.geometryIndex=r,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=t[t.length-1]}}const Fc=1,Dc=-1;function Bc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:i=e.length,plane:r="xy"}=t,o=t.size||2;let s=0;const a=Uc[r[0]],l=Uc[r[1]];for(let c=n,u=i-o;c<i;c+=o)s+=(e[c+a]-e[u+a])*(e[c+l]+e[u+l]),u=c;return s/2}(e,t))}(e,n);return i!==t&&(function(e,t){const{start:n=0,end:i=e.length,size:r=2}=t,o=(i-n)/r,s=Math.floor(o/2);for(let a=0;a<s;++a){const t=n+a*r,i=n+(o-1-a)*r;for(let n=0;n<r;++n){const r=e[t+n];e[t+n]=e[i+n],e[i+n]=r}}}(e,n),!0)}const Uc={x:0,y:1,z:2};function zc(e,t,n,i){let r,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)r=(i[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)r=(i[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)r=(i[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;r=(i[0]-e[0])/(t[0]-e[0]),o=0}for(let a=0;a<e.length;a++)s[a]=(1&o)===a?i[o]:r*(t[a]-e[a])+e[a];return s}function Gc(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function jc(e,t){const n=t.length,i=e.length;if(i>0){let r=!0;for(let o=0;o<n;o++)if(e[i-n+o]!==t[o]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)e[i+r]=t[r];return!0}function Vc(e,t){const n=t.length;for(let i=0;i<n;i++)e[i]=t[i]}function Wc(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=i+t*n;for(let s=0;s<n;s++)r[s]=e[o+s];return r}function Hc(e,t){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/n;let c=[];const u=[c],d=Wc(e,0,n,s);let h,f;const p=Zc(d,r,o,[]),g=[];jc(c,d);for(let m=1;m<l;m++){for(h=Wc(e,m,n,s,h),f=Gc(h,p);f;){zc(d,h,f,p,g);const e=Gc(g,p);e&&(zc(d,g,e,p,g),f=e),jc(c,g),Vc(d,g),Qc(p,r,f),i&&c.length>n&&(c=[],u.push(c),jc(c,d)),f=Gc(h,p)}jc(c,h),Vc(d,h)}return i?u:u[0]}const Xc=0,Kc=1;function Yc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!e.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:e,types:s?new Array(e.length/i).fill(Kc):null,holes:t||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:e,types:t,holes:n}=l.shift();$c(e,i,n[0]||e.length,c),u=Zc(c[0],r,o,u);const d=Gc(c[1],u);if(d){let r=qc(e,t,i,0,n[0]||e.length,u,d);const o={pos:r[0].pos,types:r[0].types,holes:[]},a={pos:r[1].pos,types:r[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)r=qc(e,t,i,n[l],n[l+1]||e.length,u,d),r[0]&&(o.holes.push(o.pos.length),o.pos=Jc(o.pos,r[0].pos),s&&(o.types=Jc(o.types,r[0].types))),r[1]&&(a.holes.push(a.pos.length),a.pos=Jc(a.pos,r[1].pos),s&&(a.types=Jc(a.types,r[1].types)))}else{const i={positions:e};s&&(i.edgeTypes=t),n.length&&(i.holeIndices=n),a.push(i)}}return a}function qc(e,t,n,i,r,o,s){const a=(r-i)/n,l=[],c=[],u=[],d=[],h=[];let f,p,g;const m=Wc(e,a-1,n,i);let _=Math.sign(8&s?m[1]-o[3]:m[0]-o[2]),v=t&&t[a-1],y=0,b=0;for(let w=0;w<a;w++)f=Wc(e,w,n,i,f),p=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),g=t&&t[i/n+w],p&&_&&_!==p&&(zc(m,f,s,o,h),jc(l,h)&&u.push(v),jc(c,h)&&d.push(v)),p<=0?(jc(l,f)&&u.push(g),y-=p):u.length&&(u[u.length-1]=Xc),p>=0?(jc(c,f)&&d.push(g),b+=p):d.length&&(d[d.length-1]=Xc),Vc(m,f),_=p,v=g;return[y?{pos:l,types:t&&u}:null,b?{pos:c,types:t&&d}:null]}function Zc(e,t,n,i){const r=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return i[0]=r,i[1]=o,i[2]=r+t,i[3]=o+t,i}function Qc(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function $c(e,t,n,i){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=t){const t=e[l],n=e[l+1];r=t<r?t:r,o=t>o?t:o,s=n<s?n:s,a=n>a?n:a}return i[0][0]=r,i[0][1]=s,i[1][0]=o,i[1][1]=a,i}function Jc(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}const eu=85.051129;function tu(e,t,n,i){let r=-1,o=-1;for(let s=n+1;s<i;s+=t){const t=Math.abs(e[s]);t>r&&(r=t,o=s-1)}return o}function nu(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eu;const o=e[n],s=e[i-t];if(Math.abs(o-s)>180){const i=Wc(e,0,t,n);i[0]+=360*Math.round((s-o)/360),jc(e,i),i[1]=Math.sign(i[1])*r,jc(e,i),i[0]=o,jc(e,i)}}function iu(e,t,n,i){let r,o=e[0];for(let s=n;s<i;s+=t){r=e[s];const t=r-o;(t>180||t<-180)&&(r-=360*Math.round(t/360)),e[s]=o=r}}function ru(e,t){let n;const i=e.length/t;for(let o=0;o<i&&(n=e[o*t],(n+180)%360===0);o++);const r=360*-Math.round(n/360);if(0!==r)for(let o=0;o<i;o++)e[o*t]+=r}function ou(e,t,n,i){let r;if(Array.isArray(e[0])){const n=e.length*t;r=new Array(n);for(let i=0;i<e.length;i++)for(let n=0;n<t;n++)r[i*t+n]=e[i][n]||0}else r=e;return n?Hc(r,{size:t,gridResolution:n}):i?function(e,t){const{size:n=2,startIndex:i=0,endIndex:r=e.length,normalize:o=!0}=t||{},s=e.slice(i,r);iu(s,n,0,r-i);const a=Hc(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)ru(l,n);return a}(r,{size:t}):r}class su extends Nc{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?ou(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(au(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&au(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const n=this.attributes.segmentTypes,i=!!e&&this.isClosed(e),{vertexStart:r,geometrySize:o}=t;n.fill(0,r,r+o),i?(n[r]=4,n[r+o-2]=4):(n[r]+=1,n[r+o-2]+=2),n[r+o-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:i,geometrySize:r}=t,o=new Array(3);for(let s=i,a=0;a<r;s++,a++)this.getPointOnPath(e,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:i}=this;t*i>=e.length&&(t+=1-e.length/i);const r=t*i;return n[0]=e[r],n[1]=e[r+1],n[2]=3===i&&e[r+2]||0,n}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}function au(e){return Array.isArray(e[0])}var lu;const cu=[0,0,0,255],uu={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:cu},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},du={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class hu extends Cl{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = capType;\n} else {\nvJointType = jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels) / 2.0);\nvec3 width;\nif (billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nuniform float miterLimit;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[zl,Vl]})}get wrapLongitude(){return!1}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["vertexPositions"])}initializeState(){const e=!0;this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:du,accessor:"getPath",update:this.calculatePositions,noAlloc:e,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:e},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:du,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:du,defaultValue:cu},instancePickingColors:{size:4,type:"uint8",accessor:(e,t)=>{let{index:n,target:i}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,i)}}}),this.setState({pathTesselator:new su({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:t,changeFlags:n}=e,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,r=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:r.getPath,buffers:r,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||i.invalidateAll()}var r;n.extensionsChanged&&(null===(r=this.state.model)||void 0===r||r.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{jointRounded:n,capRounded:i,billboard:r,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props,u=this.state.model;u.setUniforms(t),u.setUniforms({jointType:Number(n),capType:Number(i),billboard:r,widthUnits:we[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}),u.draw(this.context.renderPass)}_getModel(){return new pr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Wl({topology:"triangle-list",attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}(lu=hu).defaultProps=uu,lu.layerName="PathLayer";const fu="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\nvec3 color;\n};\nstruct PointLight {\nvec3 color;\nvec3 position;\nvec3 attenuation;\n};\nstruct DirectionalLight {\nvec3 color;\nvec3 direction;\n};\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\nuniform bool lighting_uEnabled;\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\nreturn pointLight.attenuation.x\n+ pointLight.attenuation.y * distance\n+ pointLight.attenuation.z * distance * distance;\n}\n#endif\n",pu={lightSources:{}};function gu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t=[0,0,0],intensity:n=1}=e;return t.map((e=>e*n/255))}const mu={name:"lights",vs:fu,fs:fu,getUniforms:function e(){var t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pu;if("lightSources"in i){const{ambientLight:e,pointLights:t,directionalLights:n}=i.lightSources||{};return e||t&&t.length>0||n&&n.length>0?Object.assign({},function(e){let{ambientLight:t,pointLights:n=[],directionalLights:i=[]}=e;const r={};return r["lighting_uAmbientLight.color"]=t?gu(t):[0,0,0],n.forEach(((e,t)=>{r["lighting_uPointLight[".concat(t,"].color")]=gu(e),r["lighting_uPointLight[".concat(t,"].position")]=e.position,r["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),r.lighting_uPointLightCount=n.length,i.forEach(((e,t)=>{r["lighting_uDirectionalLight[".concat(t,"].color")]=gu(e),r["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in i){const r={pointLights:[],directionalLights:[]};for(const e of i.lights||[])switch(e.type){case"ambient":r.ambientLight=e;break;case"directional":null===(t=r.directionalLights)||void 0===t||t.push(e);break;case"point":null===(n=r.pointLights)||void 0===n||n.push(e)}return e({lightSources:r})}return{}},defines:{MAX_LIGHTS:3}},_u="uniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\nvec3 halfway_direction = normalize(light_direction + view_direction);\nfloat lambertian = dot(light_direction, normal_worldspace);\nfloat specular = 0.0;\nif (lambertian > 0.0) {\nfloat specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\nspecular = pow(specular_angle, lighting_uShininess);\n}\nlambertian = max(lambertian, 0.0);\nreturn (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = surfaceColor;\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nlightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = vec3(0, 0, 0);\nvec3 surfaceColor = vec3(0, 0, 0);\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\n",vu={};function yu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vu;if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}const bu={name:"gouraud-lighting",dependencies:[mu],vs:_u,defines:{LIGHTING_VERTEX:1},getUniforms:yu};var wu=n(973);const Eu=Fc,Su=Dc,Tu={isClosed:!0};function xu(e){return"positions"in e?e.positions:e}function Au(e){return"holeIndices"in e?e.holeIndices:null}function Ru(e,t,n,i,r){let o=t;const s=n.length;for(let a=0;a<s;a++)for(let t=0;t<i;t++)e[o++]=n[a][t]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let a=0;a<i;a++)e[o++]=n[0][a]||0;return Tu.start=t,Tu.end=o,Tu.size=i,Bc(e,r,Tu),o}function Cu(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-r;if(a<=0)return t;let l=t;for(let c=0;c<a;c++)e[l++]=n[r+c];if(!function(e,t,n,i){for(let r=0;r<t;r++)if(e[n+r]!==e[i-t+r])return!1;return!0}(n,i,r,o))for(let c=0;c<i;c++)e[l++]=n[r+c];return Tu.start=t,Tu.end=l,Tu.size=i,Bc(e,s,Tu),l}function Pu(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],i=[];if("positions"in e){const{positions:r,holeIndices:o}=e;if(o){let e=0;for(let s=0;s<=o.length;s++)e=Cu(n,e,r,t,o[s-1],o[s],0===s?Eu:Su),i.push(e);return i.pop(),{positions:n,holeIndices:i}}e=r}if(!function(e){return Array.isArray(e[0])}(e))return Cu(n,0,e,t,0,n.length,Eu),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let r=0;for(const[o,s]of e.entries())r=Ru(n,r,s,t,0===o?Eu:Su),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return Ru(n,0,e,t,Eu),n}function Lu(e,t,n){const i=e.length/3;let r=0;for(let o=0;o<i;o++){const s=(o+1)%i;r+=e[3*o+t]*e[3*s+n],r-=e[3*s+t]*e[3*o+n]}return Math.abs(r/2)}function Mu(e,t,n,i){const r=e.length/3;for(let o=0;o<r;o++){const r=3*o,s=e[r+0],a=e[r+1],l=e[r+2];e[r+t]=s,e[r+n]=a,e[r+i]=l}}class ku extends Nc{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=Pu(e,this.positionSize);return this.opts.resolution?Yc(xu(t),Au(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:i=2,normalize:r=!0,edgeTypes:o=!1}=n||{};t=t||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=t.length;d++){const r=t[d]||e.length,o=c,u=tu(e,i,l,r);for(let t=u;t<r;t++)s[c++]=e[t];for(let t=l;t<u;t++)s[c++]=e[t];iu(s,i,o,c),nu(s,i,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=r,a[d]=c}a.pop();const u=Yc(s,a,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const d of u)ru(d.positions,i);return u}(xu(t),Au(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(Iu(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return xu(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&Iu(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else{const n=e;this._updateIndices(n,t),this._updatePositions(n,t),this._updateVertexValid(n,t)}}_updateIndices(e,t){let{geometryIndex:n,vertexStart:i,indexStart:r}=t;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!e)return;let c=r;const u=function(e,t,n,i){let r=Au(e);r&&(r=r.map((e=>e/t)));let o=xu(e);const s=i&&3===t;if(n){const e=o.length;o=o.slice();const i=[];for(let r=0;r<e;r+=t){i[0]=o[r],i[1]=o[r+1],s&&(i[2]=o[r+2]);const e=n(i);o[r]=e[0],o[r+1]=e[1],s&&(o[r+2]=e[2])}}if(s){const e=Lu(o,0,1),t=Lu(o,0,2),i=Lu(o,1,2);if(!e&&!t&&!i)return[];e>t&&e>i||(t>i?(n||(o=o.slice()),Mu(o,0,2,1)):(n||(o=o.slice()),Mu(o,2,0,1)))}return wu(o,r,t)}(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,r+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+i;s[n+1]=r+u.length,o.indices=l}_updatePositions(e,t){let{vertexStart:n,geometrySize:i}=t;const{attributes:{positions:r},positionSize:o}=this;if(!r||!e)return;const s=xu(e);for(let a=n,l=0;l<i;a++,l++){const e=s[l*o],t=s[l*o+1],n=o>2?s[l*o+2]:0;r[3*a]=e,r[3*a+1]=t,r[3*a+2]=n}}_updateVertexValid(e,t){let{vertexStart:n,geometrySize:i}=t;const{positionSize:r}=this,o=this.attributes.vertexValid,s=e&&Au(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+i),s)for(let a=0;a<s.length;a++)o[n+s[a]/r-1]=0;o[n+i-1]=0}}function Iu(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const Ou="uniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\nin vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project_uCommonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (extruded) {\npos.z += props.elevations * elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",Nu="#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n".concat(Ou,"\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n"),Fu="#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n".concat(Ou,"\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n");var Du;const Bu=[0,0,0,255],Uu={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Bu},getLineColor:{type:"accessor",value:Bu},material:!0},zu={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Gu extends Cl{getShaders(e){return super.getShaders({vs:"top"===e?Nu:Fu,fs:"#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[zl,bu,Vl]})}get wrapLongitude(){return!1}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:t}=this.props;const{_full3d:n}=this.props;let i;e.isGeospatial&&t===ye.DEFAULT&&(t=ye.LNGLAT),t===ye.LNGLAT&&(i=n?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new ku({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const r=this.getAttributeManager(),o=!0;r.remove(["instancePickingColors"]),r.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:zu,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:zu,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:zu,accessor:"getFillColor",defaultValue:Bu},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:zu,accessor:"getLineColor",defaultValue:Bu},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(e,t)=>{let{index:n,target:i}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,i)}}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{extruded:n,filled:i,wireframe:r,elevationScale:o}=this.props,{topModel:s,sideModel:a,wireframeModel:l,polygonTesselator:c}=this.state,u={...t,extruded:Boolean(n),elevationScale:o};l&&r&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(u),l.draw(this.context.renderPass)),a&&i&&(a.setInstanceCount(c.instanceCount-1),a.setUniforms(u),a.draw(this.context.renderPass)),s&&i&&(s.setVertexCount(c.vertexCount),s.setUniforms(u),s.draw(this.context.renderPass))}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:i}=e,r=this.getAttributeManager();var o;(i.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((e=>e.destroy())),this.setState(this._getModels()),r.invalidateAll())}updateGeometry(e){let{props:t,oldProps:n,changeFlags:i}=e;if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,n=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:t,extruded:n}=this.props;let i,r,o;if(t){const t=this.getShaders("top");t.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new pr(this.context.device,{...t,id:"".concat(e,"-top"),topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const t=this.getAttributeManager().getBufferLayouts({isInstanced:!0});r=new pr(this.context.device,{...this.getShaders("side"),id:"".concat(e,"-side"),bufferLayout:t,uniforms:{isWireframe:!1},geometry:new Wl({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new pr(this.context.device,{...this.getShaders("side"),id:"".concat(e,"-wireframe"),bufferLayout:t,uniforms:{isWireframe:!0},geometry:new Wl({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[r,o,i].filter(Boolean),topModel:i,sideModel:r,wireframeModel:o}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}(Du=Gu).defaultProps=Uu,Du.layerName="SolidPolygonLayer";const ju={circle:{type:oc,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:tc,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Oc,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Vu={type:hu,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Wu={type:Gu,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Hu(e){let{type:t,props:n}=e;const i={};for(const r in n)i[r]=t.defaultProps[n[r]];return i}function Xu(e,t){const{transitions:n,updateTriggers:i}=e.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),r.updateTriggers[s]=i[o],n&&(r.transitions[s]=n[o])),r[s]=a}return r}function Ku(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=e.length}=n;for(let s=r;s<o;s++){const n=e[s],{geometry:r}=n;if(r)if("GeometryCollection"===r.type){ve.assert(Array.isArray(r.geometries),"GeoJSON does not have geometries array");const{geometries:e}=r;for(let r=0;r<e.length;r++){Yu(e[r],i,t,n,s)}}else Yu(r,i,t,n,s)}return i}function Yu(e,t,n,i,r){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=t;if(function(e,t){let n=qu[e];ve.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,s))switch(o){case"Point":a.push(n({geometry:e},i,r));break;case"MultiPoint":s.forEach((e=>{a.push(n({geometry:{type:"Point",coordinates:e}},i,r))}));break;case"LineString":l.push(n({geometry:e},i,r));break;case"MultiLineString":s.forEach((e=>{l.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}));break;case"Polygon":c.push(n({geometry:e},i,r)),s.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}));break;case"MultiPolygon":s.forEach((e=>{c.push(n({geometry:{type:"Polygon",coordinates:e}},i,r)),e.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}))}))}else ve.warn("".concat(o," coordinates are malformed"))()}const qu={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Zu(e){return e.geometry.coordinates}function Qu(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:i,lines:r,polygons:o}=e,s=function(e,t){const n={points:null,lines:null,polygons:null};for(const i in n){const r=e[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(3*r.length);const o=[];for(let e=0;e<r.length;e++)t(r[e],o),n[i][3*e+0]=o[0],n[i][3*e+1]=o[1],n[i][3*e+2]=o[2]}return n}(e,t);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:s.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}var $u;const Ju=["points","linestrings","polygons"],ed={...Hu(ju.circle),...Hu(ju.icon),...Hu(ju.text),...Hu(Vu),...Hu(Wu),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class td extends Pl{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState(e){let{props:t,changeFlags:n}=e;if(!n.dataChanged)return;const{data:i}=this.props,r=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:r}),r?this._updateStateBinary({props:t,changeFlags:n}):this._updateStateJSON({props:t,changeFlags:n})}_updateStateBinary(e){let{props:t,changeFlags:n}=e;const i=Qu(t.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON(e){let{props:t,changeFlags:n}=e;const i=function(e){if(Array.isArray(e))return e;switch(ve.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return ve.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),r=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const e=this.state.features;for(const t in e)o[t]=e[t].slice(),s[t]=[];for(const t of n.dataChanged){const n=Ku(i,r,t);for(const i in e)s[i].push(Ll({data:o[i],getIndex:e=>e.__source.index,dataRange:t,replace:n[i]}))}}else o=Ku(i,r);const a=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:i,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:s}=e;return n.points.data=i,n.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),n.points.getPosition=Zu,n.lines.data=r,n.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),n.lines.getPath=Zu,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),n.polygons.getPolygon=Zu,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),n.polygonsOutline.getPath=Zu,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n,sourceLayer:i}=t;return t.featureType=Ju.find((e=>i.id.startsWith("".concat(this.id,"-").concat(e,"-")))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(t.index=this.props.data.points.globalFeatureIds.value[n]),t}_updateAutoHighlight(e){const t="".concat(this.id,"-points-"),n="points"===e.featureType;for(const i of this.getSubLayers())i.id.startsWith(t)===n&&i.updateAutoHighlight(e)}_renderPolygonLayer(){var e;const{extruded:t,wireframe:n}=this.props,{layerProps:i}=this.state,r="polygons-fill",o=this.shouldRenderSubLayer(r,null===(e=i.polygons)||void 0===e?void 0:e.data)&&this.getSubLayerClass(r,Wu.type);if(o){const e=Xu(this,Wu.props),s=t&&n;return s||delete e.getLineColor,e.updateTriggers.lineColors=s,new o(e,this.getSubLayerProps({id:r,updateTriggers:e.updateTriggers}),i.polygons)}return null}_renderLineLayers(){var e,t;const{extruded:n,stroked:i}=this.props,{layerProps:r}=this.state,o="polygons-stroke",s="linestrings",a=!n&&i&&this.shouldRenderSubLayer(o,null===(e=r.polygonsOutline)||void 0===e?void 0:e.data)&&this.getSubLayerClass(o,Vu.type),l=this.shouldRenderSubLayer(s,null===(t=r.lines)||void 0===t?void 0:t.data)&&this.getSubLayerClass(s,Vu.type);if(a||l){const e=Xu(this,Vu.props);return[a&&new a(e,this.getSubLayerProps({id:o,updateTriggers:e.updateTriggers}),r.polygonsOutline),l&&new l(e,this.getSubLayerProps({id:s,updateTriggers:e.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:t,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=t.points.data.findIndex((e=>e.__source.index===i)));const r=new Set(e.split("+")),o=[];for(const a of r){var s;const e="points-".concat(a),r=ju[a],l=r&&this.shouldRenderSubLayer(e,null===(s=t.points)||void 0===s?void 0:s.data)&&this.getSubLayerClass(e,r.type);if(l){const s=Xu(this,r.props);let c=t.points;if("text"===a&&n){const{instancePickingColors:e,...t}=c.data.attributes;c={...c,data:{...c.data,attributes:t}}}o.push(new l(s,this.getSubLayerProps({id:e,updateTriggers:s.updateTriggers,highlightedObjectIndex:i}),c))}}return o}renderLayers(){const{extruded:e}=this.props,t=this._renderPolygonLayer();return[!e&&t,this._renderLineLayers(),this._renderPointLayers(),e&&t]}getSubLayerAccessor(e){const{binary:t}=this.state;return t&&"function"===typeof e?(t,n)=>{const{data:i,index:r}=n,o=function(e,t){if(!e)return null;const n="startIndices"in e?e.startIndices[t]:t,i=e.featureIds.value[n];return-1!==n?function(e,t,n){const i={properties:{...e.properties[t]}};for(const r in e.numericProps)i.properties[r]=e.numericProps[r].value[n];return i}(e,i,n):null}(i,r);return e(o,n)}:super.getSubLayerAccessor(e)}}($u=td).layerName="GeoJsonLayer",$u.defaultProps=ed;let nd=1,id=1;class rd{constructor(){H(this,"time",0),H(this,"channels",new Map),H(this,"animations",new Map),H(this,"playing",!1),H(this,"lastEngineTime",-1)}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:r=1}=e,o=nd++,s={time:0,delay:t,duration:n,rate:i,repeat:r};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const i of t)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:e,channel:t}=i;e.setTime(this.getTime(t))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=id++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}const od=[Ul],sd=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function ad(){const e=$i.getDefaultShaderAssembler();for(const t of od)e.addDefaultModule(t);for(const t of sd)e.addShaderHook(t);return e}function ld(){let e;if("undefined"!==typeof window&&window.performance)e=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class cd{constructor(e,t){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=t,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=ld(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(ld()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class ud{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const t of Object.values(this.stats))e(t)}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){const{name:t,type:n}=e;let i=this.stats[t];return i||(i=e instanceof cd?e:new cd(t,n),this.stats[t]=i),i}}class dd{constructor(e,t,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let i=e;"string"===typeof e&&(i=wl(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const r of this._subscribers)r.onChange(this.getData())}}class hd{constructor(e){var t;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:null===(t=e.device)||void 0===t?void 0:t.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add(e){let{resourceId:t,data:n,forceUpdate:i=!1,persistent:r=!0}=e,o=this._resources[t];o?o.setData(n,i):(o=new dd(t,n,this._context),this._resources[t]=o),o.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe(e){let{consumerId:t}=e;const n=this._consumers[t];if(n){for(const e in n){const t=n[e],i=this._resources[t.resourceId];i&&i.unsubscribe(t)}delete this._consumers[t],this.prune()}}subscribe(e){let{resourceId:t,onChange:n,consumerId:i,requestId:r="default"}=e;const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,i){const r=this._consumers,o=r[e]=r[e]||{};let s=o[t];const a=s&&s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(s?(s.onChange=i,s.resourceId=n.id):s={onChange:i,resourceId:n.id},o[t]=s,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}class fd{constructor(e,t){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=e=>{Et("layerManager.activateViewport",this,e),e&&(this.context.viewport=e)};const{deck:n,stats:i,viewport:r,timeline:o}=t||{};this.layers=[],this.resourceManager=new hd({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:null===e||void 0===e?void 0:e.gl,deck:n,shaderAssembler:ad(),defaultShaderModules:[],renderPass:void 0,stats:i||new ud({id:"deck.gl"}),viewport:r||new vs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new rd,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(e);t=t||i}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers(){let{layerIds:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Et("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const n=ut(e,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:t}=this.context;t.find((t=>t.name===e.name))||(t.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:t}=this.context,n=t.findIndex((t=>t.name===e.name));n>=0&&(t.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,t,n){n.raiseError(t,"".concat(e," of ").concat(n))}_updateLayers(e,t){const n={};for(const o of e)n[o.id]?ve.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;if(this._defaultShaderModulesChanged){for(const t of e)t.setNeedsUpdate(),t.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(t,n,i),this._finalizeOldLayers(n);let r=!1;for(const o of i)if(o.hasUniformTransition()){r="Uniform transition in ".concat(o);break}this._needsUpdate=r,this.layers=i}_updateSublayersRecursively(e,t,n){for(const r of e){r.context=this.context;const e=t[r.id];null===e&&ve.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&e!==r&&r.validateProps(),e?(this._transferLayerState(e,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),o=r.isComposite?r.getSubLayers():null}catch(i){this._handleError("matching",i,r)}o&&this._updateSublayersRecursively(o,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Kr}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=Xr,t!==e&&(e.lifecycle=Yr)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=qr;try{e._finalize(),e.lifecycle=Zr}catch(t){this._handleError("finalization",t,e)}}}class pd{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return this.views.find((t=>t.id===e))}getViewState(e){const t="string"===typeof e?this.getView(e):e,n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),i={x:e[0],y:e[1]};for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.containsPixel(i)){const n=e.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=ut(e,Boolean);this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){if(e){!As(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else ve.warn("missing `viewState` or `initialViewState`")()}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>{var n;return null===(n=this.getView(e.id))||void 0===n?void 0:n.makeViewport({viewState:t,width:this.width,height:this.height})}})}_updateController(e,t,n,i){const r=e.controller;if(r&&n){const o={...t,...r,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return i&&i.constructor===r.type||(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=e.length;i--;){const r=e[i],o=this.getViewState(r),s=r.makeViewport({viewState:o,width:this.width,height:this.height});let a=t[r.id];const l=Boolean(r.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[r.id]=this._updateController(r,o,s,a),s&&this._viewports.unshift(s)}for(const i in t){const e=t[i];e&&!this.controllers[i]&&e.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,i)=>!e[i].equals(t[i])))}}const gd=/([0-9]+\.?[0-9]*)(%|px)/;function md(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=gd.exec(e);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error("Could not parse position string ".concat(e))}}function _d(e,t){return e.relative?Math.round(e.position*t):e.position}class vd{constructor(e){const{id:t,x:n=0,y:i=0,width:r="100%",height:o="100%",padding:s=null}=e;this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=md(n),this._y=md(i),this._width=md(r),this._height=md(o),this._padding=s&&{left:md(s.left||0),right:md(s.right||0),top:md(s.top||0),bottom:md(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||this.ViewportType===e.ViewportType&&As(this.props,e.props,2)}makeViewport(e){let{width:t,height:n,viewState:i}=e;i=this.filterViewState(i);const r=this.getDimensions({width:t,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"===typeof e?e:(null===e||void 0===e?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions(e){let{width:t,height:n}=e;const i={x:_d(this._x,t),y:_d(this._y,n),width:_d(this._width,t),height:_d(this._height,n)};return this._padding&&(i.padding={left:_d(this._padding.left,t),top:_d(this._padding.top,n),right:_d(this._padding.right,t),bottom:_d(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"===typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const yd=()=>{},bd=2,wd=3,Ed=e=>e,Sd=1;class Td{constructor(e){this._onTransitionUpdate=e=>{const{time:t,settings:{interpolator:n,startProps:i,endProps:r,duration:o,easing:s}}=e,a=s(t/o),l=n.interpolateProps(i,r,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Pr(e.timeline),this.onViewStateChange=e.onViewStateChange||yd,this.onStateChange=e.onStateChange||yd}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let i=n;if(this.transition.inProgress){const{interruption:e,endProps:t}=this.transition.settings;i={...n,...e===bd?t:this.propsInTransition||n}}this._triggerTransition(i,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){if(this.transition.inProgress){return this.transition.settings.interruption===wd||this._isUpdateDueToCurrentTransition(t)}return!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=this.getControllerState(e),i=this.getControllerState(t).shortestPathFrom(n),r=t.transitionInterpolator,o=r.getDuration?r.getDuration(e,t):t.transitionDuration;if(0===o)return;const s=r.initializeProps(e,i);this.propsInTransition={};const a={duration:o,easing:t.transitionEasing||Ed,interpolator:r,interruption:t.transitionInterruption||Sd,startProps:s.start,endProps:s.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===e||void 0===e||e(t)}}}class xd{constructor(e){const{compare:t,extract:n,required:i}=e;this._propsToCompare=t,this._propsToExtract=n||t,this._requiredProps=i}arePropsEqual(e,t){for(const n of this._propsToCompare)if(!(n in e)||!(n in t)||!Ne(e[n],t[n]))return!1;return!0}initializeProps(e,t){const n={},i={};for(const r of this._propsToExtract)(r in e||r in t)&&(n[r]=e[r],i[r]=t[r]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];rt(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}const Ad=["longitude","latitude","zoom","bearing","pitch"],Rd=["longitude","latitude","zoom"];class Cd extends xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Ad,required:Rd},super(n.transitionProps),this.opts=n}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:i,around:r}=this.opts;if(i&&r){const o=i(e),s=i(t),a=o.unproject(r);n.start.around=r,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const i={};for(const r of this._propsToExtract)i[r]=Oe(e[r]||0,t[r]||0,n);if(t.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...t,...i});Object.assign(i,r.panByPosition(t.aroundPosition,Oe(e.around,t.around,n)))}return i}}const Pd={transitionDuration:0},Ld=e=>1-(1-e)*(1-e),Md=["wheel"],kd=["panstart","panmove","panend"],Id=["pinchstart","pinchmove","pinchend"],Od=["tripanstart","tripanmove","tripanend"],Nd=["doubletap"],Fd=["keydown"],Dd={};class Bd{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new Td({...e,getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events){var e;if(this._events[t])null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:n}=this.props,{offsetCenter:i}=e;return[i.x-t,i.y-n]}isPointInBounds(e,t){const{width:n,height:i}=this.props;if(t&&t.handled)return!1;const r=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return r&&t&&t.stopPropagation(),r}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:r=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(Md,c&&n),this.toggleEvents(kd,c),this.toggleEvents(Id,c&&(s||a)),this.toggleEvents(Od,c&&a),this.toggleEvents(Nd,c&&o),this.toggleEvents(Fd,c&&l),this.scrollZoom=n,this.dragPan=i,this.dragRotate=r,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={...e.getViewportProps(),...t},r=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),r){const e=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:e,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(i,Pd,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,Pd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],r=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Ld},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,Pd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],r=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Ld},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:r}=e;let o=2/(1+Math.exp(-Math.abs(r*n)));r<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:t}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,Pd,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,Pd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*t/2],r=this.controllerState.rotate({pos:i});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Ld},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Dd._startPinchRotation=e.rotation,Dd._lastPinchEvent=e,this.updateViewport(n,Pd,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,i=this.getCenter(e);t=t.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:Dd._startPinchRotation-n})}return this.updateViewport(t,Pd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Dd._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:n}=Dd;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const i=this.getCenter(e);let r=this.controllerState.rotateEnd();const o=Math.log2(e.scale),s=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),a=Math.pow(2,o+s*t/2);r=r.zoom({pos:i,scale:a}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:i}),transitionDuration:t,transitionEasing:Ld},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Dd._startPinchRotation=null,Dd._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:r,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(e.srcEvent.code){case"Minus":a=t?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=t?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":t?(a=s.rotateLeft(r),l.isRotating=!0):(a=s.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":t?(a=s.rotateRight(r),l.isRotating=!0):(a=s.moveRight(i),l.isPanning=!0);break;case"ArrowUp":t?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(i),l.isPanning=!0);break;case"ArrowDown":t?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new Cd({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:Pd}}class Ud{constructor(e,t){this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class zd extends Ud{constructor(e){const{width:t,height:n,latitude:i,longitude:r,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:d=0,maxPitch:h=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:v,startZoom:y,normalize:b=!0}=e;rt(Number.isFinite(r)),rt(Number.isFinite(i)),rt(Number.isFinite(o)),super({width:t,height:n,latitude:i,longitude:r,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:u,minZoom:d,maxPitch:h,minPitch:f,normalize:b,position:c},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:v,startZoom:y}),this.makeViewport=e.makeViewport}panStart(e){let{pos:t}=e;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan(e){let{pos:t,startPos:n}=e;const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(e){let{pos:t}=e;return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(e){let{pos:t,deltaAngleX:n=0,deltaAngleY:i=0}=e;const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=t?this._getNewRotation(t,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(e){let{pos:t}=e;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom(e){let{pos:t,startPos:n,scale:i}=e,{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=r+Math.log2(i);l=Ie(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(e)}zoomOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/e)}moveLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([e,0])}moveRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-e,0])}moveUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,e])}moveDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-e])}rotateLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:r}=n;return Math.abs(i-t.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(r-t.longitude)>180&&(n.longitude=r<0?r+360:r-360),n}applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:i}=e;e.zoom=Ie(i,n,t);const{maxPitch:r,minPitch:o,pitch:s}=e;e.pitch=Ie(s,o,r);const{normalize:a=!0}=e;return a&&Object.assign(e,function(e){const{width:t,height:n,pitch:i=0}=e;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=e;(r<-180||r>180)&&(r=jo(r+180,360)-180),(a<-180||a>180)&&(a=jo(a+180,360)-180);const l=Wo(n/512);if(s<=l)s=l,o=0;else{const e=n/2/Math.pow(2,s),t=ts([0,e])[1];if(o<t)o=t;else{const t=ts([0,512-e])[1];o>t&&(o=t)}}return{width:t,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,n,i){const r=e[0]-t[0],o=e[1]-t[1],s=e[1],a=t[1],{width:l,height:c}=this.getViewportProps(),u=r/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=Ie(d,-1,1);const{minPitch:h,maxPitch:f}=this.getViewportProps();let p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:i+180*u}}}class Gd extends Bd{constructor(){super(...arguments),this.ControllerState=zd,this.transition={transitionDuration:300,transitionInterpolator:new Cd({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e);(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class jd extends vd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}get ViewportType(){return ys}get ControllerType(){return Gd}}jd.displayName="MapView";const Vd=[255,255,255],Wd=1;let Hd=0;class Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="ambient";const{color:t=Vd}=e,{intensity:n=Wd}=e;this.id=e.id||"ambient-".concat(Hd++),this.color=t,this.intensity=n}}const Kd=[255,255,255],Yd=1,qd=[0,0,-1];let Zd=0;class Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="directional";const{color:t=Kd}=e,{intensity:n=Yd}=e,{direction:i=qd}=e,{_shadow:r=!1}=e;this.id=e.id||"directional-".concat(Zd++),this.color=t,this.intensity=n,this.type="directional",this.direction=new Ze(i).normalize().toArray(),this.shadow=r}getProjectedLight(e){return this}}class $d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};const{id:n}=t;this.id=n,this.device=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Jd extends $d{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){var t,n,i;const[r,o]=this.device.canvasContext.getDrawingBufferSize(),s=null===(t=e.clearCanvas)||void 0===t||t,a=null!==(n=e.clearColor)&&void 0!==n?n:!!s&&[0,0,0,0],l=!!s&&1,c=!!s&&0,u=null!==(i=e.colorMask)&&void 0!==i?i:15,d={viewport:[0,0,r,o]};e.colorMask&&(d.colorMask=u),e.scissorRect&&(d.scissorRect=e.scissorRect);const h=this.device.beginRenderPass({framebuffer:e.target,parameters:d,clearColor:a,clearDepth:l,clearStencil:c});try{return this._drawLayers(h,e)}finally{h.end()}}_drawLayers(e,t){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0}=t;t.pass=t.pass||"unknown",a&&(this._lastRenderIndex=-1);const l=[];for(const c of r){const r=o&&o[c.id];null===s||void 0===s||s(c);const a=this._getDrawLayerParams(c,t),u=c.subViewports||[c];for(const o of u){const s=this._drawLayersInViewport(e,{target:n,moduleParameters:i,viewport:o,view:r,pass:t.pass,layers:t.layers},a);l.push(s)}}return l}_getDrawLayerParams(e,t){let{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:l}=t,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=eh(this._lastRenderIndex+1),h={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:s},f={};for(let g=0;g<n.length;g++){const t=n[g],r=this._shouldDrawLayer(t,h,o,f),s={shouldDrawLayer:r};var p;if(r&&!c)s.layerRenderIndex=d(t,r),s.moduleParameters=this._getModuleParameters(t,a,i,l),s.layerParameters={...null===(p=t.context.deck)||void 0===p?void 0:p.props.parameters,...this.getLayerParameters(t,g,e)};u[g]=s}return u}_drawLayersInViewport(e,t,n){let{layers:i,moduleParameters:r,pass:o,target:s,viewport:a,view:l}=t;const c=function(e,t){let{moduleParameters:n,target:i,viewport:r}=t;const o=n&&n.devicePixelRatio||e.canvasContext.cssToDeviceRatio(),[,s]=e.canvasContext.getDrawingBufferSize(),a=i?i.height:s,l=r;return[l.x*o,a-(l.y+l.height)*o,l.width*o,l.height*o]}(this.device,{moduleParameters:r,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:c},(()=>this.device.clearWebGL(e)))}const u={totalCount:i.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:c});for(let h=0;h<i.length;h++){const t=i[h],{shouldDrawLayer:r,layerRenderIndex:s,moduleParameters:l,layerParameters:c}=n[h];if(r&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(r){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,s),l.viewport=a,t.context.renderPass=e;try{t._drawLayer({renderPass:e,moduleParameters:l,uniforms:{layerIndex:s},parameters:c})}catch(d){t.raiseError(d,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,n){return e.props.parameters}_shouldDrawLayer(e,t,n,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let r=e.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(t))return!1;t.layer=r,r=r.parent}if(n){const e=t.layer.id;if(e in i||(i[e]=n(t)),!i[e])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,n,i){var r;const o=this.device.canvasContext.cssToDeviceRatio(),s=Object.assign(Object.create((null===(r=e.internalState)||void 0===r?void 0:r.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,picking:{isActive:0},devicePixelRatio:o});if(t)for(const l of t){var a;Object.assign(s,null===(a=l.getModuleParameters)||void 0===a?void 0:a.call(l,e))}return Object.assign(s,this.getModuleParameters(e,t),i)}}function eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in t)&&i(r.parent,!1),l in n){const e=n[l]=n[l]||eh(t[l],t);c=e(r,o),n[a]=e}else Number.isFinite(s)?(c=s+(t[l]||0),n[a]=null):c=e;return o&&c>=e&&(e=c+1),t[a]=c,c};return i}class th extends Jd{constructor(e,t){super(e,t),this.shadowMap=e.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(e){const t=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],r=i.width*n,o=i.height*n;r===t.width&&o===t.height||t.resize({width:r,height:o}),super.render({...e,clearColor:[1,1,1,1],target:t,pass:"shadow"})}getLayerParameters(e,t,n){return{...e.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const nh=yt((function(e){let{viewport:t,center:n}=e;return new Do(t.viewProjectionMatrix).invert().transform(n)})),ih=yt((function(e){let{viewport:t,shadowMatrices:n}=e;const i=[],r=t.pixelUnprojectionMatrix,o=t.isGeospatial?void 0:1,s=[[0,0,o],[t.width,0,o],[0,t.height,o],[t.width,t.height,o],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((e=>function(e,t){const[n,i,r]=e,o=us([n,i,r],t);if(Number.isFinite(r))return o;return[o[0],o[1],0]}(e,r)));for(const a of n){const e=a.clone().translate(new Ze(t.center).negate()),n=s.map((t=>e.transform(t))),r=(new Do).ortho({left:Math.min(...n.map((e=>e[0]))),right:Math.max(...n.map((e=>e[0]))),bottom:Math.min(...n.map((e=>e[1]))),top:Math.max(...n.map((e=>e[1]))),near:Math.min(...n.map((e=>-e[2]))),far:Math.max(...n.map((e=>-e[2])))});i.push(r.multiplyRight(a))}return i})),rh=[0,0,0,1],oh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const sh={name:"shadow",dependencies:[Ul],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?function(e,t){const{shadowEnabled:n=!0}=e;if(!n||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};const i={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||rh,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=nh({viewport:e.viewport,center:t.project_uCenter}),o=[],s=ih({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let a=0;a<e.shadowMatrices.length;a++){const n=s[a],i=n.clone().translate(new Ze(e.viewport.center).negate());t.project_uCoordinateSystem===ye.LNGLAT&&t.project_uProjectionMode===be.WEB_MERCATOR?(s[a]=i,o[a]=r):(s[a]=n.clone().multiplyRight(oh),o[a]=i.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a];for(let a=0;a<2;a++)i["shadow_uShadowMap".concat(a)]=e.shadowMaps&&e.shadowMaps[a]||e.dummyShadowMap;return i}(e,t):{}}},ah={color:[255,255,255],intensity:1},lh=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ch=[0,0,0,200/255];class uh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id="lighting-effect",this.shadowColor=ch,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:t,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(t),n._addDefaultShaderModule(sh),this.dummyShadowMap=t.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow)),this.context&&this.setup(this.context),this.props=e}preRender(e){let{layers:t,layerFilter:n,viewports:i,onViewportActive:r,views:o}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let e=0;e<this.shadowPasses.length;e++){this.shadowPasses[e].render({layers:t,layerFilter:n,viewports:i,onViewportActive:r,views:o,moduleParameters:{shadowLightId:e,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},t}cleanup(e){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(sh))}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const n=(new Do).lookAt({eye:new Ze(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new th(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new Xd(ah),this.directionalLights.push(new Qd(lh[0]),new Qd(lh[1])))}}const dh=new uh;class hh{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find((t=>t.id===e.id))){const n=t.findIndex((t=>function(e,t){var n,i;return(null!==(n=e.order)&&void 0!==n?n:1/0)-(null!==(i=t.order)&&void 0!==i?i:1/0)}(t,e)>0));n<0?t.push(e):t.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(As(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const i of this.effects)t[i.id]=i;const n=[];for(const i of e){const e=t[i.id];let r=i;e&&e!==i?e.setProps?(e.setProps(i.props),r=e):e.cleanup(this._context):e||i.setup(this._context),n.push(r),delete t[i.id]}for(const i in t)t[i].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some((e=>e instanceof uh))||this._resolvedEffects.push(dh),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class fh extends Jd{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const ph={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class gh extends Jd{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer(e){let{layers:t,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:g}=e;this.pickZ=p;const m=this._resetColorEncoder(p),_=[a,l,c,u],v=super.render({target:s,layers:t,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:d,effects:null===h||void 0===h?void 0:h.filter((e=>e.useInPicking)),pass:f,isPicking:!0,moduleParameters:g,clearColor:[0,0,0,0],colorMask:15,scissorRect:_});this._colorEncoderState=null;return{decodePickingColor:m&&mh.bind(null,m),stats:v}}shouldDrawLayer(e){const{pickable:t,operation:n}=e.props;return t&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(e,t,n){const i={depthMask:!0,depthTest:!0,depthRange:[0,1],...e.props.parameters},{pickable:r,operation:o}=e.props;return!this._colorEncoderState||o.includes("terrain")?i.blend=!1:r&&o.includes("draw")&&(Object.assign(i,ph),i.blend=!0,i.blendColor=function(e,t,n){const{byLayer:i,byAlpha:r}=e;let o,s=i.get(t);s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:t,viewports:[n]},i.set(t,s),r[o]=s):(ve.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,e,n)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function mh(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}class _h{constructor(e){this.device=e,this.gl=e.gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new fh(e),this.pickLayersPass=new gh(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const r=t.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,Et("deckRenderer.renderLayers",this,r,e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const n of e)t.preRenderStats[n.id]=n.preRender(t),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,t=this.device.canvasContext.getDrawingBufferSize();0===e.length&&[0,1].map((t=>{const n=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:"deck-renderbuffer-".concat(t),colorAttachments:[n]}))}));for(const n of e)n.resize(t)}_postRender(e,t){const{renderBuffers:n}=this,i={...t,inputBuffer:n[0],swapBuffer:n[1]};for(const r of e)if(r.postRender){i.target=r.id===this.lastPostProcessEffect?t.target:void 0;const e=r.postRender(i);i.inputBuffer=e,i.swapBuffer=e===n[0]?n[1]:n[0]}}}const vh={pickedColor:null,pickedObjectIndex:-1};function yh(e){let{pickedColors:t,decodePickingColor:n,deviceX:i,deviceY:r,deviceRadius:o,deviceRect:s}=e;const{x:a,y:l,width:c,height:u}=s;let d=o*o,h=-1,f=0;for(let p=0;p<u;p++){const e=p+l-r,n=e*e;if(n>d)f+=4*c;else for(let r=0;r<c;r++){if(t[f+3]-1>=0){const e=r+a-i,t=e*e+n;t<=d&&(d=t,h=f)}f+=4}}if(h>=0){const e=t.slice(h,h+4),i=n(e);if(i){const t=Math.floor(h/4/c),n=h/4-t*c;return{...i,pickedColor:e,pickedX:a+n,pickedY:l+t}}ve.error("Picked non-existent layer. Is picking buffer corrupt?")()}return vh}function bh(e){let t,{pickInfo:n,viewports:i,pixelRatio:r,x:o,y:s,z:a}=e,l=i[0];if(i.length>1&&(l=function(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.containsPixel(t))return i}return e[0]}((null===n||void 0===n?void 0:n.pickedViewports)||i,{x:o,y:s})),l){const e=[o-l.x,s-l.y];void 0!==a&&(e[2]=a),t=l.unproject(e)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:t,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:r}}function wh(e){const{pickInfo:t,lastPickedInfo:n,mode:i,layers:r}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if("hover"===i){const e=n.index,t=n.layerId,i=s?s.props.id:null;if(i!==t||a!==e){if(i!==t){const e=r.find((e=>e.props.id===t));e&&l.unshift(e)}n.layerId=i,n.index=a,n.info=null}}const c=bh(e),u=new Map;return u.set(null,c),l.forEach((e=>{let t={...c};e===s&&(t.color=o,t.index=a,t.picked=!0),t=Eh({layer:e,info:t,mode:i});const r=t.layer;e===s&&"hover"===i&&(n.info=t),u.set(r.id,t),"hover"===i&&r.updateAutoHighlight(t)})),u}function Eh(e){let{layer:t,info:n,mode:i}=e;for(;t&&n;){const e=n.layer||null;n.sourceLayer=e,n.layer=t,n=t.getPickingInfo({info:n,mode:i,sourceLayer:e}),t=t.parent}return n}class Sh{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new gh(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject(e){let{x:t,y:n,layers:i,viewports:r}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?i.find((e=>e.id===s)):null,c=a&&r.find((e=>e.id===a))||r[0],u=c&&c.unproject([t-c.x,n-c.y]),d={x:t,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){var e,t;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const e=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=e}const n=this.device.gl;null===(e=this.pickingFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>this.pickLayersPass.shouldDrawLayer(e)&&!e.isComposite));return t.length?t:null}_pickClosestObject(e){let{layers:t,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=e;const h=this.device.canvasContext.cssToDeviceRatio(),f=this._getPickable(t);if(!f||0===i.length)return{result:[],emptyInfo:bh({viewports:i,x:r,y:o,pixelRatio:h})};this._resizeBuffer();const p=this.device.canvasContext.cssToDevicePixels([r,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*h),{width:_,height:v}=this.pickingFBO,y=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:_,deviceHeight:v}),b={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let w;const E=[],S=new Set;for(let T=0;T<a;T++){let e,t;if(y){e=yh({...this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:y,cullRect:b,effects:d,pass:"picking:".concat(l)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:y})}else e={pickedColor:null,pickedObjectIndex:-1};if(e.pickedLayer&&c&&this.depthFBO){const{pickedColors:r}=this._drawAndSample({layers:[e.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:e.pickedX,y:e.pickedY,width:1,height:1},cullRect:b,effects:d,pass:"picking:".concat(l,":z")},!0);r[3]&&(t=r[0])}e.pickedLayer&&T+1<a&&(S.add(e.pickedLayer),e.pickedLayer.disablePickingIndex(e.pickedObjectIndex)),w=wh({pickInfo:e,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:i,x:r,y:o,z:t,pixelRatio:h});for(const n of w.values())n.layer&&E.push(n);if(!e.pickedColor)break}for(const T of S)T.restorePickingColors();return{result:E,emptyInfo:w.get(null)}}_pickVisibleObjects(e){let{layers:t,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=e;const h=this._getPickable(t);if(!h||0===i.length)return[];this._resizeBuffer();const f=this.device.canvasContext.cssToDeviceRatio(),p=this.device.canvasContext.cssToDevicePixels([r,o],!0),g=p.x,m=p.y+p.height,_=this.device.canvasContext.cssToDevicePixels([r+s,o+a],!0),v=_.x+_.width,y=_.y,b={x:g,y:y,width:v-g,height:m-y},w=function(e){let{pickedColors:t,decodePickingColor:n}=e;const i=new Map;if(t)for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const e=t.slice(r,r+4),o=e.join(",");if(!i.has(o)){const t=n(e);t?i.set(o,{...t,color:e}):ve.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(i.values())}(this._drawAndSample({layers:h,views:n,viewports:i,onViewportActive:u,deviceRect:b,cullRect:{x:r,y:o,width:s,height:a},effects:d,pass:"picking:".concat(l)})),E=new Map,S=[],T=Number.isFinite(c);for(let A=0;A<w.length;A++){var x;if(T&&S.length>=c)break;const e=w[A];let t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:f};t=Eh({layer:e.pickedLayer,info:t,mode:l});const n=t.layer.id;E.has(n)||E.set(n,new Set);const i=E.get(n),s=null!==(x=t.object)&&void 0!==x?x:t.index;i.has(s)||(i.add(s),S.push(t))}return S}_drawAndSample(e){let{layers:t,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:l}=e,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const v of a)v.useInPicking&&(d.preRenderStats[v.id]=v.preRender(d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=o,_=new(c?Float32Array:Uint8Array)(g*m*4);return this.device.readPixelsToArrayWebGL(u,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:_}),{pickedColors:_,decodePickingColor:h}}_getPickingRect(e){let{deviceX:t,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}=e;const s=Math.max(0,t-i),a=Math.max(0,n-i),l=Math.min(r,t+i+1)-s,c=Math.min(o,n+i+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const Th={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},xh="top-left",Ah="__root";class Rh{constructor(e){let{deck:t,parentElement:n}=e;this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!As(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find((t=>t.id===e.id))||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const t={};for(const n of this.resolvedWidgets)t[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)t[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const e=t[n.id];e?e.viewId!==n.viewId||e.placement!==n.placement?(this._remove(e),this._add(n)):n!==e&&(e.setProps(n.props),n=e):this._add(n),t[n.id]=null,this.resolvedWidgets.push(n)}for(const n in t){const e=t[n];e&&this._remove(e)}this.widgets=e}_add(e){const{viewId:t=null,placement:n=xh}=e,i=e.onAdd({deck:this.deck,viewId:t});i&&this._getContainer(t,n).append(i),e._element=i}_remove(e){e.onRemove(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,t){const n=e||Ah;let i=this.containers[n];var r;i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",null===(r=this.parentElement)||void 0===r||r.append(i),this.containers[n]=i);let o=i.querySelector(".".concat(t));return o||(o=document.createElement("div"),o.className=t,o.style.position="absolute",o.style.zIndex="2",Object.assign(o.style,Th[t]),i.append(o)),o}_updateContainers(){const e=this.deck.width,t=this.deck.height;for(const n in this.containers){const i=this.lastViewports[n]||null,r=n===Ah||i,o=this.containers[n];r?(o.style.display="block",o.style.left="".concat(i?i.x:0,"px"),o.style.top="".concat(i?i.y:0,"px"),o.style.width="".concat(i?i.width:e,"px"),o.style.height="".concat(i?i.height:t,"px")):o.style.display="none"}}onRedraw(e){let{viewports:t,layers:n}=e;const i=t.reduce(((e,t)=>(e[t.id]=t,e)),{}),{lastViewports:r}=this;for(const a of this.getWidgets()){const{viewId:e}=a;if(e){const t=i[e];var o;if(t)a.onViewportChange&&!t.equals(r[e])&&a.onViewportChange(t),null===(o=a.onRedraw)||void 0===o||o.call(a,{viewports:[t],layers:n})}else{var s;if(a.onViewportChange)for(const e of t)e.equals(r[e.id])||a.onViewportChange(e);null===(s=a.onRedraw)||void 0===s||s.call(a,{viewports:t,layers:n})}}this.lastViewports=i,this._updateContainers()}onHover(e,t){for(const r of this.getWidgets()){var n;const{viewId:o}=r;var i;if(!o||o===(null===(n=e.viewport)||void 0===n?void 0:n.id))null===(i=r.onHover)||void 0===i||i.call(r,e,t)}}onEvent(e,t){const n=Ee[t.type];if(n)for(const o of this.getWidgets()){var i;const{viewId:s}=o;var r;if(!s||s===(null===(i=e.viewport)||void 0===i?void 0:i.id))null===(r=o[n.handler])||void 0===r||r.call(o,e,t)}}}const Ch={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Ph{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd(e){let{deck:t}=e;const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,Ch),this.deck=t,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var t;this.isVisible&&e.id===(null===(t=this.lastViewport)||void 0===t?void 0:t.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:t}=this,n=t&&t.props.getTooltip;if(!n)return;const i=n(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,t,n){const i=this.element;if(i){if("string"===typeof e)i.innerText=e;else{if(!e)return this.isVisible=!1,void(i.style.display="none");e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className)}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(t,"px, ").concat(n,"px)"),e&&"object"===typeof e&&"style"in e&&Object.assign(i.style,e.style)}}}var Lh;const Mh=null===(Lh=globalThis.loaders)||void 0===Lh?void 0:Lh.parseImageNode,kh="undefined"!==typeof Image,Ih="undefined"!==typeof ImageBitmap,Oh=Boolean(Mh),Nh=!!va||Oh;function Fh(e){const t=Bh(e);if(!t)throw new Error("Not an image");return t}function Dh(e){switch(Fh(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Bh(e){return"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&e instanceof Image?"image":e&&"object"===typeof e&&e.data&&e.width&&e.height?"data":null}const Uh=/^data:image\/svg\+xml/,zh=/\.svg((\?|#).*)?$/;function Gh(e){return e&&(Uh.test(e)||zh.test(e))}function jh(e,t){if(Gh(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function Vh(e,t,n){const i=function(e,t){if(Gh(t)){let t=(new TextDecoder).decode(e);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return jh(e,t)}(e,n),r=self.URL||self.webkitURL,o="string"!==typeof i&&r.createObjectURL(i);try{return await async function(e,t){const n=new Image;if(n.src=e,t.image&&t.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,t)=>{try{n.onload=()=>e(n),n.onerror=e=>{const n=e instanceof Error?e.message:"error";t(new Error(n))}}catch(i){t(i)}}))}(o||i,t)}finally{o&&r.revokeObjectURL(o)}}const Wh={};let Hh=!0;async function Xh(e,t,n){let i;if(Gh(n)){i=await Vh(e,t,n)}else i=jh(e,n);const r=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e){for(const t in e||Wh)return!1;return!0}(t)&&Hh||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(n){console.warn(n),Hh=!1}return await createImageBitmap(e)}(i,r)}function Kh(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=(r=t,[...r].map((e=>e.charCodeAt(0))));var r;for(let o=0;o<i.length;++o)if(i[o]!==e[o+n])return!1;return!0}(e,"ftyp",4)?0===(96&e[8])?null:function(e){switch((t=e,n=8,i=12,String.fromCharCode(...t.slice(n,i))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,n,i}(e):null}const Yh=!1,qh=!0;function Zh(e){const t=Qh(e);return function(e){const t=Qh(e),n=t.byteLength>=24&&2303741511===t.getUint32(0,Yh);if(!n)return null;return{mimeType:"image/png",width:t.getUint32(16,Yh),height:t.getUint32(20,Yh)}}(t)||function(e){const t=Qh(e),n=t.byteLength>=3&&65496===t.getUint16(0,Yh)&&255===t.getUint8(2);if(!n)return null;const{tableMarkers:i,sofMarkers:r}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)e.add(n);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let o=2;for(;o+9<t.byteLength;){const e=t.getUint16(o,Yh);if(r.has(e))return{mimeType:"image/jpeg",height:t.getUint16(o+5,Yh),width:t.getUint16(o+7,Yh)};if(!i.has(e))return null;o+=2,o+=t.getUint16(o,Yh)}return null}(t)||function(e){const t=Qh(e),n=t.byteLength>=10&&1195984440===t.getUint32(0,Yh);if(!n)return null;return{mimeType:"image/gif",width:t.getUint16(6,qh),height:t.getUint16(8,qh)}}(t)||function(e){const t=Qh(e),n=t.byteLength>=14&&16973===t.getUint16(0,Yh)&&t.getUint32(2,qh)===t.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:t.getUint32(18,qh),height:t.getUint32(22,qh)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),n=Kh(t);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(t)}function Qh(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const $h={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,n){const i=((t=t||{}).image||{}).type||"auto",{url:r}=n||{};let o;switch(function(e){switch(e){case"auto":case"data":return function(){if(Ih)return"imagebitmap";if(kh)return"image";if(Nh)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return Ih||kh||Nh;case"imagebitmap":return Ih;case"image":return kh;case"data":return Nh;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(i)){case"imagebitmap":o=await Xh(e,t,r);break;case"image":o=await Vh(e,t,r);break;case"data":o=await async function(e,t){var n;const{mimeType:i}=Zh(e)||{},r=null===(n=globalThis.loaders)||void 0===n?void 0:n.parseImageNode;return Js(r),await r(e,i)}(e);break;default:Js(!1)}return"data"===i&&(o=Dh(o)),o},tests:[e=>Boolean(Zh(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};const Jh={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};const ef=function(){const e="9.0.15",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error("deck.gl - multiple versions detected: ".concat(t," vs ").concat(e));return t||(ve.log(1,"deck.gl ".concat(e))(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:ve,_registerLoggers:wt},function(e){const t=ul();e=Array.isArray(e)?e:[e];for(const n of e){const e=ta(n);t.find((t=>e===t))||t.unshift(e)}}([Jh,[$h,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}();const tf=new class{constructor(){H(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new ud({id:e})),this.stats.get(e)}};const nf=function(){const e="9.0.14";if(globalThis.luma&&globalThis.luma.VERSION!==e)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(e));return globalThis.luma||($()&&Ft.log(1,"".concat(e," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:e,version:e,log:Ft,stats:tf}),e}(),rf=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],of=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function sf(e){const t=of.exec(e);if(t){const[,e,n,i,r,o]=t;if(e){const t=Wt("".concat(i).concat(n));return{format:e,components:e.length,srgb:"-srgb"===r,unsized:"-unsized"===o,webgl:"-webgl"===o,...t}}}return function(e){var t;const n=af[e];if(!n)throw new Error("Unknown format ".concat(e));return{format:n.format||"",components:n.components||(null===(t=n.format)||void 0===t?void 0:t.length)||1,byteLength:n.bpp||1,srgb:!1,unsized:!1}}(e)}const af={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};class lf{}class cf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;H(this,"features",void 0),H(this,"disabledFeatures",void 0),this.features=new Set(e),this.disabledFeatures=t||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures[e]&&this.features.has(e)}}class uf{get[Symbol.toStringTag](){return"Device"}constructor(e){H(this,"id",void 0),H(this,"props",void 0),H(this,"userData",{}),H(this,"statsManager",tf),H(this,"_lumaData",{}),H(this,"timestamp",0),this.props={...uf.defaultProps,...e},this.id=this.props.id||K(this[Symbol.toStringTag].toLowerCase())}isTextureFormatCompressed(e){return t=e,rf.some((e=>t.startsWith(e)));var t}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(e){return(e instanceof Promise||"string"===typeof e)&&(e={data:e}),this._createTexture(e)}createCommandEncoder(){throw new Error("not implemented")}readPixelsToArrayWebGL(e,t){throw new Error("not implemented")}readPixelsToBufferWebGL(e,t){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,t){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}_getBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t={...e};return(e.usage||0)&Z.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?t.indexType="uint32":e.data instanceof Uint16Array?t.indexType="uint16":Ft.warn("indices buffer content must be of integer type")()),t}}H(uf,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:Boolean(Ft.get("debug")),spector:Boolean(Ft.get("spector")||Ft.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:e=>Ft.error(e.message)}),H(uf,"VERSION",nf);const df=new Map;class hf{static registerDevices(e){for(const t of e)St(t.type&&t.isSupported&&t.create),df.set(t.type,t)}static getAvailableDevices(){return Array.from(df).map((e=>e.type))}static getSupportedDevices(){return Array.from(df).filter((e=>e.isSupported())).map((e=>e.type))}static setDefaultDeviceProps(e){Object.assign(uf.defaultProps,e)}static async attachDevice(e){const t=ff(e.devices)||df;if(e.handle instanceof WebGL2RenderingContext){const n=t.get("webgl");if(n)return await n.attach(e.handle)}if(null===e.handle){const e=t.get("unknown");if(e)return await e.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(){var e,t,n,i;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r={...hf.defaultProps,...r},r.gl&&(r.type="webgl");const o=ff(r.devices)||df;switch(r.type){case"webgpu":let s=o.get("webgpu");if(s)return await s.create(r);break;case"webgl":let a=o.get("webgl");if(a)return await a.create(r);break;case"unknown":const l=o.get("unknown");if(l)return await l.create(r);break;case"best-available":if(s=o.get("webgpu"),null!==(e=s)&&void 0!==e&&null!==(t=e.isSupported)&&void 0!==t&&t.call(e))return await s.create(r);if(a=o.get("webgl"),null!==(n=a)&&void 0!==n&&null!==(i=n.isSupported)&&void 0!==i&&i.call(n))return await a.create(r)}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=HTMLCanvasElement.prototype;if(!e&&t.originalGetContext)return t.getContext=t.originalGetContext,void(t.originalGetContext=void 0);t.originalGetContext=t.getContext,t.getContext=function(e,t){return"webgl"===e||"experimental-webgl"===e?this.originalGetContext("webgl2",t):this.originalGetContext(e,t)}}}function ff(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return null;const t=new Map;for(const n of e)t.set(n.type,n);return t}H(hf,"defaultProps",{...uf.defaultProps,type:"best-available",devices:void 0}),H(hf,"stats",tf),H(hf,"log",Ft);const pf=$()&&"undefined"!==typeof document,gf=()=>pf&&"complete"===document.readyState,mf={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class _f{static get isPageLoaded(){return gf()}constructor(e){if(H(this,"id",void 0),H(this,"props",void 0),H(this,"canvas",void 0),H(this,"htmlCanvas",void 0),H(this,"offscreenCanvas",void 0),H(this,"type",void 0),H(this,"width",1),H(this,"height",1),H(this,"resizeObserver",void 0),H(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1}),this.props={...mf,...e},e=this.props,!$())return this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,void(this.canvas=null);if(e.canvas)"string"===typeof e.canvas?this.canvas=function(e){const t=document.getElementById(e);if(!t&&!gf())throw new Error("Accessing '".concat(e,"' before page was loaded"));if(!(t instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return t}(e.canvas):this.canvas=e.canvas;else{var t,n;const i=function(e){const{width:t,height:n}=e,i=document.createElement("canvas");return i.id="lumagl-auto-created-canvas",i.width=t||1,i.height=n||1,i.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",i.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",i}(e),r=function(e){if("string"===typeof e){const t=document.getElementById(e);if(!t&&!gf())throw new Error("Accessing '".concat(e,"' before page was loaded"));if(!t)throw new Error("".concat(e," is not an HTML element"));return t}if(e)return e;return document.body}((null===(t=e)||void 0===t?void 0:t.container)||null);r.insertBefore(i,r.firstChild),this.canvas=i,null!==(n=e)&&void 0!==n&&n.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver((e=>{for(const t of e)t.target===this.canvas&&this.update()})),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(e){if("undefined"!==typeof OffscreenCanvas&&this.canvas instanceof OffscreenCanvas)return 1;if(!(e=void 0===e?this.props.useDevicePixels:e)||e<=0)return 1;if(!0===e){return"undefined"!==typeof window&&window.devicePixelRatio||1}return e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),t=this.canvas;return t.parentElement?[t.clientWidth*e,t.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,t]=this.getPixelSize();return e/t}cssToDeviceRatio(){try{const[e]=this.getDrawingBufferSize(),{clientWidth:t}=this._canvasSizeInfo;return t?e/t:1}catch{return 1}}cssToDevicePixels(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.cssToDeviceRatio(),[i,r]=this.getDrawingBufferSize();return function(e,t,n,i,r){const o=e,s=vf(o[0],t,n);let a=yf(o[1],t,i,r),l=vf(o[0]+1,t,n);const c=l===n-1?l:l-1;let u;l=yf(o[1]+1,t,i,r),r?(l=0===l?l:l+1,u=a,a=l):u=l===i-1?l:l-1;return{x:s,y:a,width:Math.max(c-s+1,1),height:Math.max(u-a+1,1)}}(e,n,i,r,t)}setDevicePixelRatio(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.htmlCanvas)return;let n="width"in t?t.width:this.htmlCanvas.clientWidth,i="height"in t?t.height:this.htmlCanvas.clientHeight;n&&i||(Ft.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const r=this._canvasSizeInfo;if(r.clientWidth!==n||r.clientHeight!==i||r.devicePixelRatio!==e){let t=e;const r=Math.floor(n*t),o=Math.floor(i*t);this.htmlCanvas.width=r,this.htmlCanvas.height=o;const[s,a]=this.getDrawingBufferSize();s===r&&a===o||(t=Math.min(s/n,a/i),this.htmlCanvas.width=Math.floor(n*t),this.htmlCanvas.height=Math.floor(i*t),Ft.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}getDrawingBufferSize(){const e=this.device.gl;if(!e)throw new Error("canvas size");return[e.drawingBufferWidth,e.drawingBufferHeight]}_setAutoCreatedCanvasId(e){var t;"lumagl-auto-created-canvas"===(null===(t=this.htmlCanvas)||void 0===t?void 0:t.id)&&(this.htmlCanvas.id=e)}}function vf(e,t,n){return Math.min(Math.round(e*t),n-1)}function yf(e,t,n,i){return i?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}H(_f,"pageLoaded",function(){if(gf()||"undefined"===typeof window)return Promise.resolve();return new Promise((e=>{window.addEventListener("load",(()=>e()))}))}());const bf={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},wf=(e,t,n)=>t?e.enable(n):e.disable(n),Ef=(e,t,n)=>e.hint(n,t),Sf=(e,t,n)=>e.pixelStorei(n,t),Tf=(e,t,n)=>{const i=36006===n?36009:36008;return e.bindFramebuffer(i,t)},xf=(e,t,n)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];e.bindBuffer(i,t)};function Af(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}const Rf={3042:wf,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:wf,2885:(e,t)=>e.cullFace(t),2929:wf,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:wf,35723:Ef,35725:(e,t)=>e.useProgram(t),36007:(e,t)=>e.bindRenderbuffer(36161,t),36389:(e,t)=>{var n;return null===(n=e.bindTransformFeedback)||void 0===n?void 0:n.call(e,36386,t)},34229:(e,t)=>e.bindVertexArray(t),36006:Tf,36010:Tf,34964:xf,36662:xf,36663:xf,35053:xf,35055:xf,2886:(e,t)=>e.frontFace(t),33170:Ef,2849:(e,t)=>e.lineWidth(t),32823:wf,32824:"polygonOffset",10752:"polygonOffset",35977:wf,32926:wf,32928:wf,32938:"sampleCoverage",32939:"sampleCoverage",3089:wf,3088:(e,t)=>e.scissor(...t),2960:wf,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),34383:wf,10754:wf,12288:wf,12289:wf,12290:wf,12291:wf,12292:wf,12293:wf,12294:wf,12295:wf,3333:Sf,3317:Sf,37440:Sf,37441:Sf,37443:Sf,3330:Sf,3332:Sf,3331:Sf,3314:Sf,32878:Sf,3316:Sf,3315:Sf,32877:Sf,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{const n="number"===typeof t?[t,t]:t;e.blendEquationSeparate(...n)},blendFunc:(e,t)=>{const n=2===(null===t||void 0===t?void 0:t.length)?[...t,...t]:t;e.blendFuncSeparate(...n)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Af(t)?t:[t,t];const[n,i]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,i)},stencilFunc:(e,t)=>{t=Af(t)&&3===t.length?[...t,...t]:t;const[n,i,r,o,s,a]=t;e.stencilFuncSeparate(1028,n,i,r),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Af(t)&&3===t.length?[...t,...t]:t;const[n,i,r,o,s,a]=t;e.stencilOpSeparate(1028,n,i,r),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function Cf(e,t,n){return void 0!==t[e]?t[e]:n[e]}const Pf={blendEquation:(e,t,n)=>e.blendEquationSeparate(Cf(32777,t,n),Cf(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(Cf(32969,t,n),Cf(32968,t,n),Cf(32971,t,n),Cf(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(Cf(32824,t,n),Cf(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(Cf(32938,t,n),Cf(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,Cf(2962,t,n),Cf(2967,t,n),Cf(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,Cf(34816,t,n),Cf(36003,t,n),Cf(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,Cf(2964,t,n),Cf(2965,t,n),Cf(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,Cf(34817,t,n),Cf(34818,t,n),Cf(34819,t,n))},Lf={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),useProgram:(e,t)=>e({35725:t}),bindRenderbuffer:(e,t,n)=>e({36007:n}),bindTransformFeedback:(e,t,n)=>e({36389:n}),bindVertexArray:(e,t)=>e({34229:t}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},bindBuffer:(e,t,n)=>{const i={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[t];return i?e({[i]:n}):{valueChanged:!0}},blendColor:(e,t,n,i,r)=>e({32773:new Float32Array([t,n,i,r])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,i,r)=>e({32969:t,32968:n,32971:i,32970:r}),clearColor:(e,t,n,i,r)=>e({3106:new Float32Array([t,n,i,r])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,i,r)=>e({3107:[t,n,i,r]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,i,r)=>e({3088:new Int32Array([t,n,i,r])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,i)=>e({2962:t,2967:n,2963:i,34816:t,36003:n,36004:i}),stencilFuncSeparate:(e,t,n,i,r)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:i,[1028===t?2963:36004]:r}),stencilOp:(e,t,n,i)=>e({2964:t,2965:n,2966:i,34817:t,34818:n,34819:i}),stencilOpSeparate:(e,t,n,i,r)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:i,[1028===t?2966:34819]:r}),viewport:(e,t,n,i,r)=>e({2978:[t,n,i,r]})},Mf=(e,t)=>e.isEnabled(t),kf={3042:Mf,2884:Mf,2929:Mf,3024:Mf,32823:Mf,32926:Mf,32928:Mf,3089:Mf,2960:Mf,35977:Mf},If=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Of(e,t){if(function(e){for(const t in e)return!1;return!0}(t))return;const n={};for(const r in t){const i=Number(r),o=Rf[r];o&&("string"===typeof o?n[o]=!0:o(e,t[r],i))}const i=e.state&&e.state.cache;if(i)for(const r in n){(0,Pf[r])(e,t,i)}}function Nf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bf;if("number"===typeof t){const n=t,i=kf[n];return i?i(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),i={};for(const r of n){const t=kf[r];i[r]=t?t(e,Number(r)):e.getParameter(Number(r))}return i}function Ff(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),i=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&i&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}class Df{constructor(e){let{copyState:t=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};H(this,"gl",void 0),H(this,"program",null),H(this,"stateStack",[]),H(this,"enable",!0),H(this,"cache",void 0),H(this,"log",void 0),this.gl=e,this.cache=t?Nf(e):Object.assign({},bf),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){St(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Of(this.gl,e),this.stateStack.pop()}_updateCache(e){let t,n=!1;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const r in e){St(void 0!==r);const o=e[r],s=this.cache[r];Ff(o,s)||(n=!0,t=s,i&&!(r in i)&&(i[r]=s),this.cache[r]=o)}return{valueChanged:n,oldValue:t}}}function Bf(e){return e.state}function Uf(e,t){const{enable:n=!0,copyState:i}=t;if(St(void 0!==i),!e.state){e.state=new Df(e,{copyState:i}),function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){const i=Bf(e);i.program!==n&&(t(n),i.program=n)}}(e);for(const t in Lf){Vf(e,t,Lf[t])}jf(e,"getParameter"),jf(e,"isEnabled")}return Bf(e).enable=n,e}function zf(e){let t=Bf(e);t||(Uf(e,{copyState:!1}),t=Bf(e)),t.push()}function Gf(e){const t=Bf(e);St(t),t.pop()}function jf(e,t){const n=e[t].bind(e);e[t]=function(t){if(void 0===t||If.has(t))return n(t);const i=Bf(e);return t in i.cache||(i.cache[t]=n(t)),i.enable?i.cache[t]:n(t)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Vf(e,t,n){if(!e[t])return;const i=e[t].bind(e);e[t]=function(){const t=Bf(e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const{valueChanged:a,oldValue:l}=n(t._updateCache,...o);return a&&i(...o),l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}const Wf={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function Hf(e,t,n){return void 0===n[t]&&(n[t]=e.getExtension(t)||null),n[t]}function Xf(e,t){const n=e.getParameter(7936),i=e.getParameter(7937);Hf(e,"WEBGL_debug_renderer_info",t);const r=t.WEBGL_debug_renderer_info,o=e.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936)||n,s=e.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937)||i,a=e.getParameter(7938),l=Kf(o,s),c=function(e,t){if(/Metal/i.exec(e)||/Metal/i.exec(t))return"metal";if(/ANGLE/i.exec(e)||/ANGLE/i.exec(t))return"opengl";return"unknown"}(o,s),u=function(e,t){if(/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t))return"cpu";switch(Kf(e,t)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(o,s);return{type:"webgl",gpu:l,gpuType:u,gpuBackend:c,vendor:o,renderer:s,version:a,shadingLanguage:"glsl",shadingLanguageVersion:300}}function Kf(e,t){return/NVIDIA/i.exec(e)||/NVIDIA/i.exec(t)?"nvidia":/INTEL/i.exec(e)||/INTEL/i.exec(t)?"intel":/Apple/i.exec(e)||/Apple/i.exec(t)?"apple":/AMD/i.exec(e)||/AMD/i.exec(t)||/ATI/i.exec(e)||/ATI/i.exec(t)?"amd":/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t)?"software":"unknown"}function Yf(e){switch(e){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(e))}const qf="texture-compression-bc",Zf="texture-compression-astc",Qf="texture-compression-etc2",$f="texture-compression-pvrtc-webgl",Jf="texture-compression-atc-webgl",ep="float32-renderable-webgl",tp="float16-renderable-webgl",np="snorm8-renderable-webgl",ip="norm16-renderable-webgl",rp="snorm16-renderable-webgl",op="float32-filterable",sp="float16-filterable-webgl",ap="WEBGL_compressed_texture_s3tc",lp="WEBGL_compressed_texture_s3tc_srgb",cp="EXT_texture_compression_rgtc",up="EXT_texture_compression_bptc",dp="EXT_texture_norm16",hp="EXT_render_snorm",fp={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[hp],"norm16-renderable-webgl":[dp],"snorm16-renderable-webgl":[dp,hp],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[ap,lp,cp,up],"texture-compression-bc5-webgl":[cp],"texture-compression-bc7-webgl":[up],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};function pp(e,t,n){return(fp[t]||[]).every((t=>Hf(e,t,n)))}const gp={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:np},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:np},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:tp,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:ip,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:rp},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:np},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:tp,filter:sp,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:ip},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:rp},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:ep,filter:op},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:"rgb9e5ufloat_renderable-webgl"},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:ep,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:ip},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:ip},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:ep,filter:op,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:tp,filter:sp},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:ip,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:rp},"rgb32float-webgl":{gl:34837,render:ep,filter:op,gl2ext:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:ep,filter:op,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:ap,f:qf},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:lp,f:qf},"bc1-rgba-unorm":{gl:33777,x:ap,f:qf},"bc1-rgba-unorm-srgb":{gl:35916,x:lp,f:qf},"bc2-rgba-unorm":{gl:33778,x:ap,f:qf},"bc2-rgba-unorm-srgb":{gl:35918,x:lp,f:qf},"bc3-rgba-unorm":{gl:33779,x:ap,f:qf},"bc3-rgba-unorm-srgb":{gl:35919,x:lp,f:qf},"bc4-r-unorm":{gl:36283,x:cp,f:qf},"bc4-r-snorm":{gl:36284,x:cp,f:qf},"bc5-rg-unorm":{gl:36285,x:cp,f:qf},"bc5-rg-snorm":{gl:36286,x:cp,f:qf},"bc6h-rgb-ufloat":{gl:36495,x:up,f:qf},"bc6h-rgb-float":{gl:36494,x:up,f:qf},"bc7-rgba-unorm":{gl:36492,x:up,f:qf},"bc7-rgba-unorm-srgb":{gl:36493,x:up,f:qf},"etc2-rgb8unorm":{gl:37492,f:Qf},"etc2-rgb8unorm-srgb":{gl:37494,f:Qf},"etc2-rgb8a1unorm":{gl:37496,f:Qf},"etc2-rgb8a1unorm-srgb":{gl:37497,f:Qf},"etc2-rgba8unorm":{gl:37493,f:Qf},"etc2-rgba8unorm-srgb":{gl:37495,f:Qf},"eac-r11unorm":{gl:37488,f:Qf},"eac-r11snorm":{gl:37489,f:Qf},"eac-rg11unorm":{gl:37490,f:Qf},"eac-rg11snorm":{gl:37491,f:Qf},"astc-4x4-unorm":{gl:37808,f:Zf},"astc-4x4-unorm-srgb":{gl:37840,f:Zf},"astc-5x4-unorm":{gl:37809,f:Zf},"astc-5x4-unorm-srgb":{gl:37841,f:Zf},"astc-5x5-unorm":{gl:37810,f:Zf},"astc-5x5-unorm-srgb":{gl:37842,f:Zf},"astc-6x5-unorm":{gl:37811,f:Zf},"astc-6x5-unorm-srgb":{gl:37843,f:Zf},"astc-6x6-unorm":{gl:37812,f:Zf},"astc-6x6-unorm-srgb":{gl:37844,f:Zf},"astc-8x5-unorm":{gl:37813,f:Zf},"astc-8x5-unorm-srgb":{gl:37845,f:Zf},"astc-8x6-unorm":{gl:37814,f:Zf},"astc-8x6-unorm-srgb":{gl:37846,f:Zf},"astc-8x8-unorm":{gl:37815,f:Zf},"astc-8x8-unorm-srgb":{gl:37847,f:Zf},"astc-10x5-unorm":{gl:37819,f:Zf},"astc-10x5-unorm-srgb":{gl:37851,f:Zf},"astc-10x6-unorm":{gl:37817,f:Zf},"astc-10x6-unorm-srgb":{gl:37849,f:Zf},"astc-10x8-unorm":{gl:37818,f:Zf},"astc-10x8-unorm-srgb":{gl:37850,f:Zf},"astc-10x10-unorm":{gl:37819,f:Zf},"astc-10x10-unorm-srgb":{gl:37851,f:Zf},"astc-12x10-unorm":{gl:37820,f:Zf},"astc-12x10-unorm-srgb":{gl:37852,f:Zf},"astc-12x12-unorm":{gl:37821,f:Zf},"astc-12x12-unorm-srgb":{gl:37853,f:Zf},"pvrtc-rgb4unorm-webgl":{gl:35840,f:$f},"pvrtc-rgba4unorm-webgl":{gl:35842,f:$f},"pvrtc-rbg2unorm-webgl":{gl:35841,f:$f},"pvrtc-rgba2unorm-webgl":{gl:35843,f:$f},"etc1-rbg-unorm-webgl":{gl:36196,f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{gl:35986,f:Jf},"atc-rgba-unorm-webgl":{gl:35986,f:Jf},"atc-rgbai-unorm-webgl":{gl:34798,f:Jf}},mp={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},_p={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function vp(e,t,n){const i=gp[t];if(!i)return!1;if(void 0===i.gl)return!1;const r=i.x||i.gl2ext;return!r||Boolean(Hf(e,r,n))}function yp(e){const t=gp[e],n=null===t||void 0===t?void 0:t.gl;if(void 0===n)throw new Error("Unsupported texture format ".concat(e));return n}function bp(e){var t;const n=gp[e],i=yp(e),r=sf(e);return{format:i,dataFormat:(null===n||void 0===n?void 0:n.dataFormat)||Ep(r.format,r.integer,r.normalized,i),type:r.dataType?Yf(r.dataType):(null===n||void 0===n||null===(t=n.types)||void 0===t?void 0:t[0])||5121,compressed:r.compressed}}function wp(e){const t=bp(e);return(mp[t.dataFormat]||4)*(_p[t.type]||1)}function Ep(e,t,n,i){if(6408===i||6407===i)return i;switch(e){case"r":return t&&!n?36244:6403;case"rg":return t&&!n?33320:33319;case"rgb":return t&&!n?36248:6407;case"rgba":return t&&!n?36249:6408;default:return 6408}}const Sp={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Tp extends cf{constructor(e,t,n){super([],n),H(this,"gl",void 0),H(this,"extensions",void 0),H(this,"testedFeatures",new Set),this.gl=e,this.extensions=t,Hf(e,"EXT_color_buffer_float",t)}*[Symbol.iterator](){const e=this.getFeatures();for(const t of e)this.has(t)&&(yield t);return[]}has(e){return!this.disabledFeatures[e]&&(this.testedFeatures.has(e)||(this.testedFeatures.add(e),function(e){return e in fp}(e)&&pp(this.gl,e,this.extensions)&&this.features.add(e),this.getWebGLFeature(e)&&this.features.add(e)),this.features.has(e))}initializeFeatures(){const e=this.getFeatures().filter((e=>"polygon-mode-webgl"!==e));for(const t of e)this.has(t)}getFeatures(){return[...Object.keys(Sp),...Object.keys(fp)]}getWebGLFeature(e){const t=Sp[e];return"string"===typeof t?Boolean(Hf(this.gl,t,this.extensions)):Boolean(t)}}class xp extends lf{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}constructor(e){super(),H(this,"gl",void 0),H(this,"limits",{}),this.gl=e}getParameter(e){return void 0===this.limits[e]&&(this.limits[e]=this.gl.getParameter(e)),this.limits[e]}}class Ap extends q{get[Symbol.toStringTag](){return"Framebuffer"}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Ap.defaultProps),H(this,"width",void 0),H(this,"height",void 0),H(this,"colorAttachments",[]),H(this,"depthStencilAttachment",null),this.width=this.props.width,this.height=this.props.height}resize(e){let t=!e;if(e){const[n,i]=Array.isArray(e)?e:[e.width,e.height];t=t||i!==this.height||n!==this.width,this.width=n,this.height=i}t&&(Ft.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(this.width,"x").concat(this.height))(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((e=>{if("string"===typeof e){const t=this.createColorTexture(e);return this.attachResource(t),t.view}return e instanceof Rt?e.view:e}));const e=this.props.depthStencilAttachment;if(e)if("string"===typeof e){const t=this.createDepthStencilTexture(e);this.attachResource(t),this.depthStencilAttachment=t.view}else this.depthStencilAttachment=e instanceof Rt?e.view:e}createColorTexture(e){return this.device.createTexture({id:"color-attachment",usage:Rt.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height})}createDepthStencilTexture(e){return this.device.createTexture({id:"depth-stencil-attachment",usage:Rt.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height})}resizeAttachments(e,t){for(let n=0;n<this.colorAttachments.length;++n)if(this.colorAttachments[n]){const i=this.device._createTexture({...this.colorAttachments[n].props,width:e,height:t});this.destroyAttachedResource(this.colorAttachments[n]),this.colorAttachments[n]=i.view,this.attachResource(i.view)}if(this.depthStencilAttachment){const n=this.device._createTexture({...this.depthStencilAttachment.props,width:e,height:t});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=n.view,this.attachResource(n)}}}H(Ap,"defaultProps",{...q.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Rp="";async function Cp(e,t){return await new Promise(((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(e,"."))),r.crossOrigin=(null===t||void 0===t?void 0:t.crossOrigin)||"anonymous",r.src=e.startsWith("http")?e:Rp+e}catch(r){i(r)}}))}async function Pp(e,t){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",e),t&&(i.id=t),new Promise(((t,r)=>{i.onload=t,i.onerror=t=>r(new Error("Unable to load script '".concat(e,"': ").concat(t))),n.appendChild(i)}))}function Lp(e,t,n){if(function(e){for(const t in e)return!1;return!0}(t))return n(e);const{nocatch:i=!0}=t;let r;if(zf(e),Of(e,t),i)r=n(e),Gf(e);else try{r=n(e)}finally{Gf(e)}return r}function Mp(e,t){const n=e,{gl:i}=n;if(t.cullMode)switch(t.cullMode){case"none":i.disable(2884);break;case"front":i.enable(2884),i.cullFace(1028);break;case"back":i.enable(2884),i.cullFace(1029)}if(t.frontFace&&i.frontFace(Fp("frontFace",t.frontFace,{ccw:2305,cw:2304})),t.unclippedDepth&&e.features.has("depth-clip-control")&&i.enable(34383),void 0!==t.depthBias&&(i.enable(32823),i.polygonOffset(t.depthBias,t.depthBiasSlopeScale||0)),t.provokingVertex&&e.features.has("provoking-vertex-webgl")){const e=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,i=Fp("provokingVertex",t.provokingVertex,{first:36429,last:36430});null===e||void 0===e||e.provokingVertexWEBGL(i)}if((t.polygonMode||t.polygonOffsetLine)&&e.features.has("polygon-mode-webgl")){if(t.polygonMode){const e=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,i=Fp("polygonMode",t.polygonMode,{fill:6914,line:6913});null===e||void 0===e||e.polygonModeWEBGL(1028,i),null===e||void 0===e||e.polygonModeWEBGL(1029,i)}t.polygonOffsetLine&&i.enable(10754)}if(e.features.has("shader-clip-cull-distance-webgl")&&(t.clipDistance0&&i.enable(12288),t.clipDistance1&&i.enable(12289),t.clipDistance2&&i.enable(12290),t.clipDistance3&&i.enable(12291),t.clipDistance4&&i.enable(12292),t.clipDistance5&&i.enable(12293),t.clipDistance6&&i.enable(12294),t.clipDistance7&&i.enable(12295)),void 0!==t.depthWriteEnabled&&i.depthMask(t.depthWriteEnabled),t.depthCompare&&("always"!==t.depthCompare?i.enable(2929):i.disable(2929),i.depthFunc(kp("depthCompare",t.depthCompare))),t.stencilWriteMask){const e=t.stencilWriteMask;i.stencilMaskSeparate(1028,e),i.stencilMaskSeparate(1029,e)}if(t.stencilReadMask&&Ft.warn("stencilReadMask not supported under WebGL"),t.stencilCompare){const e=t.stencilReadMask||4294967295,n=kp("depthCompare",t.stencilCompare);"always"!==t.stencilCompare?i.enable(2960):i.disable(2960),i.stencilFuncSeparate(1028,n,0,e),i.stencilFuncSeparate(1029,n,0,e)}if(t.stencilPassOperation&&t.stencilFailOperation&&t.stencilDepthFailOperation){const e=Ip("stencilPassOperation",t.stencilPassOperation),n=Ip("stencilFailOperation",t.stencilFailOperation),r=Ip("stencilDepthFailOperation",t.stencilDepthFailOperation);i.stencilOpSeparate(1028,n,r,e),i.stencilOpSeparate(1029,n,r,e)}if(t.blendColorOperation||t.blendAlphaOperation){i.enable(3042);const e=Op("blendColorOperation",t.blendColorOperation||"add"),n=Op("blendAlphaOperation",t.blendAlphaOperation||"add");i.blendEquationSeparate(e,n);const r=Np("blendColorSrcFactor",t.blendColorSrcFactor||"one"),o=Np("blendColorDstFactor",t.blendColorDstFactor||"zero"),s=Np("blendAlphaSrcFactor",t.blendAlphaSrcFactor||"one"),a=Np("blendAlphaDstFactor",t.blendAlphaDstFactor||"zero");i.blendFuncSeparate(r,o,s,a)}}function kp(e,t){return Fp(e,t,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Ip(e,t){return Fp(e,t,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function Op(e,t){return Fp(e,t,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Np(e,t){return Fp(e,t,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Fp(e,t,n){if(!(t in n))throw new Error(function(e,t){return"Illegal parameter ".concat(t," for ").concat(e)}(e,t));return n[t]}function Dp(e){const t={};return e.addressModeU&&(t[10242]=Bp(e.addressModeU)),e.addressModeV&&(t[10243]=Bp(e.addressModeV)),e.addressModeW&&(t[32882]=Bp(e.addressModeW)),e.magFilter&&(t[10240]=Up(e.magFilter)),(e.minFilter||e.mipmapFilter)&&(t[10241]=function(e,t){if(!t)return Up(e);switch(e){case"nearest":return"nearest"===t?9984:9986;case"linear":return"nearest"===t?9985:9987}}(e.minFilter||"linear",e.mipmapFilter)),void 0!==e.lodMinClamp&&(t[33082]=e.lodMinClamp),void 0!==e.lodMaxClamp&&(t[33083]=e.lodMaxClamp),"comparison-sampler"===e.type&&(t[34892]=34894),e.compare&&(t[34893]=kp("compare",e.compare)),e.maxAnisotropy&&(t[34046]=e.maxAnisotropy),t}function Bp(e){switch(e){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function Up(e){switch(e){case"nearest":return 9728;case"linear":return 9729}}class zp extends Z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),H(this,"device",void 0),H(this,"gl",void 0),H(this,"handle",void 0),H(this,"glTarget",void 0),H(this,"glUsage",void 0),H(this,"glIndexType",5123),H(this,"byteLength",void 0),H(this,"bytesUsed",void 0),this.device=e,this.gl=this.device.gl;const n="object"===typeof t?t.handle:void 0;this.handle=n||this.gl.createBuffer(),e.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=function(e){if(e&Z.INDEX)return 34963;if(e&Z.VERTEX)return 34962;if(e&Z.UNIFORM)return 35345;return 34962}(this.props.usage),this.glUsage=function(e){if(e&Z.INDEX)return 35044;if(e&Z.VERTEX)return 35044;if(e&Z.UNIFORM)return 35048;return 35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,t.data?this._initWithData(t.data,t.byteOffset,t.byteLength):this._initWithByteLength(t.byteLength||0)}_initWithData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;const i=this.glTarget;this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bufferSubData(i,t,e),this.gl.bindBuffer(i,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(e,t,n),this.trackAllocatedMemory(n)}_initWithByteLength(e){St(e>=0);let t=e;0===e&&(t=new Float32Array(0));const n=this.glTarget;return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,this.glUsage),this.gl.bindBuffer(n,null),this.bytesUsed=e,this.byteLength=e,this._setDebugData(null,0,e),this.trackAllocatedMemory(e),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=36663;this.gl.bindBuffer(n,this.handle),this.gl.bufferSubData(n,t,e),this.gl.bindBuffer(n,null),this._setDebugData(e,t,e.byteLength)}async readAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.readSyncWebGL(e,t)}readSyncWebGL(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;n=null!==(e=n)&&void 0!==e?e:this.byteLength-t;const i=new Uint8Array(n);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,i,0,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,t,n),i}}class Gp extends Ct{constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"handle",void 0),H(this,"parameters",void 0),this.device=e,this.parameters=Dp(t),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return"Sampler(".concat(this.id,",").concat(JSON.stringify(this.props),")")}_setSamplerParameters(e){for(const[t,n]of Object.entries(e)){const e=Number(t);switch(e){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,e,n);break;default:this.device.gl.samplerParameteri(this.handle,e,n)}}}}class jp extends At{constructor(e,t){super(e,{...Rt.defaultProps,...t}),H(this,"device",void 0),H(this,"gl",void 0),H(this,"handle",void 0),H(this,"texture",void 0),this.device=e,this.gl=this.device.gl,this.handle=null,this.texture=t.texture}}const Vp={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0};class Wp extends Rt{constructor(e,t){var n;super(e,{...Vp,format:"rgba8unorm",...t}),H(this,"MAX_ATTRIBUTES",void 0),H(this,"device",void 0),H(this,"gl",void 0),H(this,"handle",void 0),H(this,"sampler",void 0),H(this,"view",void 0),H(this,"glFormat",void 0),H(this,"type",void 0),H(this,"dataFormat",void 0),H(this,"mipmaps",void 0),H(this,"target",void 0),H(this,"textureUnit",void 0),H(this,"loaded",!1),H(this,"_video",void 0),this.device=e,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=function(e){switch(e.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;default:throw new Error(e.dimension)}}(this.props),this.loaded=!1,"string"===typeof(null===(n=this.props)||void 0===n?void 0:n.data)&&Object.assign(this.props,{data:Cp(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}createView(e){return new jp(this.device,{...e,texture:this})}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("cube"===this.props.dimension)return this.initializeCube(e);let t=e.data;if(t instanceof Promise)return t.then((t=>this.initialize(Object.assign({},e,{pixels:t,data:t})))),this;const n="undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(n&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",(()=>this.initialize(e))),this;const{parameters:i={}}=e,{pixels:r=null,pixelStore:o={},textureUnit:s,mipmaps:a=!0}=e;t||(t=r);let{width:l,height:c,dataFormat:u,type:d,compressed:h=!1}=e;const{depth:f=0}=e,p=yp(e.format);return({width:l,height:c,compressed:h,dataFormat:u,type:d}=this._deduceParameters({format:e.format,type:d,dataFormat:u,compressed:h,data:t,width:l,height:c})),this.width=l,this.height=c,this.glFormat=p,this.type=d,this.dataFormat=u,this.textureUnit=s,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=a,this.setImageData({data:t,width:l,height:c,depth:f,format:p,type:d,dataFormat:u,parameters:o,compressed:h}),this.setSampler(e.sampler),this._setSamplerParameters(i),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),a&&this.device.isTextureFormatFilterable(e.format)&&this.generateMipmap(),n&&(this._video={video:t,parameters:i,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}initializeCube(e){const{mipmaps:t=!0,parameters:n={}}=e;return this.setCubeMapImageData(e).then((()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setSampler(e.sampler),this._setSamplerParameters(n)})),this}setSampler(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t instanceof Gp?(this.sampler=t,e=t.props):(this.sampler=new Gp(this.device,t),e=t);const n=Dp(e);return this._setSamplerParameters(n),this}resize(e){const{height:t,width:n,mipmaps:i=!1}=e;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:i}):this}update(){if(this._video){const{video:e,parameters:t,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Lp(this.gl,e,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this}setImageData(e){if("3d"===this.props.dimension||"2d-array"===this.props.dimension)return this.setImageData3D(e);this.trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:n=null,level:i=0,glFormat:r=this.glFormat,offset:o=0,parameters:s={}}=e;let{data:a=null,type:l=this.type,width:c=this.width,height:u=this.height,dataFormat:d=this.dataFormat,compressed:h=!1}=e;a||(a=n),({type:l,dataFormat:d,compressed:h,width:c,height:u}=this._deduceParameters({format:this.props.format,type:l,dataFormat:d,compressed:h,data:a,width:c,height:u}));const{gl:f}=this;f.bindTexture(this.target,this.handle);let p=null;if(({data:a,dataType:p}=this._getDataType({data:a,compressed:h})),Lp(this.gl,s,(()=>{switch(p){case"null":case"browser-object":f.texImage2D(t,i,r,c,u,0,d,l,a);break;case"typed-array":f.texImage2D(t,i,r,c,u,0,d,l,a,o);break;case"buffer":this.device.gl.bindBuffer(35052,a.handle||a),this.device.gl.texImage2D(t,i,r,c,u,0,d,l,o),this.device.gl.bindBuffer(35052,null);break;case"compressed":for(const[e,n]of a.entries())f.compressedTexImage2D(t,e,n.format,n.width,n.height,0,n.data);break;default:St(!1,"Unknown image data type")}})),a&&a.byteLength)this.trackAllocatedMemory(a.byteLength,"Texture");else{const e=wp(this.props.format);this.trackAllocatedMemory(this.width*this.height*e,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:n=null,data:i=null,x:r=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,glFormat:c=this.glFormat,type:u=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:f=0,parameters:p={}}=e;if(({type:u,dataFormat:d,compressed:h,width:s,height:a}=this._deduceParameters({format:this.props.format,type:u,dataFormat:d,compressed:h,data:i,width:s,height:a})),St(1===this.depth,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const e=i;i=e.data,s=e.shape[0],a=e.shape[1]}i instanceof zp&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Lp(this.gl,p,(()=>{h?this.gl.compressedTexSubImage2D(t,l,r,o,s,a,c,i):null===i?this.gl.texSubImage2D(t,l,r,o,s,a,d,u,null):ArrayBuffer.isView(i)?this.gl.texSubImage2D(t,l,r,o,s,a,d,u,i,f):"undefined"!==typeof WebGLBuffer&&i instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,i),this.device.gl.texSubImage2D(t,l,r,o,s,a,d,u,f),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(t,l,r,o,s,a,d,u,i)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ft.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:n=!1}=e;return n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof zp?{data:t.handle,dataType:"buffer"}:"undefined"!==typeof WebGLBuffer&&t instanceof WebGLBuffer?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:n}=e;let{width:i,height:r,dataFormat:o,type:s,compressed:a}=e;const l=bp(t);return o=o||l.dataFormat,s=s||l.type,a=a||l.compressed,({width:i,height:r}=this._deduceImageSize(n,i,r)),{dataFormat:o,type:s,compressed:a,width:i,height:r,format:t,data:n}}_deduceImageSize(e,t,n){let i;return i="undefined"!==typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},St(i,"Could not deduced texture size"),St(void 0===t||i.width===t,"Deduced texture width does not match supplied width"),St(void 0===n||i.height===n,"Deduced texture height does not match supplied height"),i}async setCubeMapImageData(e){const{gl:t}=this,{width:n,height:i,pixels:r,data:o,format:s=6408,type:a=5121}=e,l=r||o,c=await Promise.all(Wp.FACES.map((e=>{const t=l[e];return Promise.all(Array.isArray(t)?t:[t])})));this.bind(),Wp.FACES.forEach(((e,r)=>{c[r].length>1&&!1!==this.props.mipmaps&&Ft.warn("".concat(this.id," has mipmap and multiple LODs."))(),c[r].forEach(((r,o)=>{n&&i?t.texImage2D(e,o,s,n,i,0,s,a,r):t.texImage2D(e,o,s,s,a,r)}))})),this.unbind()}setImageDataForFace(e){const{face:t,width:n,height:i,pixels:r,data:o,format:s=6408,type:a=5121}=e,{gl:l}=this,c=r||o;return this.bind(),c instanceof Promise?c.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?l.texImage2D(t,0,s,n,i,0,s,a,c):l.texImage2D(t,0,s,s,a,c),this}setImageData3D(e){const{level:t=0,dataFormat:n,format:i,type:r,width:o,height:s,depth:a=1,offset:l=0,data:c,parameters:u={}}=e;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const d=bp(i);if(Lp(this.gl,u,(()=>{ArrayBuffer.isView(c)&&this.gl.texImage3D(this.target,t,d.format,o,s,a,0,d.dataFormat,d.type,c),c instanceof zp&&(this.gl.bindBuffer(35052,c.handle),this.gl.texImage3D(this.target,t,n,o,s,a,0,i,r,l))})),c&&c.byteLength)this.trackAllocatedMemory(c.byteLength,"Texture");else{const e=wp(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*e,"Texture")}return this.loaded=!0,this}_setSamplerParameters(e){if(!Y(e)){!function(e){Ft.log(1,"texture sampler parameters",e)()}(e),this.gl.bindTexture(this.target,this.handle);for(const[t,n]of Object.entries(e)){const e=Number(t),i=n;switch(e){case 33082:case 33083:this.gl.texParameterf(this.target,e,i);break;default:this.gl.texParameteri(this.target,e,i)}}this.gl.bindTexture(this.target,null)}}}H(Wp,"FACES",[34069,34070,34071,34072,34073,34074]);class Hp extends Ap{get texture(){return this.colorAttachments[0]}constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"gl",void 0),H(this,"handle",void 0);const n=null===t.handle;if(this.device=e,this.gl=e.gl,this.handle=this.props.handle||n?this.props.handle:this.gl.createFramebuffer(),!n){e.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const n=this.gl.bindFramebuffer(36160,this.handle);for(let e=0;e<this.colorAttachments.length;++e){const t=this.colorAttachments[e],n=36064+e;t&&this._attachOne(n,t)}if(this.depthStencilAttachment&&this._attachOne(function(e){const t=gp[e];if(null===t||void 0===t||!t.attachment)throw new Error("".concat(e," is not a depth stencil format"));return t.attachment}(this.depthStencilAttachment.props.format),this.depthStencilAttachment),!1!==t.check){const e=this.gl.checkFramebufferStatus(36160);if(36053!==e)throw new Error("Framebuffer ".concat(function(e){switch(e){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return"".concat(e)}}(e)))}this.gl.bindFramebuffer(36160,n)}}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(e){return new Wp(this.device,{id:"".concat(this.id,"-depth-stencil"),format:e,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(e,t){if(null===this.handle)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===t&&(t=this.gl.drawingBufferHeight);for(const n of this.colorAttachments)n.texture.resize({width:e,height:t});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:e,height:t}),this}_attachOne(e,t){if(Array.isArray(t)){const[n,i=0,r=0]=t;return this._attachTexture(e,n,i,r),n}if(t instanceof Wp)return this._attachTexture(e,t,0,0),t;if(t instanceof jp){const n=t;return this._attachTexture(e,n.texture,n.props.baseMipLevel,n.props.baseArrayLayer),t.texture}throw new Error("attach")}_attachTexture(e,t,n,i){const{gl:r}=this.device;switch(r.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:r.framebufferTextureLayer(36160,e,t.target,i,n);break;case 34067:const o=function(e){return e<34069?e+34069:e}(n);r.framebufferTexture2D(36160,e,o,t.handle,i);break;case 3553:r.framebufferTexture2D(36160,e,3553,t.handle,i);break;default:St(!1,"Illegal texture type")}r.bindTexture(t.target,null)}}class Xp extends _f{constructor(e,t){super(t),H(this,"device",void 0),H(this,"presentationSize",void 0),H(this,"_framebuffer",null),this.device=e,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId("".concat(this.device.id,"-canvas")),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Hp(this.device,{handle:null}),this._framebuffer}update(){const e=this.getPixelSize();(e[0]!==this.presentationSize[0]||e[1]!==this.presentationSize[1])&&(this.presentationSize=e,this.resize())}resize(e){if(this.device.gl)if(this.canvas){const t=this.getDevicePixelRatio(null===e||void 0===e?void 0:e.useDevicePixels);this.setDevicePixelRatio(t,e)}else;}commit(){}}const Kp={spector:Ft.get("spector")||Ft.get("spectorjs")};let Yp=null,qp=!1;var Zp;!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(Zp||(Zp={}));function Qp(e){return e.luma=e.luma||{},e.luma}function $p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?t.debug?function(e,t){if(!globalThis.WebGLDebugUtils)return Ft.warn("webgl-debug not loaded")(),e;const n=Qp(e);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Zp,...e});const i=globalThis.WebGLDebugUtils.makeDebugContext(e,eg.bind(null,t),tg.bind(null,t));for(const s in Zp)s in i||"number"!==typeof Zp[s]||(i[s]=Zp[s]);class r{}Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.setPrototypeOf(r,i);const o=Object.create(r);return n.realContext=e,n.debugContext=o,o.debug=!0,o}(e,t):function(e){const t=Qp(e);return t.realContext?t.realContext:e}(e):null}function Jp(e,t){t=Array.from(t).map((e=>void 0===e?"undefined":e));let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(e,"(").concat(n,")")}function eg(e,t,n,i){i=Array.from(i).map((e=>void 0===e?"undefined":e));const r=globalThis.WebGLDebugUtils.glEnumToString(t),o=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i),s="".concat(r," in gl.").concat(n,"(").concat(o,")");if(Ft.error(s)(),e.throwOnError)throw new Error(s)}function tg(e,t,n){let i="";if(Ft.level>=1&&(i=Jp(t,n),Ft.log(1,i)()),e.break&&e.break.length>0){i=i||Jp(t,n);e.break.every((e=>-1!==i.indexOf(e)))}for(const r of n)if(void 0===r){if(i=i||Jp(t,n),e.throwOnError)throw new Error("Undefined argument: ".concat(i));Ft.error("Undefined argument: ".concat(i))()}}function ng(e){const t=e.toLowerCase();return["warning","error","info"].includes(t)?t:"info"}class ig extends cr{constructor(e,t){switch(super(e,t),H(this,"device",void 0),H(this,"handle",void 0),this.device=e,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){return function(e){const t=e.split(/\r?\n/),n=[];for(const i of t){if(i.length<=1)continue;const e=i.split(":");if(2===e.length){const[t,i]=e;n.push({message:i.trim(),type:ng(t),lineNum:0,linePos:0});continue}const[t,r,o,...s]=e;let a=parseInt(o,10);isNaN(a)&&(a=0);let l=parseInt(r,10);isNaN(l)&&(l=0),n.push({message:s.join(":").trim(),type:ng(t),lineNum:a,linePos:l})}return n}(this.device.gl.getShaderInfoLog(this.handle))}getTranslatedSource(){const e=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return null===e||void 0===e?void 0:e.getTranslatedShaderSource(this.handle)}async _compile(e){e=(e=>e.startsWith("#version ")?e:"#version 100\n".concat(e))(e);const{gl:t}=this.device;if(t.shaderSource(this.handle,e),t.compileShader(this.handle),0!==Ft.level){if(this.device.features.has("compilation-status-async-webgl"))Ft.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),Ft.info(2,"Shader ".concat(this.id," - async compilation complete: ").concat(this.compilationStatus))(),this._getCompilationStatus(),this.debugShader();else if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw new Error("GLSL compilation errors in ".concat(this.props.stage," shader ").concat(this.props.id))}else this.compilationStatus="pending"}async _waitForCompilationComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getShaderParameter(this.handle,37297))return;await e(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}class rg extends q{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,t){super(e,t,rg.defaultProps)}}H(rg,"defaultProps",{...q.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});const og=6144,sg=[1,2,4,8];class ag extends rg{constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"glParameters",void 0),this.device=e,zf(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){Gf(this.device.gl)}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}setParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...this.glParameters};this.props.framebuffer&&(t.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(t.depthMask=!this.props.depthReadOnly),t.stencilMask=this.props.stencilReadOnly?0:1,t[35977]=this.props.discard,e.viewport&&(e.viewport.length>=6?(t.viewport=e.viewport.slice(0,4),t.depthRange=[e.viewport[4],e.viewport[5]]):t.viewport=e.viewport),e.scissorRect&&(t.scissorTest=!0,t.scissor=e.scissorRect),e.blendConstant&&(t.blendColor=e.blendConstant),e.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),e[2967]=e.stencilReference),e.colorMask&&(t.colorMask=sg.map((t=>Boolean(t&e.colorMask)))),this.glParameters=t,Of(this.device.gl,t)}beginOcclusionQuery(e){const t=this.props.occlusionQuerySet;null===t||void 0===t||t.beginOcclusionQuery()}endOcclusionQuery(){const e=this.props.occlusionQuerySet;null===e||void 0===e||e.endOcclusionQuery()}clear(){const e={...this.glParameters};let t=0;!1!==this.props.clearColor&&(t|=16384,e.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(t|=256,e.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(t|=1024,e.clearStencil=this.props.clearStencil),0!==t&&Lp(this.device.gl,e,(()=>{this.device.gl.clear(t)}))}clearColorBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];Lp(this.device.gl,{framebuffer:this.props.framebuffer},(()=>{switch(t.constructor){case Int32Array:this.device.gl.clearBufferiv(og,e,t);break;case Uint32Array:this.device.gl.clearBufferuiv(og,e,t);break;case Float32Array:default:this.device.gl.clearBufferfv(og,e,t)}}))}}const lg="Failed to deduce GL constant from typed array";function cg(e,t){const{clamped:n=!0}=t||{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const ug={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},dg={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class hg{static getBytesPerElement(e){return cg(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){St(e.size);return cg(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hg(...[ug,...t])}constructor(){H(this,"offset",void 0),H(this,"stride",void 0),H(this,"type",void 0),H(this,"size",void 0),H(this,"divisor",void 0),H(this,"normalized",void 0),H(this,"integer",void 0),H(this,"buffer",void 0),H(this,"index",void 0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>this._assign(e))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return hg.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return hg.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=function(e,t,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in t){const t=i[a]?"".concat(e,".").concat(i[a]):"N/A";Ft.removed("".concat(e,".").concat(a),t)()}for(const a in r)if(a in t){const t=r[a];Ft.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(t))()}let s=null;for(const[a,l]of Object.entries(o))a in t&&(Ft.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))(),s=s||Object.assign({},t),s[l]=t[a],delete s[a]);return s||t}("Accessor",e,dg),void 0!==e.type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalize&&(this.normalized=e.normalize),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"===typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),void 0===this.offset&&delete this.offset,void 0===this.stride&&delete this.stride,void 0===this.type&&delete this.type,void 0===this.size&&delete this.size,void 0===this.divisor&&delete this.divisor,void 0===this.normalized&&delete this.normalized,void 0===this.integer&&delete this.integer,void 0===this.buffer&&delete this.buffer,void 0===this.index&&delete this.index,this}}const fg=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],pg={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function gg(e){const t=pg[e];if(!t)throw new Error("uniform");const[n,i,,r]=t;return{format:r,components:i,glType:n}}function mg(e){const t=pg[e];if(!t)throw new Error("attribute");const[,n,,i,r]=t;return{attributeType:i,vertexFormat:r,components:n}}function _g(e,t){const n={attributes:[],bindings:[]};n.attributes=function(e,t){const n=[],i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r);if(!i)throw new Error("activeInfo");const{name:o,type:s}=i,a=e.getAttribLocation(t,o);if(a>=0){const{attributeType:e}=mg(s),t=/instance/i.test(o)?"instance":"vertex";n.push({name:o,location:a,stepMode:t,type:e})}}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);const i=function(e,t){const n=(n,i)=>e.getActiveUniformBlockParameter(t,n,i),i=[],r=e.getProgramParameter(t,35382);for(let o=0;o<r;o++){const r={name:e.getActiveUniformBlockName(t,o)||"",location:n(o,35391),byteLength:n(o,35392),vertex:n(o,35396),fragment:n(o,35398),uniformCount:n(o,35394),uniforms:[]},s=n(o,35395)||[],a=e.getActiveUniforms(t,s,35383),l=e.getActiveUniforms(t,s,35384),c=e.getActiveUniforms(t,s,35387),u=e.getActiveUniforms(t,s,35388);for(let n=0;n<r.uniformCount;++n){const i=e.getActiveUniform(t,s[n]);if(!i)throw new Error("activeInfo");r.uniforms.push({name:i.name,format:gg(a[n]).format,type:a[n],arrayLength:l[n],byteOffset:c[n],byteStride:u[n]})}i.push(r)}return i.sort(((e,t)=>e.location-t.location)),i}(e,t);for(const l of i){const e=l.uniforms.map((e=>({name:e.name,format:e.format,byteOffset:e.byteOffset,byteStride:e.byteStride,arrayLength:e.arrayLength})));n.bindings.push({type:"uniform",name:l.name,location:l.location,visibility:(l.vertex?1:0)&(l.fragment?2:0),minBindingSize:l.byteLength,uniforms:e})}const r=function(e,t){const n=[],i=e.getProgramParameter(t,35718);for(let r=0;r<i;r++){const i=e.getActiveUniform(t,r);if(!i)throw new Error("activeInfo");const{name:o,size:s,type:a}=i,{name:l,isArray:c}=bg(o);let u=e.getUniformLocation(t,l);const d={location:u,name:l,size:s,type:a,isArray:c};if(n.push(d),d.size>1)for(let r=0;r<d.size;r++){const i="".concat(l,"[").concat(r,"]");u=e.getUniformLocation(t,i);const o={...d,name:i,location:u};n.push(o)}}return n}(e,t);let o=0;for(const l of r)if(s=l.type,fg.includes(s)){const{viewDimension:e,sampleType:t}=yg(l.type);n.bindings.push({type:"texture",name:l.name,location:o,viewDimension:e,sampleType:t}),l.textureUnit=o,o+=1}var s;r.length&&(n.uniforms=r);const a=function(e,t){const n=[],i=e.getProgramParameter(t,35971);for(let r=0;r<i;r++){const i=e.getTransformFeedbackVarying(t,r);if(!i)throw new Error("activeInfo");const{name:o,type:s,size:a}=i,{glType:l,components:c}=gg(s),u={location:r,name:o,accessor:new hg({type:l,size:a*c})};n.push(u)}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);return null!==a&&void 0!==a&&a.length&&(n.varyings=a),n}const vg={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function yg(e){const t=vg[e];if(!t)throw new Error("sampler");const[n,i]=t;return{viewDimension:n,sampleType:i}}function bg(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/.exec(e);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]?1:0,isArray:Boolean(t[2])}}function wg(e,t,n,i){const r=e;let o=i;!0===o&&(o=1),!1===o&&(o=0);const s="number"===typeof o?[o]:o;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!==typeof i)throw new Error("samplers must be set to integers");return e.uniform1i(t,i);case 5126:return e.uniform1fv(t,s);case 35664:return e.uniform2fv(t,s);case 35665:return e.uniform3fv(t,s);case 35666:return e.uniform4fv(t,s);case 5124:case 35670:return e.uniform1iv(t,s);case 35667:case 35671:return e.uniform2iv(t,s);case 35668:case 35672:return e.uniform3iv(t,s);case 35669:case 35673:return e.uniform4iv(t,s);case 5125:return r.uniform1uiv(t,s,1);case 36294:return r.uniform2uiv(t,s,2);case 36295:return r.uniform3uiv(t,s,3);case 36296:return r.uniform4uiv(t,s,4);case 35674:return e.uniformMatrix2fv(t,!1,s);case 35675:return e.uniformMatrix3fv(t,!1,s);case 35676:return e.uniformMatrix4fv(t,!1,s);case 35685:return r.uniformMatrix2x3fv(t,!1,s);case 35686:return r.uniformMatrix2x4fv(t,!1,s);case 35687:return r.uniformMatrix3x2fv(t,!1,s);case 35688:return r.uniformMatrix3x4fv(t,!1,s);case 35689:return r.uniformMatrix4x2fv(t,!1,s);case 35690:return r.uniformMatrix4x3fv(t,!1,s)}throw new Error("Illegal uniform")}class Eg extends Ut{constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"handle",void 0),H(this,"vs",void 0),H(this,"fs",void 0),H(this,"introspectedLayout",void 0),H(this,"uniforms",{}),H(this,"bindings",{}),H(this,"varyings",null),H(this,"_uniformCount",0),H(this,"_uniformSetters",{}),this.device=e,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=t.vs,this.fs=t.fs;const{varyings:n,bufferMode:i=35981}=t;switch(n&&n.length>0&&(this.varyings=n,this.device.gl.transformFeedbackVaryings(this.handle,n,i)),this._linkShaders(),Ft.time(1,"RenderPipeline ".concat(this.id," - shaderLayout introspection"))(),this.introspectedLayout=_g(this.device.gl,this.handle),Ft.timeEnd(1,"RenderPipeline ".concat(this.id," - shaderLayout introspection"))(),this.shaderLayout=function(e,t){const n={...e,attributes:e.attributes.map((e=>({...e})))};for(const i of(null===t||void 0===t?void 0:t.attributes)||[]){const e=n.attributes.find((e=>e.name===i.name));e?(e.type=i.type||e.type,e.stepMode=i.stepMode||e.stepMode):Ft.warn("shader layout attribute ".concat(i.name," not present in shader"))}return n}(this.introspectedLayout,t.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":Ft.warn("Primitive topology ".concat(this.props.topology," is deprecated and will be removed in v9.1"))}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(e,t){for(const[n,i]of Object.entries(e)){const e=this.shaderLayout.bindings.find((e=>e.name===n))||this.shaderLayout.bindings.find((e=>e.name==="".concat(n,"Uniforms")));if(e){switch(i||Ft.warn('Unsetting binding "'.concat(n,'" in render pipeline "').concat(this.id,'"'))(),e.type){case"uniform":if(!(i instanceof zp)&&!(i.buffer instanceof zp))throw new Error("buffer value");break;case"texture":if(!(i instanceof jp||i instanceof Wp||i instanceof Hp))throw new Error("texture value");break;case"sampler":Ft.warn("Ignoring sampler ".concat(n))();break;default:throw new Error(e.type)}this.bindings[n]=i}else{const e=this.shaderLayout.bindings.map((e=>'"'.concat(e.name,'"'))).join(", ");null!==t&&void 0!==t&&t.disableWarnings||Ft.warn('Unknown binding "'.concat(n,'" in render pipeline "').concat(this.id,'", expected one of ').concat(e))()}}}draw(e){var t;const{renderPass:n,parameters:i=this.props.parameters,topology:r=this.props.topology,vertexArray:o,vertexCount:s,instanceCount:a,isInstanced:l=!1,firstVertex:c=0,transformFeedback:u}=e,d=function(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(e)}}(r),h=Boolean(o.indexBuffer),f=null===(t=o.indexBuffer)||void 0===t?void 0:t.glIndexType;if("success"!==this.linkStatus)return Ft.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - waiting for shader linking"))(),!1;if(!this._areTexturesRenderable()||0===s)return Ft.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - textures not yet loaded"))(),!1;if(0===s)return Ft.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - no vertices to draw"))(),!0;this.device.gl.useProgram(this.handle),o.bindBeforeRender(n),u&&u.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const p=n;return function(e,t,n,i){if(Y(t))return i(e);const r=e;zf(r.gl);try{return Mp(e,t),Of(r.gl,n),i(e)}finally{Gf(r.gl)}}(this.device,i,p.glParameters,(()=>{h&&l?this.device.gl.drawElementsInstanced(d,s||0,f,c,a||0):h?this.device.gl.drawElements(d,s||0,f,c):l?this.device.gl.drawArraysInstanced(d,c,s||0,a||0):this.device.gl.drawArrays(d,c,s||0),u&&u.end()})),o.unbindAfterRender(n),!0}setUniformsWebGL(e){const{bindings:t}=Gt(e);Object.keys(t).forEach((e=>{Ft.warn('Unsupported value "'.concat(JSON.stringify(t[e]),'" used in setUniforms() for key ').concat(e,". Use setBindings() instead?"))()})),Object.assign(this.uniforms,e)}async _linkShaders(){const{gl:e}=this.device;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ft.time(4,"linkProgram for ".concat(this.id))(),e.linkProgram(this.handle),Ft.timeEnd(4,"linkProgram for ".concat(this.id))(),Ft.level,!this.device.features.has("compilation-status-async-webgl")){const e=this._getLinkStatus();return void this._reportLinkStatus(e)}Ft.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),Ft.info(2,"RenderPipeline ".concat(this.id," - async linking complete: ").concat(this.linkStatus))();const t=this._getLinkStatus();this._reportLinkStatus(t)}_reportLinkStatus(e){var t;if("success"!==e){if("error"===this.vs.compilationStatus)throw this.vs.debugShader(),new Error("Error during compilation of shader ".concat(this.vs.id));if("error"===(null===(t=this.fs)||void 0===t?void 0:t.compilationStatus))throw this.fs.debugShader(),new Error("Error during compilation of shader ".concat(this.fs.id));throw new Error("Error during ".concat(e,": ").concat(this.device.gl.getProgramInfoLog(this.handle)))}}_getLinkStatus(){const{gl:e}=this.device;if(!e.getProgramParameter(this.handle,35714))return this.linkStatus="error","linking";e.validateProgram(this.handle);return e.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")}async _waitForLinkComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getProgramParameter(this.handle,37297))return;await e(10)}}_areTexturesRenderable(){let e=!0;for(const[,t]of Object.entries(this.bindings))t instanceof Wp&&(t.update(),e=e&&t.loaded);return e}_applyBindings(){if("success"!==this.linkStatus)return;const{gl:e}=this.device;e.useProgram(this.handle);let t=0,n=0;for(const i of this.shaderLayout.bindings){const r=this.bindings[i.name]||this.bindings[i.name.replace(/Uniforms$/,"")];if(!r)throw new Error("No value for binding ".concat(i.name," in ").concat(this.id));switch(i.type){case"uniform":const{name:o}=i,s=e.getUniformBlockIndex(this.handle,o);if(4294967295===s)throw new Error("Invalid uniform block name ".concat(o));e.uniformBlockBinding(this.handle,n,s),r instanceof zp?e.bindBufferBase(35345,n,r.handle):e.bindBufferRange(35345,n,r.buffer.handle,r.offset||0,r.size||r.buffer.byteLength-r.offset),n+=1;break;case"texture":if(!(r instanceof jp||r instanceof Wp||r instanceof Hp))throw new Error("texture");let a;if(r instanceof jp)a=r.texture;else if(r instanceof Wp)a=r;else{if(!(r instanceof Hp&&r.colorAttachments[0]instanceof jp))throw new Error("No texture");Ft.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),a=r.colorAttachments[0].texture}e.activeTexture(33984+t),e.bindTexture(a.target,a.handle),t+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error("binding type '".concat(i.type,"' not supported in WebGL"))}}}_applyUniforms(){for(const t of this.shaderLayout.uniforms||[]){var e;const{name:n,location:i,type:r,textureUnit:o}=t,s=null!==(e=this.uniforms[n])&&void 0!==e?e:o;void 0!==s&&wg(this.device.gl,i,r,s)}}}class Sg extends q{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,t){super(e,t,Sg.defaultProps)}}H(Sg,"defaultProps",{...q.defaultProps,measureExecutionTime:void 0});class Tg extends q{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,t){super(e,t,Tg.defaultProps)}}H(Tg,"defaultProps",{...q.defaultProps});class xg extends Tg{constructor(e){super(e,{}),H(this,"device",void 0),H(this,"commands",[]),this.device=e}submitCommands(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.commands;for(const t of e)switch(t.name){case"copy-buffer-to-buffer":Ag(this.device,t.options);break;case"copy-buffer-to-texture":Rg(this.device,t.options);break;case"copy-texture-to-buffer":Cg(this.device,t.options);break;case"copy-texture-to-texture":Pg(this.device,t.options)}}}function Ag(e,t){var n,i;const r=t.source,o=t.destination;e.gl.bindBuffer(36662,r.handle),e.gl.bindBuffer(36663,o.handle),e.gl.copyBufferSubData(36662,36663,null!==(n=t.sourceOffset)&&void 0!==n?n:0,null!==(i=t.destinationOffset)&&void 0!==i?i:0,t.size),e.gl.bindBuffer(36662,null),e.gl.bindBuffer(36663,null)}function Rg(e,t){throw new Error("Not implemented")}function Cg(e,t){const{source:n,mipLevel:i=0,aspect:r="all",width:o=t.source.width,height:s=t.source.height,depthOrArrayLayers:a=0,origin:l=[0,0],destination:c,byteOffset:u=0,bytesPerRow:d,rowsPerImage:h}=t;if("all"!==r)throw new Error("not supported");if(0!==i||0!==a||d||h)throw new Error("not implemented");const{framebuffer:f,destroyFramebuffer:p}=Lg(n);let g;try{const t=c,n=o||f.width,i=s||f.height,r=bp(f.texture.props.format),a=r.dataFormat,d=r.type;e.gl.bindBuffer(35051,t.handle),g=e.gl.bindFramebuffer(36160,f.handle),e.gl.readPixels(l[0],l[1],n,i,a,d,u)}finally{e.gl.bindBuffer(35051,null),void 0!==g&&e.gl.bindFramebuffer(36160,g),p&&f.destroy()}}function Pg(e,t){const{source:n,destinationMipLevel:i=0,origin:r=[0,0],destinationOrigin:o=[0,0],destination:s}=t;let{width:a=t.destination.width,height:l=t.destination.height}=t;const{framebuffer:c,destroyFramebuffer:u}=Lg(n),[d,h]=r,[f,p,g]=o,m=e.gl.bindFramebuffer(36160,c.handle);let _,v=null;if(!(s instanceof Wp))throw new Error("invalid destination");switch(v=s,a=Number.isFinite(a)?a:v.width,l=Number.isFinite(l)?l:v.height,v.bind(0),_=v.target,_){case 3553:case 34067:e.gl.copyTexSubImage2D(_,i,f,p,d,h,a,l);break;case 35866:case 32879:e.gl.copyTexSubImage3D(_,i,f,p,g,d,h,a,l)}v&&v.unbind(),e.gl.bindFramebuffer(36160,m),u&&c.destroy()}function Lg(e){if(e instanceof Rt){const{width:t,height:n,id:i}=e;return{framebuffer:e.device.createFramebuffer({id:"framebuffer-for-".concat(i),width:t,height:n,colorAttachments:[e]}),destroyFramebuffer:!0}}return{framebuffer:e,destroyFramebuffer:!1}}class Mg extends Sg{constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"commandBuffer",void 0),this.device=e,this.commandBuffer=new xg(e)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(e){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:e})}copyBufferToTexture(e){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:e})}copyTextureToBuffer(e){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:e})}copyTextureToTexture(e){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:e})}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}resolveQuerySet(e,t,n){}}class kg extends q{get[Symbol.toStringTag](){return"VertexArray"}constructor(e,t){super(e,t,kg.defaultProps),H(this,"maxVertexAttributes",void 0),H(this,"attributeInfos",void 0),H(this,"indexBuffer",null),H(this,"attributes",void 0),this.maxVertexAttributes=e.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const i=Yt(e,t),r=new Array(n).fill(null);for(const o of Object.values(i))r[o.location]=o;return r}(t.renderPipeline.shaderLayout,t.renderPipeline.bufferLayout,this.maxVertexAttributes)}setConstantWebGL(e,t){throw new Error("constant attributes not supported")}}H(kg,"defaultProps",{...q.defaultProps,renderPipeline:null});class Ig extends kg{get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(e){return"Chrome"===(t||$()?Q(t)?"Electron":(t||ae.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node");var t}constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"handle",void 0),H(this,"buffer",null),H(this,"bufferValue",null),this.device=e,this.handle=this.device.gl.createVertexArray()}destroy(){var e;(super.destroy(),this.buffer)&&(null===(e=this.buffer)||void 0===e||e.destroy());this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(e){const t=e;if(t&&34963!==t.glTarget)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,t?t.handle:null),this.indexBuffer=t,this.device.gl.bindVertexArray(null)}setBuffer(e,t){const n=t;if(34963===n.glTarget)throw new Error("Use .setIndexBuffer()");const{size:i,type:r,stride:o,offset:s,normalized:a,integer:l,divisor:c}=this._getAccessor(e);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,n.handle),l?this.device.gl.vertexAttribIPointer(e,i,r,o,s):this.device.gl.vertexAttribPointer(e,i,r,a,o,s),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(e),this.device.gl.vertexAttribDivisor(e,c||0),this.attributes[e]=n,this.device.gl.bindVertexArray(null)}setConstantWebGL(e,t){this._enable(e,!1),this.attributes[e]=t}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let e=0;e<this.maxVertexAttributes;++e){const t=this.attributes[e];ArrayBuffer.isView(t)&&this.device.setConstantAttributeWebGL(e,t)}}_getAccessor(e){const t=this.attributeInfos[e];if(!t)throw new Error("Unknown attribute location ".concat(e));const n=Yf(t.bufferDataType);return{size:t.bufferComponents,type:n,stride:t.byteStride,offset:t.byteOffset,normalized:t.normalized,integer:t.integer,divisor:"instance"===t.stepMode?1:0}}_enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Ig.isConstantAttributeZeroSupported(this.device);(t||(n||0!==e))&&(e=Number(e),this.device.gl.bindVertexArray(this.handle),t?this.device.gl.enableVertexAttribArray(e):this.device.gl.disableVertexAttribArray(e),this.device.gl.bindVertexArray(null))}getConstantBuffer(e,t){const n=function(e){if(Array.isArray(e))return new Float32Array(e);return e}(t),i=n.byteLength*e,r=n.length*e;if(this.buffer&&i!==this.buffer.byteLength)throw new Error("Buffer size is immutable, byte length ".concat(i," !== ").concat(this.buffer.byteLength,"."));let o=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:i}),o=o||!function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(n,this.bufferValue),o){const e=function(e,t){return new e(Nt(e.BYTES_PER_ELEMENT*t),0,t)}(t.constructor,r);!function(e){const{target:t,source:n,start:i=0,count:r=1}=e,o=n.length,s=r*o;let a=0;for(let l=i;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(i+a,i,i+a),a*=2):(t.copyWithin(i+a,i,i+s-a),a=s);e.target}({target:e,source:n,start:0,count:r}),this.buffer.write(e),this.bufferValue=t}return this.buffer}}class Og extends q{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,t){super(e,t,Og.defaultProps)}}H(Og,"defaultProps",{...q.defaultProps,layout:void 0,buffers:{}});class Ng extends Og{constructor(e,t){super(e,t),H(this,"device",void 0),H(this,"gl",void 0),H(this,"handle",void 0),H(this,"layout",void 0),H(this,"buffers",{}),H(this,"unusedBuffers",{}),H(this,"bindOnUse",!0),H(this,"_bound",!1),this.device=e,this.gl=e.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,t.buffers&&this.setBuffers(t.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"point-list";this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(e){switch(e){case"point-list":return 0;case"line-list":case"line-strip":case"line-loop-webgl":return 1;case"triangle-list":case"triangle-strip":case"triangle-fan-webgl":return 4;default:throw new Error(e)}}(e))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(e){this.buffers={},this.unusedBuffers={},this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])}))}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:i,byteLength:r,byteOffset:o}=this._getBufferRange(t);if(n<0)return this.unusedBuffers[e]=i,void Ft.warn("".concat(this.id," unusedBuffers varying buffer ").concat(e))();this.buffers[n]={buffer:i,byteLength:r,byteOffset:o},this.bindOnUse||this._bindBuffer(n,i,o,r)}getBuffer(e){if(Fg(e))return this.buffers[e]||null;const t=this._getVaryingIndex(e);return t>=0?this.buffers[t]:null}bind(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this.gl.bindTransformFeedback(36386,t),this):(this._bound?e=t():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,e=t(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),e)}unbind(){this.bind(null)}_getBufferRange(e){if(e instanceof zp)return{buffer:e,byteOffset:0,byteLength:e.byteLength};const{buffer:t,byteOffset:n=0,byteLength:i=e.buffer.byteLength}=e;return{buffer:t,byteOffset:n,byteLength:i}}_getVaryingIndex(e){if(Fg(e))return Number(e);for(const t of this.layout.varyings)if(e===t.name)return t.location;return-1}_bindBuffers(){for(const e in this.buffers){const{buffer:t,byteLength:n,byteOffset:i}=this._getBufferRange(this.buffers[e]);this._bindBuffer(Number(e),t,i,n)}}_unbindBuffers(){for(const e in this.buffers)this.gl.bindBufferBase(35982,Number(e),null)}_bindBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const r=t&&t.handle;r&&void 0!==i?this.gl.bindBufferRange(35982,e,r,n,i):this.gl.bindBufferBase(35982,e,r)}}function Fg(e){return"number"===typeof e?Number.isInteger(e):/^\d+$/.test(e)}class Dg extends q{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,t){super(e,t,Dg.defaultProps)}}H(Dg,"defaultProps",{...q.defaultProps,type:void 0,count:void 0});class Bg extends Dg{get[Symbol.toStringTag](){return"Query"}constructor(e,t){if(super(e,t),H(this,"device",void 0),H(this,"handle",void 0),H(this,"target",null),H(this,"_queryPending",!1),H(this,"_pollingPromise",null),this.device=e,t.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(e){return this._begin(null!==e&&void 0!==e&&e.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(e){this._queryPending||(this.target=e,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.device.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,i)=>{const r=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}}function Ug(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return St(!1),0}}function zg(e,t){var n;const{sourceX:i=0,sourceY:r=0,sourceFormat:o=6408,sourceAttachment:s=36064}=t||{};let{target:a=null,sourceWidth:l,sourceHeight:c,sourceType:u}=t||{};const{framebuffer:d,deleteFramebuffer:h}=jg(e);St(d);const{gl:f,handle:p}=d;l=l||d.width,c=c||d.height;const g=s-36064;u=u||(null===(n=d.colorAttachments[g])||void 0===n||null===(n=n.texture)||void 0===n?void 0:n.type)||5121,a=function(e,t,n,i,r){if(e)return e;const o=cg(t=t||5121,{clamped:!1}),s=Ug(n);return new o(i*r*s)}(a,u,o,l,c),u=u||function(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(lg)}}(a);const m=f.bindFramebuffer(36160,p);return f.readPixels(i,r,l,c,o,u,a),f.bindFramebuffer(36160,m||null),h&&d.destroy(),a}function Gg(e,t){const{target:n,sourceX:i=0,sourceY:r=0,sourceFormat:o=6408,targetByteOffset:s=0}=t||{};let{sourceWidth:a,sourceHeight:l,sourceType:c}=t||{};const{framebuffer:u,deleteFramebuffer:d}=jg(e);St(u),a=a||u.width,l=l||u.height;const h=u;c=c||5121;let f=n;if(!f){const e=s+a*l*Ug(o)*function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return St(!1),0}}(c);f=h.device.createBuffer({byteLength:e})}const p=e.device.createCommandEncoder();return p.copyTextureToBuffer({source:e,width:a,height:l,origin:[i,r],destination:f,byteOffset:s}),p.destroy(),d&&u.destroy(),f}function jg(e){return e instanceof Ap?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Vg(e),deleteFramebuffer:!0}}function Vg(e,t){const{device:n,width:i,height:r,id:o}=e;return n.createFramebuffer({...t,id:"framebuffer-for-".concat(o),width:i,height:r,colorAttachments:[e]})}const Wg="clear: bad arguments";class Hg extends uf{static isSupported(){return"undefined"!==typeof WebGL2RenderingContext}static attach(e){if(e instanceof Hg)return e;if((null===e||void 0===e?void 0:e.device)instanceof uf)return e.device;if(!function(e){if("undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)return!0;return Boolean(e&&Number.isFinite(e._version))}(e))throw new Error("Invalid WebGL2RenderingContext");return new Hg({gl:e})}static async create(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ft.groupCollapsed(1,"WebGLDevice created")();const n=[];t.debug&&n.push(async function(){$()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await Pp("https://unpkg.com/webgl-debug@2.0.1/index.js"))}()),t.spector&&n.push(async function(e){if(!globalThis.SPECTOR)try{await Pp("https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js")}catch(t){Ft.warn(String(t))}}()),"string"===typeof t.canvas&&n.push(_f.pageLoaded);const i=await Promise.allSettled(n);for(const s of i)"rejected"===s.status&&Ft.error("Failed to initialize debug libraries ".concat(s.reason))();if(Ft.probe(2,"DOM is loaded")(),null!==(e=t.gl)&&void 0!==e&&e.device)return Ft.warn("reattaching existing device")(),Hg.attach(t.gl);const r=new Hg(t),o="Created ".concat(r.type).concat(r.debug?" debug":""," context: ").concat(r.info.vendor,", ").concat(r.info.renderer," for canvas: ").concat(r.canvasContext.id);return Ft.probe(1,o)(),Ft.table(1,r.info)(),Ft.groupEnd(1)(),r}constructor(e){var t,n;super({...e,id:e.id||K("webgl-device")}),H(this,"type","webgl"),H(this,"handle",void 0),H(this,"features",void 0),H(this,"limits",void 0),H(this,"info",void 0),H(this,"canvasContext",void 0),H(this,"lost",void 0),H(this,"_resolveContextLost",void 0),H(this,"renderPass",null),H(this,"gl",void 0),H(this,"debug",!1),H(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1}),H(this,"_extensions",{}),H(this,"_polyfilled",!1),H(this,"spectorJS",void 0),H(this,"_constants",void 0);const i=null===(t=e.gl)||void 0===t?void 0:t.device;if(i)throw new Error("WebGL context already attached to device ".concat(i.id));const r=(null===(n=e.gl)||void 0===n?void 0:n.canvas)||e.canvas;this.canvasContext=new Xp(this,{...e,canvas:r}),this.lost=new Promise((e=>{this._resolveContextLost=e}));let o=e.gl||null;if(o||(o=function(e,t){t={...Wf,...t};let n=null;const i=e=>n=e.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);let r=null;if(r||(r=e.getContext("webgl2",t)),e.removeEventListener("webglcontextcreationerror",i,!1),!r)throw new Error("Failed to create WebGL context: ".concat(n||"Unknown error"));if(t.onContextLost){const{onContextLost:n}=t;e.addEventListener("webglcontextlost",(e=>n(e)),!1)}if(t.onContextRestored){const{onContextRestored:n}=t;e.addEventListener("webglcontextrestored",(e=>n(e)),!1)}return r}(this.canvasContext.canvas,{...e,onContextLost:e=>{var t;return null===(t=this._resolveContextLost)||void 0===t?void 0:t.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!o)throw new Error("WebGL context creation failed");this.handle=o,this.gl=o,this.gl.device=this,this.gl._version=2,e.spector&&(this.spectorJS=function(e){var t,n,i,r;if(null===(t=e={...Kp,...e})||void 0===t||!t.spector)return null;if(!Yp&&globalThis.SPECTOR&&(Ft.probe(1,"SPECTOR found and initialized")(),Yp=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=Yp)),!Yp)return null;if(qp||(qp=!0,Yp.spyCanvases(),null===(i=Yp)||void 0===i||i.onCaptureStarted.add((e=>Ft.info("Spector capture started:",e)())),null===(r=Yp)||void 0===r||r.onCapture.add((e=>{var t,n,i;Ft.info("Spector capture complete:",e)(),null===(t=Yp)||void 0===t||t.getResultUI(),null===(n=Yp)||void 0===n||n.resultView.display(),null===(i=Yp)||void 0===i||i.resultView.addCapture(e)}))),null!==(n=e)&&void 0!==n&&n.canvas){var o,s;if("string"===typeof e.spector&&e.spector!==e.canvas.id)return Yp;null===(o=Yp)||void 0===o||o.startCapture(null===(s=e)||void 0===s?void 0:s.canvas,500),new Promise((e=>setTimeout(e,2e3))).then((e=>{var t;Ft.info("Spector capture stopped after 2 seconds")(),null===(t=Yp)||void 0===t||t.stopCapture()}))}return Yp}({...this.props,canvas:this.handle.canvas})),this.info=Xf(this.gl,this._extensions),this.limits=new xp(this.gl),this.features=new Tp(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:s=!0,copyState:a=!1}=e;Uf(this.gl,{enable:s,copyState:a,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ft.log(1,...t)()}}),e.debug&&(this.gl=$p(this.gl,{...e,throwOnError:!0}),this.debug=!0,Ft.level=Math.max(Ft.level,1),Ft.warn("WebGL debug mode activated. Performance reduced.")())}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(e){return vp(this.gl,e,this._extensions)}isTextureFormatFilterable(e){return function(e,t,n){if(!vp(e,t,n))return!1;if(t.startsWith("depth")||t.startsWith("stencil"))return!1;try{if(sf(t).signed)return!1}catch{return!1}return t.endsWith("32float")?Boolean(Hf(e,"OES_texture_float_linear, extensions",n)):!t.endsWith("16float")||Boolean(Hf(e,"OES_texture_half_float_linear, extensions",n))}(this.gl,e,this._extensions)}isTextureFormatRenderable(e){return function(e,t,n){return!!vp(e,t,n)&&"number"!==typeof t}(this.gl,e,this._extensions)}createCanvasContext(e){throw new Error("WebGL only supports a single canvas")}createBuffer(e){const t=this._getBufferProps(e);return new zp(this,t)}_createTexture(e){return new Wp(this,e)}createExternalTexture(e){throw new Error("createExternalTexture() not implemented")}createSampler(e){return new Gp(this,e)}createShader(e){return new ig(this,e)}createFramebuffer(e){return new Hp(this,e)}createVertexArray(e){return new Ig(this,e)}createTransformFeedback(e){return new Ng(this,e)}createQuerySet(e){return new Bg(this,e)}createRenderPipeline(e){return new Eg(this,e)}beginRenderPass(e){return new ag(this,e)}createComputePipeline(e){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(e){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(e){return new Mg(this,e)}submit(){var e;null===(e=this.renderPass)||void 0===e||e.end(),this.renderPass=null}readPixelsToArrayWebGL(e,t){return zg(e,t)}readPixelsToBufferWebGL(e,t){return Gg(e,t)}setParametersWebGL(e){Of(this.gl,e)}getParametersWebGL(e){return Nf(this.gl,e)}withParametersWebGL(e,t){return Lp(this.gl,e,t)}clearWebGL(e){!function(e,t){const{framebuffer:n=null,color:i=null,depth:r=null,stencil:o=null}=t||{},s={};n&&(s.framebuffer=n);let a=0;i&&(a|=16384,!0!==i&&(s.clearColor=i)),r&&(a|=256,!0!==r&&(s.clearDepth=r)),o&&(a|=1024,!0!==r&&(s.clearStencil=r)),St(0!==a,Wg);const l=e.gl;Lp(l,s,(()=>{l.clear(a)}))}(this,e)}resetWebGL(){Ft.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),Of(this.gl,bf)}loseDevice(){var e;let t=!1;const n=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return n&&(t=!0,n.loseContext()),null===(e=this._resolveContextLost)||void 0===e||e.call(this,{reason:"destroyed",message:"Application triggered context loss"}),t}pushState(){zf(this.gl)}popState(){Gf(this.gl)}setSpectorMetadata(e,t){e.__SPECTOR_Metadata=t}getGLKey(e,t){t=t||this.gl2||this.gl;const n=Number(e);for(const i in t)if(t[i]===n)return"GL.".concat(i);return String(e)}setConstantAttributeWebGL(e,t){const n=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(n).fill(null);const i=this._constants[e];switch(i&&function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(i,t)&&Ft.info(1,"setConstantAttributeWebGL(".concat(e,") could have been skipped, value unchanged"))(),this._constants[e]=t,t.constructor){case Float32Array:!function(e,t,n){switch(n.length){case 1:e.gl.vertexAttrib1fv(t,n);break;case 2:e.gl.vertexAttrib2fv(t,n);break;case 3:e.gl.vertexAttrib3fv(t,n);break;case 4:e.gl.vertexAttrib4fv(t,n);break;default:St(!1)}}(this,e,t);break;case Int32Array:!function(e,t,n){e.gl.vertexAttribI4iv(t,n)}(this,e,t);break;case Uint32Array:!function(e,t,n){e.gl.vertexAttribI4uiv(t,n)}(this,e,t);break;default:St(!1)}}getExtension(e){return Hf(this.gl,e,this._extensions),this._extensions}}H(Hg,"type","webgl");let Xg=0;const Kg={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:hf.stats.get("animation-loop-".concat(Xg++)),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class Yg{constructor(e){if(H(this,"device",null),H(this,"canvas",null),H(this,"props",void 0),H(this,"animationProps",null),H(this,"timeline",null),H(this,"stats",void 0),H(this,"cpuTime",void 0),H(this,"gpuTime",void 0),H(this,"frameRate",void 0),H(this,"display",void 0),H(this,"needsRedraw","initialized"),H(this,"_initialized",!1),H(this,"_running",!1),H(this,"_animationFrameId",null),H(this,"_nextFramePromise",null),H(this,"_resolveNextFrame",null),H(this,"_cpuStartTime",0),this.props={...Kg,...e},!(e=this.props).device)throw new Error("No device provided");const{useDevicePixels:t=!0}=this.props;this.stats=e.stats||new ud({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:t}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(!1!==e&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const t=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(t),t}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return null!==(e=this.device)&&void 0!==e&&e.isLost||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){var e;this._running&&(this._animationFrameId=(e=this._animationFrame.bind(this),"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)))}_cancelAnimationFrame(){var e;null!==this._animationFrameId&&(e=this._animationFrameId,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){this.display?this.display._renderFrame(e):(this.props.onRender(this._getAnimationProps()),this.device.submit())}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var e;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:null===(e=this.device)||void 0===e||null===(e=e.canvasContext)||void 0===e?void 0:e.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=(null===(e=this.device.canvasContext)||void 0===e?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){var e,t;if(!this.device)return{width:1,height:1,aspect:1};const[n,i]=(null===(e=this.device)||void 0===e||null===(e=e.canvasContext)||void 0===e?void 0:e.getPixelSize())||[1,1];let r=1;const o=null===(t=this.device)||void 0===t||null===(t=t.canvasContext)||void 0===t?void 0:t.canvas;return o&&o.clientHeight?r=o.clientWidth/o.clientHeight:n>0&&i>0&&(r=n/i),{width:n,height:i,aspect:r}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e;this.props.autoResizeDrawingBuffer&&(null===(e=this.device)||void 0===e||null===(e=e.canvasContext)||void 0===e||e.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}var qg=n(895);const Zg={mousedown:1,mousemove:2,mouseup:4};!function(e){const t=e.prototype.handler;e.prototype.handler=function(e){const n=this.store;e.button>0&&"pointerdown"===e.type&&(function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(n,(t=>t.pointerId===e.pointerId))||n.push(e)),t.call(this,e)}}(qg.PointerEventInput),qg.MouseInput.prototype.handler=function(e){let t=Zg[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.buttons&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};const Qg=qg.Manager,$g=qg;class Jg{constructor(e,t,n){this.element=e,this.callback=t,this.options={enable:!0,...n}}}const em=$g?[[$g.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[$g.Rotate,{enable:!1}],[$g.Pinch,{enable:!1}],[$g.Swipe,{enable:!1}],[$g.Pan,{threshold:0,enable:!1}],[$g.Press,{enable:!1}],[$g.Tap,{event:"doubletap",taps:2,enable:!1}],[$g.Tap,{event:"anytap",enable:!1}],[$g.Tap,{enable:!1}]]:null,tm={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},nm={doubletap:["tap"]},im={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},rm={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},om={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},sm={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},am="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",lm="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let cm=!1;try{const e={get passive(){return cm=!0,!0}};lm.addEventListener("test",null,e),lm.removeEventListener("test",null)}catch(n_){cm=!1}const um=-1!==am.indexOf("firefox"),{WHEEL_EVENTS:dm}=rm,hm="wheel",fm=4.000244140625;class pm extends Jg{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;lm.WheelEvent&&(um&&e.deltaMode===lm.WheelEvent.DOM_DELTA_PIXEL&&(t/=lm.devicePixelRatio),e.deltaMode===lm.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%fm===0&&(t=Math.floor(t/fm)),e.shiftKey&&t&&(t*=.25),this.callback({type:hm,center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})},this.events=(this.options.events||[]).concat(dm),this.events.forEach((t=>e.addEventListener(t,this.handleEvent,!!cm&&{passive:!1})))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===hm&&(this.options.enable=t)}}const{MOUSE_EVENTS:gm}=rm,mm="pointermove",_m="pointerover",vm="pointerout",ym="pointerenter",bm="pointerleave";class wm extends Jg{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(gm),this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===mm&&(this.enableMoveEvent=t),e===_m&&(this.enableOverEvent=t),e===vm&&(this.enableOutEvent=t),e===ym&&(this.enableEnterEvent=t),e===bm&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(_m,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(vm,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(ym,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(bm,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit(mm,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:Em}=rm,Sm="keydown",Tm="keyup";class xm extends Jg{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:Sm,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:Tm,srcEvent:e,key:e.key,target:e.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Em),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Sm&&(this.enableDownEvent=t),e===Tm&&(this.enableUpEvent=t)}}const Am="contextmenu";class Rm extends Jg{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.options.enable&&this.callback({type:Am,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===Am&&(this.options.enable=t)}}const Cm={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Pm(e){const t=Cm[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i}=e.srcEvent;let r=!1,o=!1,s=!1;return 2===t?(r=Boolean(1&n),o=Boolean(4&n),s=Boolean(2&n)):(r=0===i,o=1===i,s=2===i),{leftButton:r,middleButton:o,rightButton:s}}function Lm(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),r=i.width/t.offsetWidth||1,o=i.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/r,y:(n.y-i.top-t.clientTop)/o}}}const Mm={srcElement:"root",priority:0};class km{constructor(e){this.handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=Mm;"string"===typeof n||n&&n.addEventListener?a={...Mm,srcElement:n}:n&&(a={...Mm,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:e,handler:t,srcElement:a.srcElement,priority:a.priority};i&&(c.once=!0),r&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:i}=this;for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.type===e&&o.handler===t){n.splice(r,1);const e=i.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&i.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const i=()=>{e.handled=!0},r=()=>{e.handled=!0,t=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...e,type:a,stopPropagation:i,stopImmediatePropagation:r}),c&&o.push(n[s]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...Pm(e),...Lm(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const Im={events:null,recognizers:null,recognizerOptions:{},Manager:Qg,touchAction:"none",tabIndex:0};class Om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;this._onBasicInput=e=>{const{srcEvent:t}=e,n=im[t.type];n&&this.manager.emit(n,e)},this._onOtherEvent=e=>{this.manager.emit(e.type,e)},this.options={...Im,...t},this.events=new Map,this.setElement(e);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,n=t.Manager;this.manager=new n(e,{touchAction:t.touchAction,recognizers:t.recognizers||em}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(tm).forEach((e=>{const t=this.manager.get(e);t&&tm[e].forEach((e=>{t.recognizeWith(e)}))}));for(const i in t.recognizerOptions){const e=this.manager.get(i);if(e){const n=t.recognizerOptions[i];delete n.enable,e.set(n)}}this.wheelInput=new pm(e,this._onOtherEvent,{enable:!1}),this.moveInput=new wm(e,this._onOtherEvent,{enable:!1}),this.keyInput=new xm(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Rm(e,this._onOtherEvent,{enable:!1});for(const[i,r]of this.events)r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(i,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const i=n.get(e);if(i&&i.options.enable!==t){i.set({enable:t});const r=nm[e];r&&!this.options.recognizers&&r.forEach((r=>{const o=n.get(r);t?(o.requireFailure(e),i.dropRequireFailure(r)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,n,i,r){if("string"!==typeof e){n=t;for(const t in e)this._addEventHandler(t,e[t],n,i,r);return}const{manager:o,events:s}=this,a=sm[e]||e;let l=s.get(a);l||(l=new km(this),s.set(a,l),l.recognizerName=om[a]||a,o&&o.on(a,l.handleEvent)),l.add(e,t,n,i,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!==typeof e){for(const t in e)this._removeEventHandler(t,e[t]);return}const{events:n}=this,i=sm[e]||e,r=n.get(i);if(r&&(r.remove(e,t),r.isEmpty())){const{recognizerName:e}=r;let t=!1;for(const i of n.values())if(i.recognizerName===e&&!i.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}}var Nm;function Fm(){}const Dm={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:Fm,onWebGLInitialized:Fm,onResize:Fm,onViewStateChange:Fm,onInteractionStateChange:Fm,onBeforeRender:Fm,onAfterRender:Fm,onLoad:Fm,onError:e=>ve.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:e=>{let{isDragging:t}=e;return t?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class Bm{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new ud({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=e=>{const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e},this._onEvent=e=>{const t=Ee[e.type],n=e.offsetCenter;if(!t||!n||!this.layerManager)return;const i=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=r,s=o&&(o[t.handler]||o.props[t.handler]),a=this.props[t.handler];let l=!1;s&&(l=s.call(o,r,e)),l||(null===a||void 0===a||a(r,e),this.widgetManager.onEvent(r,e))},this._onPointerDown=e=>{const t=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:t.x,y:t.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo},this.props={...Dm,...e},(e=this.props).viewState&&e.initialViewState&&ve.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device?this.device=e.device:e.gl&&(e.gl instanceof WebGLRenderingContext&&ve.error("WebGL1 context not supported.")(),this.device=Hg.attach(e.gl));let t=this.device;t||(hf.registerDevices([Hg]),t=hf.createDevice({...e.deviceProps,canvas:this._createCanvas(e)})),this.animationLoop=this._createAnimationLoop(t,e),this.setProps(e),e._typedArrayManagerProps&&Pe.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,n,i,r,o,s,a,l,c;(null===(e=this.animationLoop)||void 0===e||e.stop(),null===(t=this.animationLoop)||void 0===t||t.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(n=this.layerManager)||void 0===n||n.finalize(),this.layerManager=null,null===(i=this.viewManager)||void 0===i||i.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(o=this.deckRenderer)||void 0===o||o.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(l=this.widgetManager)||void 0===l||l.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas)||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){var t;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ve.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ve.removed("onLayerClick","onClick")(),e.initialViewState&&!As(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),null===(t=this.animationLoop)||void 0===t||t.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),r=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||i||r||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return rt(this.viewManager),this.viewManager.views}getViewports(e){return rt(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var t;null===(t=this.layerManager)||void 0===t||t.removeDefaultShaderModule(e)}_pick(e,t,n){rt(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(t).timeStart();const r=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(t).timeEnd(),r}_createCanvas(e){let t=e.canvas;if("string"===typeof t&&(t=document.getElementById(t),rt(t)),!t){t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay";(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:n}=e;if(t||0===t){const e=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=e}if(n||0===n){var i;const t=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(i=e.style)||void 0===i?void 0:i.position)||"absolute",this.canvas.style.height=t}}_updateCanvasSize(){var e,t;const{canvas:n}=this;if(!n)return;const i=null!==(e=n.clientWidth)&&void 0!==e?e:n.width,r=null!==(t=n.clientHeight)&&void 0!==t?t:n.height;var o,s;i===this.width&&r===this.height||(this.width=i,this.height=r,null===(o=this.viewManager)||void 0===o||o.setProps({width:i,height:r}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:r}))}_createAnimationLoop(e,t){const{gl:n,onError:i,useDevicePixels:r}=t;return new Yg({device:e,useDevicePixels:r,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:e=>this._setDevice(e.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,t=Array.isArray(e)?e:e?[e]:[new jd({id:"default-view"})];return t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:o}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=o,a=!1;for(const n of r){var t;s=n,a=(null===(t=n.layer)||void 0===t?void 0:t.onHover(n,e.event))||a}var n,i;if(!a)null===(n=(i=this.props).onHover)||void 0===n||n.call(i,s,e.event),this.widgetManager.onHover(s,e.event);e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var t,n;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=null===(n=this.device.canvasContext)||void 0===n?void 0:n.canvas);this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof Hg&&this.props.onWebGLInitialized(this.device.gl);const i=new rd;i.play(),this.animationLoop.attachTimeline(i),this.eventManager=new Om(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const o in Ee)this.eventManager.on(o,this._onEvent);this.viewManager=new pd({timeline:i,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new fd(this.device,{deck:this,stats:this.stats,viewport:r,timeline:i}),this.effectManager=new hh({deck:this,device:this.device}),this.deckRenderer=new _h(this.device),this.deckPicker=new Sh(this.device),this.widgetManager=new Rh({deck:this,parentElement:null===(t=this.canvas)||void 0===t?void 0:t.parentElement}),this.widgetManager.addDefault(new Ph),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){var n;const{device:i,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:i,gl:r});const o={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t};null===(n=this.deckRenderer)||void 0===n||n.renderLayers(o),"screen"===o.pass&&this.widgetManager.onRedraw({viewports:o.viewports,layers:o.layers}),this.props.onAfterRender({device:i,gl:r})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),ve.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=hf.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}(Nm=Bm).defaultProps=Dm,Nm.VERSION=ef;const Um="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function zm(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}const Gm={position:"absolute",zIndex:-1};function jm(t,n){if("function"===typeof t)return t(n);if(Array.isArray(t))return t.map((e=>jm(e,n)));if(Vm(t)){if(function(e){var t;return null===(t=e.props)||void 0===t?void 0:t.mapStyle}(t))return n.style=Gm,(0,e.cloneElement)(t,n);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(t))return(0,e.cloneElement)(t,n)}return t}function Vm(e){return e&&"object"===typeof e&&"type"in e||!1}function Wm(t){if("function"===typeof t)return(0,e.createElement)(vd,{},t);if(Array.isArray(t))return t.map(Wm);if(Vm(t)){if(t.type===e.Fragment)return Wm(t.props.children);if(zm(t.type,vd))return t}return t}const Hm={mixBlendMode:null};function Xm(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const Km=e.forwardRef((function(t,n){const[i,r]=(0,e.useState)(0),o=(0,e.useRef)({control:null,version:i,forceUpdate:()=>r((e=>e+1))}).current,s=(0,e.useRef)(null),a=(0,e.useRef)(null),l=(0,e.useMemo)((()=>function(t){let{children:n,layers:i=[],views:r=null}=t;const o=[],s=[],a={};return e.Children.forEach(Wm(n),(e=>{if(Vm(e)){const t=e.type;if(zm(t,Cl)){const n=function(e,t){const n={},i=e.defaultProps||{};for(const r in t)i[r]!==t[r]&&(n[r]=t[r]);return new e(n)}(t,e.props);s.push(n)}else o.push(e);if(zm(t,vd)&&t!==vd&&e.props.id){const n=new t(e.props);a[n.id]=n}}else e&&o.push(e)})),Object.keys(a).length>0&&(Array.isArray(r)?r.forEach((e=>{a[e.id]=e})):r&&(a[r.id]=r),r=Object.values(a)),i=s.length>0?[...s,...i]:i,{layers:i,children:o,views:r}}(t)),[t.layers,t.views,t.children]);let c=!0;const u=e=>{var n;return c&&t.viewState?(o.viewStateUpdateRequested=e,null):(o.viewStateUpdateRequested=null,null===(n=t.onViewStateChange)||void 0===n?void 0:n.call(t,e))},d=e=>{var n;c?o.interactionStateUpdateRequested=e:(o.interactionStateUpdateRequested=null,null===(n=t.onInteractionStateChange)||void 0===n||n.call(t,e))},h=(0,e.useMemo)((()=>{const e={...t,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete e._customRender,o.deck&&o.deck.setProps(e),e}),[t]);(0,e.useEffect)((()=>{const e=t.Deck||Bm;return o.deck=function(e,t,n){const i=new t({...n,_customRender:t=>{e.redrawReason=t;const n=i.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():Xm(e)}});return i}(o,e,{...h,parent:s.current,canvas:a.current}),()=>{var e;return null===(e=o.deck)||void 0===e?void 0:e.finalize()}}),[]),Um((()=>{Xm(o);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=o;e&&u(e),t&&d(t)})),(0,e.useImperativeHandle)(n,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(o)),[]);const f=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:p,width:g="100%",height:m="100%",id:_,style:v}=t,{containerStyle:y,canvasStyle:b}=(0,e.useMemo)((()=>function(e){let{width:t,height:n,style:i}=e;const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},o={left:0,top:0};if(i)for(const s in i)s in Hm?o[s]=i[s]:r[s]=i[s];return{containerStyle:r,canvasStyle:o}}({width:g,height:m,style:v})),[g,m,v]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===f||o.version!==i){o.lastRenderedViewports=f,o.version=i;const t=function(t){let{children:n,deck:i,ContextProvider:r}=t;const{viewManager:o}=i||{};if(!o||!o.views.length)return[];const s={},a=o.views[0].id;for(const e of n){let t=a,n=e;Vm(e)&&zm(e.type,vd)&&(t=e.props.id||a,n=e.props.children);const i=o.getViewport(t),r=o.getViewState(t);if(i){r.padding=i.padding;const{x:e,y:o,width:a,height:l}=i;n=jm(n,{x:e,y:o,width:a,height:l,viewport:i,viewState:r}),s[t]||(s[t]={viewport:i,children:[]}),s[t].children.push(n)}}return Object.keys(s).map((t=>{const{viewport:n,children:o}=s[t],{x:a,y:l,width:c,height:u}=n,d={position:"absolute",left:a,top:l,width:c,height:u},h="view-".concat(t),f=(0,e.createElement)("div",{key:h,id:h,style:d},...o);if(r){const o={viewport:n,container:i.canvas.offsetParent,eventManager:i.eventManager,onViewStateChange:e=>{e.viewId=t,i._onViewStateChange(e)}};return(0,e.createElement)(r,{key:h,value:o},f)}return f}))}({children:l.children,deck:o.deck,ContextProvider:p}),n=(0,e.createElement)("canvas",{key:"canvas",id:_||"deckgl-overlay",ref:a,style:b});o.control=(0,e.createElement)("div",{id:"".concat(_||"deckgl","-wrapper"),ref:s,style:y},[n,t])}return c=!1,o.control})),Ym=Km;var qm=n(746),Zm=n.n(qm),Qm=n(579);const $m="pk.eyJ1IjoiYXJzLTQ1IiwiYSI6ImNsd2pzbndxNDA2aDYycXA4dnVnMmppb2cifQ.4g6t9R6t-MkAqbiAkYtYbQ",Jm={latitude:26.7922,longitude:82.1998,zoom:16,bearing:0,pitch:70};const e_=function(){const[t,n]=(0,e.useState)([82.19567380332623,26.795128674369636]),[r,o]=(0,e.useState)([82.20084166864672,26.788580319982984]),[s,a]=(0,e.useState)([82.14921774533082,26.74679522307378]),[l,c]=(0,e.useState)([82.22913768121583,26.79003122169498]),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)([]),[p,g]=(0,e.useState)([]),[m,_]=(0,e.useState)([]),v=(0,e.useRef)();(0,e.useEffect)((()=>{var e;y(),null===(e=z.current)||void 0===e||e.trigger()}),[t,v]);const y=async()=>{const e=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(r[0],",").concat(r[1],";").concat(t[0],",").concat(t[1],"?steps=true&geometries=geojson&access_token=").concat($m)),n=await e.json(),i=n.routes[0].geometry.coordinates;d(i);const o=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(s[0],",").concat(s[1],";").concat(t[0],",").concat(t[1],"?steps=true&geometries=geojson&access_token=").concat($m)),a=(await o.json()).routes[0].geometry.coordinates;g(a);const c=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(l[0],",").concat(l[1],";").concat(t[0],",").concat(t[1],"?steps=true&geometries=geojson&access_token=").concat($m)),u=(await c.json()).routes[0].geometry.coordinates;_(u);const h=n.routes[0].legs[0].steps;f(h),console.log(h)},b={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"LineString",coordinates:[...u]}}]},w={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...t]}}]},E={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...r]}}]},S={id:"end",type:"circle",source:{type:"geojson",data:t},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},T={id:"start",type:"circle",source:{type:"geojson",data:r},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},x={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"LineString",coordinates:[...p]}}]},A={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...s]}}]},R={id:"start2",type:"circle",source:{type:"geojson",data:s},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},C={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...t]}}]},P={id:"end2",type:"circle",source:{type:"geojson",data:t},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},L={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"LineString",coordinates:[...m]}}]},M={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...t]}}]},k={type:"FeatureCollection",features:[{type:"feature",geometry:{type:"Point",coordinates:[...l]}}]},I={id:"end3",type:"circle",source:{type:"geojson",data:t},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},O={id:"start3",type:"circle",source:{type:"geojson",data:l},paint:{"circle-radius":7,"circle-color":"#E7B9E3"}},N=[new td({id:"nationalParks",data:i,filled:!0,pointRadiusMinPixels:5,pointRadiusScale:2,getPointRadius:e=>5,getFillColor:[86,144,58,250],pickable:!0,autoHighlight:!0,onClick:e=>{if(e.object){const t=e.object.properties.Name,n=e.object.properties.Description;Zm().fire({position:"center",title:t,text:n,showConfirmButton:!0})}}})];return(0,Qm.jsxs)("section",{className:"relative",children:[(0,Qm.jsx)(Ym,{initialViewState:Jm,controller:!0,layers:N,children:(0,Qm.jsxs)(B,{mapStyle:"mapbox://styles/ars-45/clwapbsyi008301pge9vfg6n1/draft",mapboxAccessToken:$m,children:[(0,Qm.jsx)(j,{id:"routeSource",type:"geojson",data:b,children:(0,Qm.jsx)(G,{id:"roadLayer",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"orange","line-width":7,"line-opacity":.75}})}),(0,Qm.jsx)(j,{id:"endSource",type:"geojson",data:w,children:(0,Qm.jsx)(G,{...S})}),(0,Qm.jsx)(j,{id:"startSource",type:"geojson",data:E,children:(0,Qm.jsx)(G,{...T})}),(0,Qm.jsx)(j,{id:"routeSource2",type:"geojson",data:x,children:(0,Qm.jsx)(G,{id:"roadLayer2",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"yellow","line-width":7,"line-opacity":.75}})}),(0,Qm.jsx)(j,{id:"endSource2",type:"geojson",data:C,children:(0,Qm.jsx)(G,{...P})}),(0,Qm.jsx)(j,{id:"startSource2",type:"geojson",data:A,children:(0,Qm.jsx)(G,{...R})}),(0,Qm.jsx)(j,{id:"routeSource3",type:"geojson",data:L,children:(0,Qm.jsx)(G,{id:"roadLayer3",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"red","line-width":7,"line-opacity":.75}})}),(0,Qm.jsx)(j,{id:"endSource3",type:"geojson",data:M,children:(0,Qm.jsx)(G,{...I})}),(0,Qm.jsx)(j,{id:"startSource3",type:"geojson",data:k,children:(0,Qm.jsx)(G,{...O})}),(0,Qm.jsx)(z,{showAccuracyCircle:!1,onGeolocate:e=>o([e.coords.longitude,e.coords.latitude]),ref:v}),(0,Qm.jsx)(U,{})]})}),(0,Qm.jsx)("article",{className:"bg-slate-800 rounded-md px-5 py-3 max-h-[50vh] absolute top-5 left-5",children:h.map(((e,t)=>{e.maneuver.instruction}))})]})},t_=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),i(e),r(e),o(e),s(e)}))};t.createRoot(document.getElementById("root")).render((0,Qm.jsx)(e.StrictMode,{children:(0,Qm.jsx)(e_,{})})),t_()})()})();
//# sourceMappingURL=main.35ed129d.js.map